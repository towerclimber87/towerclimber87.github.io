<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>IHA Code Generator</title>
    <style>
        /* Add your CSS styles here */
          .subb,
          .subb2,
          .subb3,
          .subb4,
          .subb5,
          .subb6,
          .subb7,
          .subb8 {
            margin-left: 1em; /* Adjust the value as needed */
            display: none; /* Hide the divs by default */
         }      
          header h1 {
            margin-left: 1em; /* Adjust the value as needed */
            color: white; /* Set the color to blue */
          }
          main h3 {
            margin-left: 0em; /* Adjust the value as needed */
            color: white; /* Set the color to blue */
          }
          main h4 {
            margin-left: 1em; /* Adjust the value as needed */
            color: red; /* Set the color to blue */     
          }
          main h5 {
            color: red; /* Set the color to blue */  
          }
          main h6 {
            color: red; /* Set the color to blue */ 
          }
          main h7 {
            color: black; /* Set the color to blue */                                              
          }  
          main h10 {
            color: white; /* Set the color to blue */                                              
          }            
          main h8 {
            color: red; /* Set the color to blue */                                                
          }  
          main h9 {
            margin-left: 3em; /* Adjust the value as needed */
            color: red; /* Set the color to blue */     
          }                          
        #downloadButton {
            margin-left: 2em; /* Adjust the value as needed */
            background-color: green; /* Set the background color to green */
            color: white; /* Set the text color to white */
            border: none; /* Remove border for a cleaner look */
            padding: 10px 20px; /* Add padding for better appearance */
            cursor: pointer; /* Add cursor pointer for user interaction */
        }
        #downloadGuideButton {
            margin-left: 2em; /* Adjust the value as needed */
            background-color: green; /* Set the background color to green */
            color: white; /* Set the text color to white */
            border: none; /* Remove border for a cleaner look */
            padding: 10px 20px; /* Add padding for better appearance */
            cursor: pointer; /* Add cursor pointer for user interaction */
        }   
        .flex-container {
            display: flex;
          }
        .centered-logo {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh; /* This makes the div take the full height of the viewport */
        }        
          .flex-item {
            /* This ensures that the items within the flex-item are stacked vertically */
            display: flex;
            flex-direction: column;
            margin-right: 20px; /* Adjust as needed for spacing between columns */
          }     
          body {
            padding-left: 48px !important;
          }    
          .checkbox-container {
            display: flex;
            align-items: center; /* Vertically centers the items in the container */
            justify-content: center; /* Horizontally centers the items in the container */
        }                    
    </style>
</head>
<head>
  <title>Your Page Title</title>
  <style>
      body, html {
          margin: 0;
          padding: 0;
          height: 100%;
      }
      .background-image {
          position: fixed; /* or absolute */
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          z-index: -1; /* Ensures the image stays in the background */
      }
      .overlay-content {
          position: relative; /* Adjust as needed */
          z-index: 1; /* Above the background image */
          /* Further styling as needed */
      }
      .rounded-box {
          border: 2px solid white; /* White solid border */
          border-radius: 10px; /* Rounded corners */
          padding: 10px; /* Padding inside the box */
          margin: 10px 0; /* Margin outside the box */
          display: block; /* Changed from inline-block to block */
          width: 220px; /* Auto should take the full width of its parent */
          box-sizing: border-box; /* Ensure padding is included in the width */
      }
      body {
            color: white; /* This sets the default text color to white for the entire page */
      }        
  </style>
</head>
<body>
<div class="background-image">
  <img src="Logo No Water Mark.jpg" alt="Background Logo" style="width: 100%; height: 100%; object-fit: cover;">
</div>
</main>                                              
</div>    
<header>
  <h1>IHA Code Generator  111</h1>
</header>
<h4>ENTER YOUR OWN VALUES </h4>
<div class="rounded-box">
  <div> 
    <div>
        <label for="textEntry1">ESPHome Name:</label>
        <pre></pre> 
        <input type="text" id="textEntry1" value="iha-rack-system">
    </div>
    <div>
        <label for="textEntry2">OTA Password:</label>
        <pre></pre> 
        <input type="text" id="textEntry2" value="Dm.376223">
    </div>
    <div>
        <label for="textEntry3">Web Portal Username:</label>
        <pre></pre> 
        <input type="text" id="textEntry3" value="admin">
    </div>
    <div>
        <label for="textEntry4">Web Portal Password:</label>
        <pre></pre> 
        <input type="text" id="textEntry4" value="password1234">
    </div>
    <div>
        <label for="textEntry5">Display Name:</label>
        <pre></pre> 
        <input type="text" id="textEntry5" value="IHA Rack System">
    </div>
    <div>
        <label for="textEntry6">API Key:</label>
        <pre></pre> 
        <input type="text" id="textEntry6" value="AS2li9nZ3SakmvEWO4QWJQVuAwCUAdO38RPUG7MUNmA=">
    </div>
  </div>
</div>   
<pre></pre>   
<div class="rounded-box">
  <div>   
    <main>
    <h9>Options </h9>       
    <main>                
    <label for="dropdown9">Logger:</label>
    <select id="dropdown9">
        <option value="Disabled">Disabled</option>
        <option value="Enabled">Enabled</option>
        <!-- Add more options for Node Device 2 as needed -->
    </select> 
    <main>
      <label for="dropdown13">OTA Password:</label>
      <select id="dropdown13">
          <option value="Disabled">Disabled</option>
          <option value="Enabled">Enabled</option>
          <!-- Add more options for Node Device 2 as needed -->
      </select>                                                                               
      <main>  
        <main>
          <label for="dropdown15">API Password:</label>
          <select id="dropdown15">
              <option value="Disabled">Disabled</option>
              <option value="Enabled">Enabled</option>
              <!-- Add more options for Node Device 2 as needed -->
          </select>                                                                               
          <main>                 
      <main>
        <label for="dropdown14">Web Server:</label>
        <select id="dropdown14">
            <option value="Enabled">Enabled</option>
            <option value="Disabled">Disabled</option>
            <!-- Add more options for Node Device 2 as needed -->
        </select>                                                                               
        <main>  
    </div>
</div>       
<main>
  <h9>IHA Projects </h9>
<main>
  <pre></pre>   
<main>
  <label for="dropdown16">Pick Project:</label>
  <select id="dropdown16">
    <option value="none">None</option>
    <option value="home_automation_system">Home Automation System</option>    
    <option value="iha_blinds">ESP32 Blinds</option>
    <option value="wiegand_keypad">Wiegand Keypad</option>  
    <option value="door_closer">Automatic Door Closer</option>      
    <option value="spool_winder">Coil Maker</option>       
    <option value="thermostate">Thermostate</option>              
      <!-- Add more options for Node Device 2 as needed -->
  </select>                                                                               
  <main> 
   <div class="subb9">  
    <main>
      <h3>GPIO Rack System (Node Attached Devices) </h3>
    <main>
      <main>
        <label for="dropdown10">Display:</label>
        <select id="dropdown10">
            <option value="Disabled">Disabled</option>
            <option value="Enabled">Enabled</option>
            <!-- Add more options for Node Device 2 as needed -->
        </select>    
        <main>
        <label for="dropdown11">Uptime Sensor:</label>
        <select id="dropdown11">
            <option value="Disabled">Disabled</option>
            <option value="Enabled">Enabled</option>
            <!-- Add more options for Node Device 2 as needed -->
        </select>  
        <main>
        <label for="dropdown12">Status RGB:</label>
        <select id="dropdown12">
            <option value="Disabled">Disabled</option>
            <option value="Enabled">Enabled</option>
            <!-- Add more options for Node Device 2 as needed -->
        </select>                                                                               
        <main>   
        <pre></pre>        
      <h4>Address Assigned on board </h4>  
      <h10>If 4 Port Rack is used, it must start with Card 1 </h10> 
      <main> 
        <label for="dropdown1">Device 1 Address:</label>
        <select id="dropdown1">
            <option value="none">None</option>
            <option value="0x20">0x20</option>
            <option value="0x21">0x21</option>
            <option value="0x22">0x22</option>
            <option value="0x23">0x23</option>
            <option value="0x24">0x24</option>
            <option value="0x25">0x25</option>
            <option value="0x26">0x26</option>
            <option value="0x27">0x27</option>
            <!-- Add more options for Node Device 1 as needed -->
        </select>
    </main>
    <div class="subb">
        <label for="type1">Device 1 Type:</label>
        <select id="type1">
          <pre></pre>  
          <option value="none">none</option>
          <option value="16 GPIO Rack Card 1">Card 1 (4 Port Rack)</option>
          <option value="Button Controller">Button Controller</option>
          <option value="8 Port Relay Board 1">8 Port Relay Board 1</option>
          <option value="8 Port Relay Board 2">8 Port Relay Board 2</option>
          <option value="8 Port Relay Board 3">8 Port Relay Board 3</option>
          <option value="8 Port Relay Board 4">8 Port Relay Board 4</option>
            <!-- Add more options for Node Device Type 1 as needed -->
        </select>
    </div>
    <main>
        <label for="dropdown2">Device 2 Address:</label>
        <select id="dropdown2">
            <option value="none">None</option>
            <option value="0x20">0x20</option>
            <option value="0x21">0x21</option>
            <option value="0x22">0x22</option>
            <option value="0x23">0x23</option>
            <option value="0x24">0x24</option>
            <option value="0x25">0x25</option>
            <option value="0x26">0x26</option>
            <option value="0x27">0x27</option>
            <!-- Add more options for Node Device 2 as needed -->
        </select>
    </main>  
    <div class="subb2">
        <label for="type2">Device 2 Type:</label>
        <select id="type2">
          <pre></pre>  
          <option value="none">none</option>
          <option value="16 GPIO Rack Card 2">Card 2 (4 Port Rack)</option>   
          <option value="Button Controller">Button Controller</option>
          <option value="8 Port Relay Board 1">8 Port Relay Board 1</option>
          <option value="8 Port Relay Board 2">8 Port Relay Board 2</option>
          <option value="8 Port Relay Board 3">8 Port Relay Board 3</option>
          <option value="8 Port Relay Board 4">8 Port Relay Board 4</option>
            <!-- Add more options for Node Device Type 2 as needed -->
        </select>
    </div>
    <main>
      <label for="dropdown3">Device 3 Address:</label>
      <select id="dropdown3">
          <option value="none">None</option>
          <option value="0x20">0x20</option>
          <option value="0x21">0x21</option>
          <option value="0x22">0x22</option>
          <option value="0x23">0x23</option>
          <option value="0x24">0x24</option>
          <option value="0x25">0x25</option>
          <option value="0x26">0x26</option>
          <option value="0x27">0x27</option>
          <!-- Add more options for Node Device 2 as needed -->
      </select>
    </main>  
    <div class="subb3">
      <label for="type3">Device 3 Type:</label>
      <select id="type3">
        <pre></pre>  
        <option value="none">none</option> 
        <option value="16 GPIO Rack Card 3">Card 3 (4 Port Rack)</option>
        <option value="Button Controller">Button Controller</option>
        <option value="8 Port Relay Board 1">8 Port Relay Board 1</option>
        <option value="8 Port Relay Board 2">8 Port Relay Board 2</option>
        <option value="8 Port Relay Board 3">8 Port Relay Board 3</option>
        <option value="8 Port Relay Board 4">8 Port Relay Board 4</option>
          <!-- Add more options for Node Device Type 2 as needed -->
      </select>
    </div>      
    <main>
        <label for="dropdown4">Device 4 Address:</label>
        <select id="dropdown4">
            <option value="none">None</option>
            <option value="0x20">0x20</option>
            <option value="0x21">0x21</option>
            <option value="0x22">0x22</option>
            <option value="0x23">0x23</option>
            <option value="0x24">0x24</option>
            <option value="0x25">0x25</option>
            <option value="0x26">0x26</option>
            <option value="0x27">0x27</option>
            <!-- Add more options for Node Device 2 as needed -->
        </select>
    </main>  
    <div class="subb4">
        <label for="type4">Device 4 Type:</label>
        <select id="type4">
          <pre></pre>  
          <option value="none">none</option>
          <option value="16 GPIO Rack Card 4">Card 4 (4 Port Rack)</option>
          <option value="Button Controller">Button Controller</option>
          <option value="8 Port Relay Board 1">8 Port Relay Board 1</option>
          <option value="8 Port Relay Board 2">8 Port Relay Board 2</option>
          <option value="8 Port Relay Board 3">8 Port Relay Board 3</option>
          <option value="8 Port Relay Board 4">8 Port Relay Board 4</option>
            <!-- Add more options for Node Device Type 2 as needed -->
        </select> 
    </div>        
    <main>
          <label for="dropdown5">Device 5 Address:</label>
          <select id="dropdown5">
              <option value="none">None</option>
              <option value="0x20">0x20</option>
              <option value="0x21">0x21</option>
              <option value="0x22">0x22</option>
              <option value="0x23">0x23</option>
              <option value="0x24">0x24</option>
              <option value="0x25">0x25</option>
              <option value="0x26">0x26</option>
              <option value="0x27">0x27</option>
              <!-- Add more options for Node Device 2 as needed -->
          </select>
    </main>   
    <div class="subb5">
          <label for="type5">Device 5 Type:</label>
          <select id="type5">
            <pre></pre>  
            <option value="none">none</option>
            <option value="Button Controller">Button Controller</option>
            <option value="8 Port Relay Board 1">8 Port Relay Board 1</option>
            <option value="8 Port Relay Board 2">8 Port Relay Board 2</option>
            <option value="8 Port Relay Board 3">8 Port Relay Board 3</option>
            <option value="8 Port Relay Board 4">8 Port Relay Board 4</option>
              <!-- Add more options for Node Device Type 2 as needed -->
          </select>  
    </div>        
    <main>
            <label for="dropdown6">Device 6 Address:</label>
            <select id="dropdown6">
                <option value="none">None</option>
                <option value="0x20">0x20</option>
                <option value="0x21">0x21</option>
                <option value="0x22">0x22</option>
                <option value="0x23">0x23</option>
                <option value="0x24">0x24</option>
                <option value="0x25">0x25</option>
                <option value="0x26">0x26</option>
                <option value="0x27">0x27</option>
                <!-- Add more options for Node Device 2 as needed -->
            </select>
     </main>
     <div class="subb6">
            <label for="type6">Device 6 Type:</label>
            <select id="type6">
              <pre></pre>  
              <option value="none">none</option>
              <option value="Button Controller">Button Controller</option>
              <option value="8 Port Relay Board 1">8 Port Relay Board 1</option>
              <option value="8 Port Relay Board 2">8 Port Relay Board 2</option>
              <option value="8 Port Relay Board 3">8 Port Relay Board 3</option>
              <option value="8 Port Relay Board 4">8 Port Relay Board 4</option>
                <!-- Add more options for Node Device Type 2 as needed -->
            </select>   
     </div>   
     <div class="subb6"></div>             
     <main>
              <label for="dropdown7">Device 7 Address:</label>
              <select id="dropdown7">
                  <option value="none">None</option>
                  <option value="0x20">0x20</option>
                  <option value="0x21">0x21</option>
                  <option value="0x22">0x22</option>
                  <option value="0x23">0x23</option>
                  <option value="0x24">0x24</option>
                  <option value="0x25">0x25</option>
                  <option value="0x26">0x26</option>
                  <option value="0x27">0x27</option>
                  <!-- Add more options for Node Device 2 as needed -->
              </select>
    </main>   
    <div class="subb7">
              <label for="type7">Device 7 Type:</label>
              <select id="type7">
                <pre></pre>  
                <option value="none">none</option>
                <option value="Button Controller">Button Controller</option>
                <option value="8 Port Relay Board 1">8 Port Relay Board 1</option>
                <option value="8 Port Relay Board 2">8 Port Relay Board 2</option>
                <option value="8 Port Relay Board 3">8 Port Relay Board 3</option>
                <option value="8 Port Relay Board 4">8 Port Relay Board 4</option>
                  <!-- Add more options for Node Device Type 2 as needed -->
              </select>    
    </div>              
    <main>
                <label for="dropdown8">Device 8 Address:</label>
                <select id="dropdown8">
                    <option value="none">None</option>
                    <option value="0x20">0x20</option>
                    <option value="0x21">0x21</option>
                    <option value="0x22">0x22</option>
                    <option value="0x23">0x23</option>
                    <option value="0x24">0x24</option>
                    <option value="0x25">0x25</option>
                    <option value="0x26">0x26</option>
                    <option value="0x27">0x27</option>
                    <!-- Add more options for Node Device 2 as needed -->
                </select>
    </main>
    <pre></pre>     
    <div class="subb8">
                <label for="type8">Device 8 Type:</label>
                <select id="type8">
                  <option value="none">none</option>
                  <option value="Button Controller">Button Controller</option>
                  <option value="8 Port Relay Board 1">8 Port Relay Board 1</option>
                  <option value="8 Port Relay Board 2">8 Port Relay Board 2</option>
                  <option value="8 Port Relay Board 3">8 Port Relay Board 3</option>
                  <option value="8 Port Relay Board 4">8 Port Relay Board 4</option>
                    <!-- Add more options for Node Device Type 2 as needed -->
                </select>    
    </div>   
   </div>                        
   <div id="section2" class="subb10">             
          <main>
              <h3>IHA Blinds</h3>
          </main>  
          <main>
              <h8>Enter Wifi Information</h8>                       
          </main>
          <div>
              <label for="textEntry14">Wifi SSiD</label>
              <input type="text" id="textEntry14" value="Enter Your Wifi SSid">
          </div> 
          <div>
              <label for="textEntry15">Wifi Password</label>
              <input type="text" id="textEntry15" value="Enter Your Wifi Password">
          </div>  
          <main>
              <h8>Enter Names To Be Used</h8>                       
          </main>                      
          <div>
              <label for="textEntry7">Window 1</label>
              <input type="text" id="textEntry7" value="Blind 1">
          </div>
          <div>
              <label for="textEntry8">Window 2</label>
              <input type="text" id="textEntry8" value="Blind 2">
          </div>
          <div>
              <label for="textEntry9">Window 3</label>
              <input type="text" id="textEntry9" value="Blind 3">
          </div>
          <div>
              <label for="textEntry10">Window 4</label>
              <input type="text" id="textEntry10" value="Blind 4">
          </div>
          <div>
              <label for="textEntry11">Window Group 1</label>
              <input type="text" id="textEntry11" value="Blind Group 1">
          </div>
          <div>
              <label for="textEntry12">Window Group 2</label>
              <input type="text" id="textEntry12" value="Blind Group 2">
          </div>
          <div>
              <label for="textEntry13">Window Group 3</label>
              <input type="text" id="textEntry13" value="Blind Group 3">
          </div>      
          <pre></pre>     
  </div>  
  <div id="section3" class="subb11">  
    <div>                                    
      <main>
        <main>
          <h3>Wiegand Keypad</h3>
        <main>
      <main>          
    </div>                      
  </div> 
  <div id="section3" class="subb16">  
    <div>                                    
      <main>
        <main>
          <h3>Automatic Door Closer</h3>
          <div>
            <label for="textEntry16">Door Name</label>
            <input type="text" id="textEntry16" value="IHA Door Closer">
          </div> 
          <div>
            <label for="textEntry17">Eifi SSID</label>
            <input type="text" id="textEntry17" value="Your WiFi SSID">
          </div> 
          <div>
            <label for="textEntry18">WiFi Password</label>
            <input type="text" id="textEntry18" value="Your WiFi Password">
          </div>             
        <main>
      <main>          
    </div>                      
  </div>  
  <div id="section5" class="subb17">  
    <div>                                    
      <main>
        <main>
          <h3>Coil Maker</h3>
          <div>
            <label for="textEntry16">Door Name</label>
            <input type="text" id="textEntry16" value="IHA Door Closer">
          </div> 
          <div>
            <label for="textEntry17">Eifi SSID</label>
            <input type="text" id="textEntry17" value="Your WiFi SSID">
          </div> 
          <div>
            <label for="textEntry18">WiFi Password</label>
            <input type="text" id="textEntry18" value="Your WiFi Password">
          </div>             
        <main>
      <main>          
    </div>                      
  </div>  
  <div id="section6" class="subb18">  
    <div>                                    
      <main>
        <main>
          <h3>Thermostate</h3>
          <div>
            <label for="textEntry16">Door Name</label>
            <input type="text" id="textEntry16" value="IHA Door Closer">
          </div> 
          <div>
            <label for="textEntry17">Eifi SSID</label>
            <input type="text" id="textEntry17" value="Your WiFi SSID">
          </div> 
          <div>
            <label for="textEntry18">WiFi Password</label>
            <input type="text" id="textEntry18" value="Your WiFi Password">
          </div>             
        <main>
      <main>          
    </div>                      
  </div>         
  <div id="section4" class="subb12">  
    <div class="flex-container">
      <!-- Column 1 -->
      <div class="flex-item">
        <label for="textEntryGPIO_1">Device 1:</label>
        <input type="text" id="textEntryGPIO_1" value="GPIO 1">
        <div class="checkbox-container">
          <input type="checkbox" id="checkGPIO_1">
          <label for="checkGPIO_1">On/Off Switch</label>
        </div>
        <label for="textEntryGPIO_3">Device 3:</label>
        <input type="text" id="textEntryGPIO_3" value="GPIO 3">
        <div class="checkbox-container">
          <input type="checkbox" id="checkGPIO_3">
          <label for="checkGPIO_3">On/Off Switch</label>
        </div>     
        <label for="textEntryGPIO_5">Device 5:</label>
        <input type="text" id="textEntryGPIO_5" value="GPIO 5">
        <div class="checkbox-container">
          <input type="checkbox" id="checkGPIO_5">
          <label for="checkGPIO_5">On/Off Switch</label>
        </div>
        <label for="textEntryGPIO_7">Device 7:</label>
        <input type="text" id="textEntryGPIO_7" value="GPIO 7">
        <div class="checkbox-container">
          <input type="checkbox" id="checkGPIO_7">
          <label for="checkGPIO_7">On/Off Switch</label>
        </div>
        <label for="textEntryGPIO_9">Device 9:</label>
        <input type="text" id="textEntryGPIO_9" value="GPIO 9">
        <div class="checkbox-container">
          <input type="checkbox" id="checkGPIO_9">
          <label for="checkGPIO_9">On/Off Switch</label>
        </div>
        <label for="textEntryGPIO_11">Device 11:</label>
        <input type="text" id="textEntryGPIO_11" value="GPIO 11">
        <div class="checkbox-container">
          <input type="checkbox" id="checkGPIO_11">
          <label for="checkGPIO_11">On/Off Switch</label>
        </div>
        <label for="textEntryGPIO_13">Device 13:</label>
        <input type="text" id="textEntryGPIO_13" value="GPIO 13">
        <div class="checkbox-container">
          <input type="checkbox" id="checkGPIO_13">
          <label for="checkGPIO_13">On/Off Switch</label>
        </div>
        <label for="textEntryGPIO_15">Device 15:</label>
        <input type="text" id="textEntryGPIO_15" value="GPIO 15">
        <div class="checkbox-container">
          <input type="checkbox" id="checkGPIO_15">
          <label for="checkGPIO_15">On/Off Switch</label>
        </div>
      </div>
      
      <!-- Column 2 -->
      <div class="flex-item">
        <label for="textEntryGPIO_2">Device 2:</label>
        <input type="text" id="textEntryGPIO_2" value="GPIO 2">
        <div class="checkbox-container">
          <input type="checkbox" id="checkGPIO_2">
          <label for="checkGPIO_2">On/Off Switch</label>
        </div>        
        <label for="textEntryGPIO_4">Device 4:</label>
        <input type="text" id="textEntryGPIO_4" value="GPIO 4">
        <div class="checkbox-container">
          <input type="checkbox" id="checkGPIO_4">
          <label for="checkGPIO_4">On/Off Switch</label>
        </div>   
        <label for="textEntryGPIO_6">Device 6:</label>
        <input type="text" id="textEntryGPIO_6" value="GPIO 6">
        <div class="checkbox-container">
          <input type="checkbox" id="checkGPIO_6">
          <label for="checkGPIO_6">On/Off Switch</label>
        </div>   
        <label for="textEntryGPIO_8">Device 8:</label>
        <input type="text" id="textEntryGPIO_8" value="GPIO 8">
        <div class="checkbox-container">
          <input type="checkbox" id="checkGPIO_8">
          <label for="checkGPIO_8">On/Off Switch</label>
        </div>   
        <label for="textEntryGPIO_10">Device 10:</label>
        <input type="text" id="textEntryGPIO_10" value="GPIO 10">
        <div class="checkbox-container">
          <input type="checkbox" id="checkGPIO_10">
          <label for="checkGPIO_10">On/Off Switch</label>
        </div>   
        <label for="textEntryGPIO_12">Device 12:</label>
        <input type="text" id="textEntryGPIO_12" value="GPIO 12">
        <div class="checkbox-container">
          <input type="checkbox" id="checkGPIO_12">
          <label for="checkGPIO_12">On/Off Switch</label>
        </div>   
        <label for="textEntryGPIO_14">Device 14:</label>
        <input type="text" id="textEntryGPIO_14" value="GPIO 14">
        <div class="checkbox-container">
          <input type="checkbox" id="checkGPIO_14">
          <label for="checkGPIO_14">On/Off Switch</label>
        </div>   
        <label for="textEntryGPIO_16">Device 16:</label>
        <input type="text" id="textEntryGPIO_16" value="GPIO 16">  
        <div class="checkbox-container">
          <input type="checkbox" id="checkGPIO_16">
          <label for="checkGPIO_16">On/Off Switch</label>
        </div>   
      </div>
    </div>  
  </div>
  <div id="section5" class="subb13">  
    <div class="flex-container">
      <!-- Column 1 -->
      <div class="flex-item">
        <label for="textEntryGPIO_17">Device 17:</label>
        <input type="text" id="textEntryGPIO_17" value="GPIO 17">
        <div class="checkbox-container">
          <input type="checkbox" id="checkGPIO_17">
          <label for="checkGPIO_17">On/Off Switch</label>
        </div>   
        <label for="textEntryGPIO_19">Device 19:</label>
        <input type="text" id="textEntryGPIO_19" value="GPIO 19">
        <div class="checkbox-container">
          <input type="checkbox" id="checkGPIO_19">
          <label for="checkGPIO_19">On/Off Switch</label>
        </div>   
        <label for="textEntryGPIO_21">Device 21:</label>
        <input type="text" id="textEntryGPIO_21" value="GPIO 21">
        <div class="checkbox-container">
          <input type="checkbox" id="checkGPIO_21">
          <label for="checkGPIO_21">On/Off Switch</label>
        </div>   
        <label for="textEntryGPIO_23">Device 23:</label>
        <input type="text" id="textEntryGPIO_23" value="GPIO 23">
        <div class="checkbox-container">
          <input type="checkbox" id="checkGPIO_23">
          <label for="checkGPIO_23">On/Off Switch</label>
        </div>   
        <label for="textEntryGPIO_25">Device 25:</label>
        <input type="text" id="textEntryGPIO_25" value="GPIO 25">
        <div class="checkbox-container">
          <input type="checkbox" id="checkGPIO_25">
          <label for="checkGPIO_25">On/Off Switch</label>
        </div>   
        <label for="textEntryGPIO_27">Device 27:</label>
        <input type="text" id="textEntryGPIO_27" value="GPIO 27">
        <div class="checkbox-container">
          <input type="checkbox" id="checkGPIO_27">
          <label for="checkGPIO_27">On/Off Switch</label>
        </div>   
        <label for="textEntryGPIO_29">Device 29:</label>
        <input type="text" id="textEntryGPIO_29" value="GPIO 29">
        <div class="checkbox-container">
          <input type="checkbox" id="checkGPIO_29">
          <label for="checkGPIO_29">On/Off Switch</label>
        </div>   
        <label for="textEntryGPIO_31">Device 31:</label>
        <input type="text" id="textEntryGPIO_31" value="GPIO 31">
        <div class="checkbox-container">
          <input type="checkbox" id="checkGPIO_31">
          <label for="checkGPIO_31">On/Off Switch</label>
        </div>   
      </div>
      
      <!-- Column 2 -->
      <div class="flex-item">
        <label for="textEntryGPIO_18">Device 18:</label>
        <input type="text" id="textEntryGPIO_18" value="GPIO 18">
        <div class="checkbox-container">
          <input type="checkbox" id="checkGPIO_18">
          <label for="checkGPIO_18">On/Off Switch</label>
        </div>   
        <label for="textEntryGPIO_20">Device 20:</label>
        <input type="text" id="textEntryGPIO_20" value="GPIO 20">
        <div class="checkbox-container">
          <input type="checkbox" id="checkGPIO_20">
          <label for="checkGPIO_20">On/Off Switch</label>
        </div>   
        <label for="textEntryGPIO_22">Device 22:</label>
        <input type="text" id="textEntryGPIO_22" value="GPIO 22">
        <div class="checkbox-container">
          <input type="checkbox" id="checkGPIO_22">
          <label for="checkGPIO_22">On/Off Switch</label>
        </div>   
        <label for="textEntryGPIO_24">Device 24:</label>
        <input type="text" id="textEntryGPIO_24" value="GPIO 24">
        <div class="checkbox-container">
          <input type="checkbox" id="checkGPIO_24">
          <label for="checkGPIO_24">On/Off Switch</label>
        </div>   
        <label for="textEntryGPIO_26">Device 26:</label>
        <input type="text" id="textEntryGPIO_26" value="GPIO 26">
        <div class="checkbox-container">
          <input type="checkbox" id="checkGPIO_26">
          <label for="checkGPIO_26">On/Off Switch</label>
        </div>   
        <label for="textEntryGPIO_28">Device 28:</label>
        <input type="text" id="textEntryGPIO_28" value="GPIO 28">
        <div class="checkbox-container">
          <input type="checkbox" id="checkGPIO_28">
          <label for="checkGPIO_28">On/Off Switch</label>
        </div>   
        <label for="textEntryGPIO_30">Device 30:</label>
        <input type="text" id="textEntryGPIO_30" value="GPIO 30">
        <div class="checkbox-container">
          <input type="checkbox" id="checkGPIO_30">
          <label for="checkGPIO_30">On/Off Switch</label>
        </div>   
        <label for="textEntryGPIO_32">Device 32:</label>
        <input type="text" id="textEntryGPIO_32" value="GPIO 32">  
        <div class="checkbox-container">
          <input type="checkbox" id="checkGPIO_32">
          <label for="checkGPIO_32">On/Off Switch</label>
        </div>   
      </div>
    </div>  
  </div>   
  <div id="section6" class="subb14">  
    <div class="flex-container">
      <!-- Column 1 -->
      <div class="flex-item">
        <label for="textEntryGPIO_33">Device 33:</label>
        <input type="text" id="textEntryGPIO_33" value="GPIO 33">
        <div class="checkbox-container">
          <input type="checkbox" id="checkGPIO_33">
          <label for="checkGPIO_33">On/Off Switch</label>
        </div>   
        <label for="textEntryGPIO_35">Device 35:</label>
        <input type="text" id="textEntryGPIO_35" value="GPIO 35">
        <div class="checkbox-container">
          <input type="checkbox" id="checkGPIO_35">
          <label for="checkGPIO_35">On/Off Switch</label>
        </div>   
        <label for="textEntryGPIO_37">Device 37:</label>
        <input type="text" id="textEntryGPIO_37" value="GPIO 37">
        <div class="checkbox-container">
          <input type="checkbox" id="checkGPIO_37">
          <label for="checkGPIO_37">On/Off Switch</label>
        </div>   
        <label for="textEntryGPIO_39">Device 39:</label>
        <input type="text" id="textEntryGPIO_39" value="GPIO 39">
        <div class="checkbox-container">
          <input type="checkbox" id="checkGPIO_39">
          <label for="checkGPIO_39">On/Off Switch</label>
        </div>   
        <label for="textEntryGPIO_41">Device 41:</label>
        <input type="text" id="textEntryGPIO_41" value="GPIO 41">
        <div class="checkbox-container">
          <input type="checkbox" id="checkGPIO_41">
          <label for="checkGPIO_41">On/Off Switch</label>
        </div>   
        <label for="textEntryGPIO_43">Device 43:</label>
        <input type="text" id="textEntryGPIO_43" value="GPIO 43">
        <div class="checkbox-container">
          <input type="checkbox" id="checkGPIO_43">
          <label for="checkGPIO_43">On/Off Switch</label>
        </div>   
        <label for="textEntryGPIO_45">Device 45:</label>
        <input type="text" id="textEntryGPIO_45" value="GPIO 45">
        <div class="checkbox-container">
          <input type="checkbox" id="checkGPIO_45">
          <label for="checkGPIO_45">On/Off Switch</label>
        </div>   
        <label for="textEntryGPIO_47">Device 47:</label>
        <input type="text" id="textEntryGPIO_47" value="GPIO 47">
        <div class="checkbox-container">
          <input type="checkbox" id="checkGPIO_47">
          <label for="checkGPIO_47">On/Off Switch</label>
        </div>   
      </div>
      
      <!-- Column 2 -->
      <div class="flex-item">
        <label for="textEntryGPIO_34">Device 34:</label>
        <input type="text" id="textEntryGPIO_34" value="GPIO 34">
        <div class="checkbox-container">
          <input type="checkbox" id="checkGPIO_34">
          <label for="checkGPIO_34">On/Off Switch</label>
        </div>   
        <label for="textEntryGPIO_36">Device 36:</label>
        <input type="text" id="textEntryGPIO_36" value="GPIO 36">
        <div class="checkbox-container">
          <input type="checkbox" id="checkGPIO_36">
          <label for="checkGPIO_36">On/Off Switch</label>
        </div>   
        <label for="textEntryGPIO_38">Device 38:</label>
        <input type="text" id="textEntryGPIO_38" value="GPIO 38">
        <div class="checkbox-container">
          <input type="checkbox" id="checkGPIO_38">
          <label for="checkGPIO_38">On/Off Switch</label>
        </div>   
        <label for="textEntryGPIO_40">Device 40:</label>
        <input type="text" id="textEntryGPIO_40" value="GPIO 40">
        <div class="checkbox-container">
          <input type="checkbox" id="checkGPIO_40">
          <label for="checkGPIO_40">On/Off Switch</label>
        </div>   
        <label for="textEntryGPIO_42">Device 42:</label>
        <input type="text" id="textEntryGPIO_42" value="GPIO 42">
        <div class="checkbox-container">
          <input type="checkbox" id="checkGPIO_42">
          <label for="checkGPIO_42">On/Off Switch</label>
        </div>   
        <label for="textEntryGPIO_44">Device 44:</label>
        <input type="text" id="textEntryGPIO_44" value="GPIO 44">
        <div class="checkbox-container">
          <input type="checkbox" id="checkGPIO_44">
          <label for="checkGPIO_44">On/Off Switch</label>
        </div>   
        <label for="textEntryGPIO_46">Device 46:</label>
        <input type="text" id="textEntryGPIO_46" value="GPIO 46">
        <div class="checkbox-container">
          <input type="checkbox" id="checkGPIO_46">
          <label for="checkGPIO_46">On/Off Switch</label>
        </div>   
        <label for="textEntryGPIO_48">Device 48:</label>
        <input type="text" id="textEntryGPIO_48" value="GPIO 48"> 
        <div class="checkbox-container">
          <input type="checkbox" id="checkGPIO_48">
          <label for="checkGPIO_48">On/Off Switch</label>
        </div>    
      </div>
    </div>  
  </div>    
  <div id="section7" class="subb15">  
    <div class="flex-container">
      <!-- Column 1 -->
      <div class="flex-item">
        <label for="textEntryGPIO_49">Device 49:</label>
        <input type="text" id="textEntryGPIO_49" value="GPIO 49">
        <div class="checkbox-container">
          <input type="checkbox" id="checkGPIO_49">
          <label for="checkGPIO_49">On/Off Switch</label>
        </div>   
        <label for="textEntryGPIO_51">Device 51:</label>
        <input type="text" id="textEntryGPIO_51" value="GPIO 51">
        <div class="checkbox-container">
          <input type="checkbox" id="checkGPIO_51">
          <label for="checkGPIO_51">On/Off Switch</label>
        </div>   
        <label for="textEntryGPIO_53">Device 53:</label>
        <input type="text" id="textEntryGPIO_53" value="GPIO 53">
        <div class="checkbox-container">
          <input type="checkbox" id="checkGPIO_53">
          <label for="checkGPIO_53">On/Off Switch</label>
        </div>   
        <label for="textEntryGPIO_55">Device 55:</label>
        <input type="text" id="textEntryGPIO_55" value="GPIO 55">
        <div class="checkbox-container">
          <input type="checkbox" id="checkGPIO_55">
          <label for="checkGPIO_55">On/Off Switch</label>
        </div>   
        <label for="textEntryGPIO_57">Device 57:</label>
        <input type="text" id="textEntryGPIO_57" value="GPIO 57">
        <div class="checkbox-container">
          <input type="checkbox" id="checkGPIO_57">
          <label for="checkGPIO_57">On/Off Switch</label>
        </div>   
        <label for="textEntryGPIO_59">Device 59:</label>
        <input type="text" id="textEntryGPIO_59" value="GPIO 59">
        <div class="checkbox-container">
          <input type="checkbox" id="checkGPIO_59">
          <label for="checkGPIO_59">On/Off Switch</label>
        </div>   
        <label for="textEntryGPIO_61">Device 61:</label>
        <input type="text" id="textEntryGPIO_61" value="GPIO 61">
        <div class="checkbox-container">
          <input type="checkbox" id="checkGPIO_61">
          <label for="checkGPIO_61">On/Off Switch</label>
        </div>   
        <label for="textEntryGPIO_63">Device 63:</label>
        <input type="text" id="textEntryGPIO_63" value="GPIO 63">
        <div class="checkbox-container">
          <input type="checkbox" id="checkGPIO_63">
          <label for="checkGPIO_63">On/Off Switch</label>
        </div>   
      </div>
      
      <!-- Column 2 -->
      <div class="flex-item">
        <label for="textEntryGPIO_50">Device 50:</label>
        <input type="text" id="textEntryGPIO_50" value="GPIO 50">
        <div class="checkbox-container">
          <input type="checkbox" id="checkGPIO_50">
          <label for="checkGPIO_50">On/Off Switch</label>
        </div>   
        <label for="textEntryGPIO_52">Device 52:</label>
        <input type="text" id="textEntryGPIO_52" value="GPIO 52">
        <div class="checkbox-container">
          <input type="checkbox" id="checkGPIO_52">
          <label for="checkGPIO_52">On/Off Switch</label>
        </div>   
        <label for="textEntryGPIO_54">Device 54:</label>
        <input type="text" id="textEntryGPIO_54" value="GPIO 54">
        <div class="checkbox-container">
          <input type="checkbox" id="checkGPIO_54">
          <label for="checkGPIO_54">On/Off Switch</label>
        </div>   
        <label for="textEntryGPIO_56">Device 56:</label>
        <input type="text" id="textEntryGPIO_56" value="GPIO 56">
        <div class="checkbox-container">
          <input type="checkbox" id="checkGPIO_56">
          <label for="checkGPIO_56">On/Off Switch</label>
        </div>   
        <label for="textEntryGPIO_58">Device 58:</label>
        <input type="text" id="textEntryGPIO_58" value="GPIO 58">
        <div class="checkbox-container">
          <input type="checkbox" id="checkGPIO_58">
          <label for="checkGPIO_58">On/Off Switch</label>
        </div>   
        <label for="textEntryGPIO_60">Device 60:</label>
        <input type="text" id="textEntryGPIO_60" value="GPIO 60">
        <div class="checkbox-container">
          <input type="checkbox" id="checkGPIO_60">
          <label for="checkGPIO_60">On/Off Switch</label>
        </div>   
        <label for="textEntryGPIO_62">Device 62:</label>
        <input type="text" id="textEntryGPIO_62" value="GPIO 62">
        <div class="checkbox-container">
          <input type="checkbox" id="checkGPIO_62">
          <label for="checkGPIO_62">On/Off Switch</label>
        </div>   
        <label for="textEntryGPIO_64">Device 64:</label>
        <input type="text" id="textEntryGPIO_64" value="GPIO 64">  
        <div class="checkbox-container">
          <input type="checkbox" id="checkGPIO_64">
          <label for="checkGPIO_64">On/Off Switch</label>
        </div>   
      </div>
    </div>  
  </div>      
</div>     
  <div>                                                                  
      <main>     
        <pre></pre>      
        <button id="downloadGuideButton">Download Flashing Guide</button>
        <pre></pre>
        <pre></pre>
        <button id="downloadButton">Download YAML File</button>                  
  </div>  
  </body>      
    <!-- Add your JavaScript code here if needed -->
    <script name="yamlmaker">
        const dropdown1 = document.getElementById('dropdown1');
        const dropdown2 = document.getElementById('dropdown2');
        const dropdown3 = document.getElementById('dropdown3');
        const dropdown4 = document.getElementById('dropdown4');  
        const dropdown5 = document.getElementById('dropdown5');
        const dropdown6 = document.getElementById('dropdown6');
        const dropdown7 = document.getElementById('dropdown7');
        const dropdown8 = document.getElementById('dropdown8');                
        const typeDropdown1 = document.getElementById('type1'); 
        const typeDropdown2 = document.getElementById('type2');
        const typeDropdown3 = document.getElementById('type3');
        const typeDropdown4 = document.getElementById('type4'); 
        const typeDropdown5 = document.getElementById('type5');
        const typeDropdown6 = document.getElementById('type6');
        const typeDropdown7 = document.getElementById('type7');
        const typeDropdown8 = document.getElementById('type8');        
        const dropdown16 = document.getElementById('dropdown16');        
        const subbDiv1 = document.querySelector('.subb');
        const subbDiv2 = document.querySelector('.subb2');
        const subbDiv3 = document.querySelector('.subb3');
        const subbDiv4 = document.querySelector('.subb4'); 
        const subbDiv5 = document.querySelector('.subb5');
        const subbDiv6 = document.querySelector('.subb6');
        const subbDiv7 = document.querySelector('.subb7');
        const subbDiv8 = document.querySelector('.subb8');  
        const subbDiv9 = document.querySelector('.subb9');    
        const subbDiv10 = document.querySelector('.subb10');
        const subbDiv11 = document.querySelector('.subb11');   
        const subbDiv12 = document.querySelector('.subb12');       
        const subbDiv13 = document.querySelector('.subb13');    
        const subbDiv14 = document.querySelector('.subb14');  
        const subbDiv15 = document.querySelector('.subb15');       
        const subbDiv16 = document.querySelector('.subb16'); 
        const subbDiv17 = document.querySelector('.subb17');       
        const subbDiv18 = document.querySelector('.subb18');                                                                                                
        const downloadButton = document.getElementById('downloadButton');  
        const checkbox1 = document.getElementById('checkGPIO_1');
        const checkbox2 = document.getElementById('checkGPIO_2');
        const checkbox3 = document.getElementById('checkGPIO_3');
        const checkbox4 = document.getElementById('checkGPIO_4');
        const checkbox5 = document.getElementById('checkGPIO_5');
        const checkbox6 = document.getElementById('checkGPIO_6');
        const checkbox7 = document.getElementById('checkGPIO_7');
        const checkbox8 = document.getElementById('checkGPIO_8');
        const checkbox9 = document.getElementById('checkGPIO_9');
        const checkbox10 = document.getElementById('checkGPIO_10');
        const checkbox11 = document.getElementById('checkGPIO_11');
        const checkbox12 = document.getElementById('checkGPIO_12');
        const checkbox13 = document.getElementById('checkGPIO_13');
        const checkbox14 = document.getElementById('checkGPIO_14');
        const checkbox15 = document.getElementById('checkGPIO_15');
        const checkbox16 = document.getElementById('checkGPIO_16');
        const checkbox17 = document.getElementById('checkGPIO_17');
        const checkbox18 = document.getElementById('checkGPIO_18');
        const checkbox19 = document.getElementById('checkGPIO_19');
        const checkbox20 = document.getElementById('checkGPIO_20');
        const checkbox21 = document.getElementById('checkGPIO_21');
        const checkbox22 = document.getElementById('checkGPIO_22');
        const checkbox23 = document.getElementById('checkGPIO_23');
        const checkbox24 = document.getElementById('checkGPIO_24');
        const checkbox25 = document.getElementById('checkGPIO_25');
        const checkbox26 = document.getElementById('checkGPIO_26');
        const checkbox27 = document.getElementById('checkGPIO_27');
        const checkbox28 = document.getElementById('checkGPIO_28');
        const checkbox29 = document.getElementById('checkGPIO_29');
        const checkbox30 = document.getElementById('checkGPIO_30');
        const checkbox31 = document.getElementById('checkGPIO_31');
        const checkbox32 = document.getElementById('checkGPIO_32');
        const checkbox33 = document.getElementById('checkGPIO_33');
        const checkbox34 = document.getElementById('checkGPIO_34');
        const checkbox35 = document.getElementById('checkGPIO_35');
        const checkbox36 = document.getElementById('checkGPIO_36');
        const checkbox37 = document.getElementById('checkGPIO_37');
        const checkbox38 = document.getElementById('checkGPIO_38');
        const checkbox39 = document.getElementById('checkGPIO_39');
        const checkbox40 = document.getElementById('checkGPIO_40');
        const checkbox41 = document.getElementById('checkGPIO_41');
        const checkbox42 = document.getElementById('checkGPIO_42');
        const checkbox43 = document.getElementById('checkGPIO_43');
        const checkbox44 = document.getElementById('checkGPIO_44');
        const checkbox45 = document.getElementById('checkGPIO_45');
        const checkbox46 = document.getElementById('checkGPIO_46');
        const checkbox47 = document.getElementById('checkGPIO_47');
        const checkbox48 = document.getElementById('checkGPIO_48');
        const checkbox49 = document.getElementById('checkGPIO_49');
        const checkbox50 = document.getElementById('checkGPIO_50');
        const checkbox51 = document.getElementById('checkGPIO_51');
        const checkbox52 = document.getElementById('checkGPIO_52');
        const checkbox53 = document.getElementById('checkGPIO_53');
        const checkbox54 = document.getElementById('checkGPIO_54');
        const checkbox55 = document.getElementById('checkGPIO_55');
        const checkbox56 = document.getElementById('checkGPIO_56');
        const checkbox57 = document.getElementById('checkGPIO_57');
        const checkbox58 = document.getElementById('checkGPIO_58');
        const checkbox59 = document.getElementById('checkGPIO_59');
        const checkbox60 = document.getElementById('checkGPIO_60');
        const checkbox61 = document.getElementById('checkGPIO_61');
        const checkbox62 = document.getElementById('checkGPIO_62');
        const checkbox63 = document.getElementById('checkGPIO_63');
        const checkbox64 = document.getElementById('checkGPIO_64');
        const checkbox65 = document.getElementById('checktrigger_1');                                    
        function updateSubbVisibility() {        

            // Show/hide the subbDiv1 based on the selected value of dropdown1
            subbDiv1.style.display = dropdown1.value === 'none' ? 'none' : 'block';
            subbDiv2.style.display = dropdown2.value === 'none' ? 'none' : 'block';
            subbDiv3.style.display = dropdown3.value === 'none' ? 'none' : 'block';
            subbDiv4.style.display = dropdown4.value === 'none' ? 'none' : 'block';  
            subbDiv5.style.display = dropdown5.value === 'none' ? 'none' : 'block';
            subbDiv6.style.display = dropdown6.value === 'none' ? 'none' : 'block';
            subbDiv7.style.display = dropdown7.value === 'none' ? 'none' : 'block';
            subbDiv8.style.display = dropdown8.value === 'none' ? 'none' : 'block'; 
            subbDiv9.style.display = dropdown16.value !== 'home_automation_system' ? 'None' : 'block';  
            subbDiv10.style.display = dropdown16.value === 'iha_blinds' ? 'block' : 'none'; 
            subbDiv11.style.display = dropdown16.value === 'wiegand_keypad' ? 'block' : 'none';  
            subbDiv12.style.display = (dropdown16.value === 'home_automation_system' && typeDropdown1.value === '16 GPIO Rack Card 1') ? 'block' : 'none';                                                  
            subbDiv13.style.display = (dropdown16.value === 'home_automation_system' && typeDropdown2.value === '16 GPIO Rack Card 2') ? 'block' : 'none';      
            subbDiv14.style.display = (dropdown16.value === 'home_automation_system' && typeDropdown3.value === '16 GPIO Rack Card 3') ? 'block' : 'none';  
            subbDiv15.style.display = (dropdown16.value === 'home_automation_system' && typeDropdown4.value === '16 GPIO Rack Card 4') ? 'block' : 'none';          
            subbDiv16.style.display = dropdown16.value === 'door_closer' ? 'block' : 'none';    
            subbDiv17.style.display = dropdown16.value === 'spool_winder' ? 'block' : 'none';    
            subbDiv18.style.display = dropdown16.value === 'thermostate' ? 'block' : 'none';                                                         
        }
        dropdown1.addEventListener('change', updateSubbVisibility);
        dropdown2.addEventListener('change', updateSubbVisibility);
        dropdown3.addEventListener('change', updateSubbVisibility);
        dropdown4.addEventListener('change', updateSubbVisibility);    
        dropdown5.addEventListener('change', updateSubbVisibility);
        dropdown6.addEventListener('change', updateSubbVisibility);
        dropdown7.addEventListener('change', updateSubbVisibility);
        dropdown8.addEventListener('change', updateSubbVisibility); 
        dropdown16.addEventListener('change', updateSubbVisibility);  
        typeDropdown1.addEventListener('change', updateSubbVisibility);  
        typeDropdown2.addEventListener('change', updateSubbVisibility);   
        typeDropdown3.addEventListener('change', updateSubbVisibility);  
        typeDropdown4.addEventListener('change', updateSubbVisibility); 
        typeDropdown5.addEventListener('change', updateSubbVisibility);  
        typeDropdown6.addEventListener('change', updateSubbVisibility);   
        typeDropdown7.addEventListener('change', updateSubbVisibility);  
        typeDropdown8.addEventListener('change', updateSubbVisibility);                                                   
        downloadButton.addEventListener('click', function () {
            // Get the selected values
            const selectedOptionValue1 = dropdown1.value;
            const selectedOptionValue2 = dropdown2.value;
            const selectedOptionValue3 = dropdown3.value;
            const selectedOptionValue4 = dropdown4.value; 
            const selectedOptionValue5 = dropdown5.value;
            const selectedOptionValue6 = dropdown6.value;
            const selectedOptionValue7 = dropdown7.value;
            const selectedOptionValue8 = dropdown8.value;  
            const selectedOptionValue9 = dropdown9.value;    
            const selectedOptionValue10 = dropdown10.value;    
            const selectedOptionValue11 = dropdown11.value;    
            const selectedOptionValue12 = dropdown12.value;   
            const selectedOptionValue13 = dropdown13.value;  
            const selectedOptionValue14 = dropdown14.value; 
            const selectedOptionValue15 = dropdown15.value;       
            const selectedOptionValue16 = dropdown16.value;                                                                                                                        
            const selectedTypeValue1 = typeDropdown1.value;
            const selectedTypeValue2 = typeDropdown2.value;
            const selectedTypeValue3 = typeDropdown3.value;
            const selectedTypeValue4 = typeDropdown4.value; 
            const selectedTypeValue5 = typeDropdown5.value;
            const selectedTypeValue6 = typeDropdown6.value;
            const selectedTypeValue7 = typeDropdown7.value;
            const selectedTypeValue8 = typeDropdown8.value;     
                                        

          
            // Get text entry values
            const textEntry1 = document.getElementById('textEntry1').value;
            const textEntry2 = document.getElementById('textEntry2').value;
            const textEntry3 = document.getElementById('textEntry3').value;
            const textEntry4 = document.getElementById('textEntry4').value;
            const textEntry5 = document.getElementById('textEntry5').value;
            const textEntry6 = document.getElementById('textEntry6').value;
            const textEntry7 = document.getElementById('textEntry7').value;
            const textEntry8 = document.getElementById('textEntry8').value;
            const textEntry9 = document.getElementById('textEntry9').value;
            const textEntry10 = document.getElementById('textEntry10').value;
            const textEntry11 = document.getElementById('textEntry11').value;
            const textEntry12 = document.getElementById('textEntry12').value;  
            const textEntry13 = document.getElementById('textEntry13').value;  
            const textEntry14 = document.getElementById('textEntry14').value;  
            const textEntry15 = document.getElementById('textEntry15').value;  
            const textEntry16 = document.getElementById('textEntry16').value;      
            const textEntry17 = document.getElementById('textEntry17').value;      
            const textEntry18 = document.getElementById('textEntry18').value;                        
            const textEntryGPIO1 = document.getElementById('textEntryGPIO_1').value;
            const textEntryGPIO2 = document.getElementById('textEntryGPIO_2').value;  
            const textEntryGPIO3 = document.getElementById('textEntryGPIO_3').value;  
            const textEntryGPIO4 = document.getElementById('textEntryGPIO_4').value; 
            const textEntryGPIO5 = document.getElementById('textEntryGPIO_5').value;
            const textEntryGPIO6 = document.getElementById('textEntryGPIO_6').value;  
            const textEntryGPIO7 = document.getElementById('textEntryGPIO_7').value;   
            const textEntryGPIO8 = document.getElementById('textEntryGPIO_8').value;    
            const textEntryGPIO9 = document.getElementById('textEntryGPIO_9').value;
            const textEntryGPIO10 = document.getElementById('textEntryGPIO_10').value;  
            const textEntryGPIO11 = document.getElementById('textEntryGPIO_11').value;  
            const textEntryGPIO12 = document.getElementById('textEntryGPIO_12').value; 
            const textEntryGPIO13 = document.getElementById('textEntryGPIO_13').value;
            const textEntryGPIO14 = document.getElementById('textEntryGPIO_14').value;  
            const textEntryGPIO15 = document.getElementById('textEntryGPIO_15').value;  
            const textEntryGPIO16 = document.getElementById('textEntryGPIO_16').value;                            
            const textEntryGPIO17 = document.getElementById('textEntryGPIO_17').value;
            const textEntryGPIO18 = document.getElementById('textEntryGPIO_18').value;  
            const textEntryGPIO19 = document.getElementById('textEntryGPIO_19').value;  
            const textEntryGPIO20 = document.getElementById('textEntryGPIO_20').value; 
            const textEntryGPIO21 = document.getElementById('textEntryGPIO_21').value;
            const textEntryGPIO22 = document.getElementById('textEntryGPIO_22').value;  
            const textEntryGPIO23 = document.getElementById('textEntryGPIO_23').value;  
            const textEntryGPIO24 = document.getElementById('textEntryGPIO_24').value;    
            const textEntryGPIO25 = document.getElementById('textEntryGPIO_25').value;
            const textEntryGPIO26 = document.getElementById('textEntryGPIO_26').value;  
            const textEntryGPIO27 = document.getElementById('textEntryGPIO_27').value;  
            const textEntryGPIO28 = document.getElementById('textEntryGPIO_28').value; 
            const textEntryGPIO29 = document.getElementById('textEntryGPIO_29').value;
            const textEntryGPIO30 = document.getElementById('textEntryGPIO_30').value;  
            const textEntryGPIO31 = document.getElementById('textEntryGPIO_31').value;  
            const textEntryGPIO32 = document.getElementById('textEntryGPIO_32').value;     
            const textEntryGPIO33 = document.getElementById('textEntryGPIO_33').value;
            const textEntryGPIO34 = document.getElementById('textEntryGPIO_34').value;  
            const textEntryGPIO35 = document.getElementById('textEntryGPIO_35').value;  
            const textEntryGPIO36 = document.getElementById('textEntryGPIO_36').value; 
            const textEntryGPIO37 = document.getElementById('textEntryGPIO_37').value;
            const textEntryGPIO38 = document.getElementById('textEntryGPIO_38').value;  
            const textEntryGPIO39 = document.getElementById('textEntryGPIO_39').value;  
            const textEntryGPIO40 = document.getElementById('textEntryGPIO_40').value;    
            const textEntryGPIO41 = document.getElementById('textEntryGPIO_41').value;
            const textEntryGPIO42 = document.getElementById('textEntryGPIO_42').value;  
            const textEntryGPIO43 = document.getElementById('textEntryGPIO_43').value;  
            const textEntryGPIO44 = document.getElementById('textEntryGPIO_44').value; 
            const textEntryGPIO45 = document.getElementById('textEntryGPIO_45').value;
            const textEntryGPIO46 = document.getElementById('textEntryGPIO_46').value;  
            const textEntryGPIO47 = document.getElementById('textEntryGPIO_47').value;  
            const textEntryGPIO48 = document.getElementById('textEntryGPIO_48').value;                            
            const textEntryGPIO49 = document.getElementById('textEntryGPIO_49').value;
            const textEntryGPIO50 = document.getElementById('textEntryGPIO_50').value;  
            const textEntryGPIO51 = document.getElementById('textEntryGPIO_51').value;  
            const textEntryGPIO52 = document.getElementById('textEntryGPIO_52').value; 
            const textEntryGPIO53 = document.getElementById('textEntryGPIO_53').value;
            const textEntryGPIO54 = document.getElementById('textEntryGPIO_54').value;  
            const textEntryGPIO55 = document.getElementById('textEntryGPIO_55').value;  
            const textEntryGPIO56 = document.getElementById('textEntryGPIO_56').value;    
            const textEntryGPIO57 = document.getElementById('textEntryGPIO_57').value;
            const textEntryGPIO58 = document.getElementById('textEntryGPIO_58').value;  
            const textEntryGPIO59 = document.getElementById('textEntryGPIO_59').value;  
            const textEntryGPIO60 = document.getElementById('textEntryGPIO_60').value; 
            const textEntryGPIO61 = document.getElementById('textEntryGPIO_61').value;
            const textEntryGPIO62 = document.getElementById('textEntryGPIO_62').value;  
            const textEntryGPIO63 = document.getElementById('textEntryGPIO_63').value;  
            const textEntryGPIO64 = document.getElementById('textEntryGPIO_64').value; 
        
            //updateSubbVisibility();                                             
            //  Create the YAML configuration string based on the selected type
            let yamlConfig = '';
            let additionalConfig = '';
            
            if (selectedOptionValue1 !== 'none' || selectedOptionValue2 !== 'none' || selectedOptionValue3 !== 'none' || selectedOptionValue4 !== 'none' || selectedOptionValue5 !== 'none' || selectedOptionValue6 !== 'none' || selectedOptionValue7 !== 'none' || selectedOptionValue8 !== 'none') {
                additionalConfig += `   
substitutions:           
                `;
            }  
            if (selectedTypeValue1 === '16 GPIO Rack Card 1' ) {
                additionalConfig += `
  gpio_rack_card_1_device_1: "${textEntryGPIO1}"
  gpio_rack_card_1_device_2: "${textEntryGPIO2}"
  gpio_rack_card_1_device_3: "${textEntryGPIO3}"
  gpio_rack_card_1_device_4: "${textEntryGPIO4}"
  gpio_rack_card_1_device_5: "${textEntryGPIO5}"
  gpio_rack_card_1_device_6: "${textEntryGPIO6}"
  gpio_rack_card_1_device_7: "${textEntryGPIO7}"
  gpio_rack_card_1_device_8: "${textEntryGPIO8}"
  gpio_rack_card_1_device_9: "${textEntryGPIO9}"
  gpio_rack_card_1_device_10: "${textEntryGPIO10}"
  gpio_rack_card_1_device_11: "${textEntryGPIO11}"
  gpio_rack_card_1_device_12: "${textEntryGPIO12}"
  gpio_rack_card_1_device_13: "${textEntryGPIO13}"
  gpio_rack_card_1_device_14: "${textEntryGPIO14}"
  gpio_rack_card_1_device_15: "${textEntryGPIO15}"
  gpio_rack_card_1_device_16: "${textEntryGPIO16}" 
            `;
            }            
            if (selectedTypeValue2 === '16 GPIO Rack Card 2') {
                additionalConfig += `
  gpio_rack_card_2_device_1: "${textEntryGPIO17}"
  gpio_rack_card_2_device_2: "${textEntryGPIO18}"
  gpio_rack_card_2_device_3: "${textEntryGPIO19}"
  gpio_rack_card_2_device_4: "${textEntryGPIO20}"
  gpio_rack_card_2_device_5: "${textEntryGPIO21}"
  gpio_rack_card_2_device_6: "${textEntryGPIO22}"
  gpio_rack_card_2_device_7: "${textEntryGPIO23}"
  gpio_rack_card_2_device_8: "${textEntryGPIO24}"
  gpio_rack_card_2_device_9: "${textEntryGPIO25}"
  gpio_rack_card_2_device_10: "${textEntryGPIO26}"
  gpio_rack_card_2_device_11: "${textEntryGPIO27}"
  gpio_rack_card_2_device_12: "${textEntryGPIO28}"
  gpio_rack_card_2_device_13: "${textEntryGPIO29}"
  gpio_rack_card_2_device_14: "${textEntryGPIO30}"
  gpio_rack_card_2_device_15: "${textEntryGPIO31}"
  gpio_rack_card_2_device_16: "${textEntryGPIO32}"  
            `;            
            }
            if (selectedTypeValue3 === '16 GPIO Rack Card 3') {
                additionalConfig += `
  gpio_rack_card_3_device_1: "${textEntryGPIO33}"
  gpio_rack_card_3_device_2: "${textEntryGPIO34}"
  gpio_rack_card_3_device_3: "${textEntryGPIO35}"
  gpio_rack_card_3_device_4: "${textEntryGPIO36}"
  gpio_rack_card_3_device_5: "${textEntryGPIO37}"
  gpio_rack_card_3_device_6: "${textEntryGPIO38}"
  gpio_rack_card_3_device_7: "${textEntryGPIO39}"
  gpio_rack_card_3_device_8: "${textEntryGPIO40}"
  gpio_rack_card_3_device_9: "${textEntryGPIO41}"
  gpio_rack_card_3_device_10: "${textEntryGPIO42}"
  gpio_rack_card_3_device_11: "${textEntryGPIO43}"
  gpio_rack_card_3_device_12: "${textEntryGPIO44}"
  gpio_rack_card_3_device_13: "${textEntryGPIO45}"
  gpio_rack_card_3_device_14: "${textEntryGPIO46}"
  gpio_rack_card_3_device_15: "${textEntryGPIO47}"
  gpio_rack_card_3_device_16: "${textEntryGPIO48}"  
            `;            
            }            
            if (selectedTypeValue4 === '16 GPIO Rack Card 4') {
                additionalConfig += `
  gpio_rack_card_4_device_1: "${textEntryGPIO49}"
  gpio_rack_card_4_device_2: "${textEntryGPIO50}"
  gpio_rack_card_4_device_3: "${textEntryGPIO51}"
  gpio_rack_card_4_device_4: "${textEntryGPIO52}"
  gpio_rack_card_4_device_5: "${textEntryGPIO53}"
  gpio_rack_card_4_device_6: "${textEntryGPIO54}"
  gpio_rack_card_4_device_7: "${textEntryGPIO55}"
  gpio_rack_card_4_device_8: "${textEntryGPIO56}"
  gpio_rack_card_4_device_9: "${textEntryGPIO57}"
  gpio_rack_card_4_device_10: "${textEntryGPIO58}"
  gpio_rack_card_4_device_11: "${textEntryGPIO59}"
  gpio_rack_card_4_device_12: "${textEntryGPIO60}"
  gpio_rack_card_4_device_13: "${textEntryGPIO61}"
  gpio_rack_card_4_device_14: "${textEntryGPIO62}"
  gpio_rack_card_4_device_15: "${textEntryGPIO63}"
  gpio_rack_card_4_device_16: "${textEntryGPIO64}"  
            `;            
            }
            if (selectedTypeValue1 === '8 Port Relay Board 1' || selectedTypeValue2 === '8 Port Relay Board 1' || selectedTypeValue3 === '8 Port Relay Board 1' || selectedTypeValue4 === '8 Port Relay Board 1' || selectedTypeValue5 === '8 Port Relay Board 1' || selectedTypeValue6 === '8 Port Relay Board 1' || selectedTypeValue7 === '8 Port Relay Board 1' || selectedTypeValue8 === '8 Port Relay Board 1') {
                additionalConfig += `                
  node_8_relay_board_1_device_1: "Relay 1"
  node_8_relay_board_1_device_2: "Relay 2"
  node_8_relay_board_1_device_3: "Relay 3"
  node_8_relay_board_1_device_4: "Relay 4"
  node_8_relay_board_1_device_5: "Relay 5"
  node_8_relay_board_1_device_6: "Relay 6"
  node_8_relay_board_1_device_7: "Relay 7"
  node_8_relay_board_1_device_8: "Relay 8"  
            `;            
            } 
            if (selectedTypeValue1 === '8 Port Relay Board 2' || selectedTypeValue2 === '8 Port Relay Board 2' || selectedTypeValue3 === '8 Port Relay Board 2' || selectedTypeValue4 === '8 Port Relay Board 2' || selectedTypeValue5 === '8 Port Relay Board 2' || selectedTypeValue5 === '8 Port Relay Board 2' || selectedTypeValue7 === '8 Port Relay Board 2' || selectedTypeValue8 === '8 Port Relay Board 2') {
                additionalConfig += `                
  node_8_relay_board_1_device_1: "Relay 9"
  node_8_relay_board_1_device_2: "Relay 10"
  node_8_relay_board_1_device_3: "Relay 11"
  node_8_relay_board_1_device_4: "Relay 12"
  node_8_relay_board_1_device_5: "Relay 13"
  node_8_relay_board_1_device_6: "Relay 14"
  node_8_relay_board_1_device_7: "Relay 15"
  node_8_relay_board_1_device_8: "Relay 16"  
            `;            
            }   
            if (selectedTypeValue1 === '8 Port Relay Board 3' || selectedTypeValue2 === '8 Port Relay Board 3' || selectedTypeValue3 === '8 Port Relay Board 3' || selectedTypeValue4 === '8 Port Relay Board 3' || selectedTypeValue5 === '8 Port Relay Board 3' || selectedTypeValue5 === '8 Port Relay Board 3' || selectedTypeValue7 === '8 Port Relay Board 3' || selectedTypeValue8 === '8 Port Relay Board 3') {
                additionalConfig += `                
  node_8_relay_board_1_device_1: "Relay 17"
  node_8_relay_board_1_device_2: "Relay 18"
  node_8_relay_board_1_device_3: "Relay 19"
  node_8_relay_board_1_device_4: "Relay 20"
  node_8_relay_board_1_device_5: "Relay 21"
  node_8_relay_board_1_device_6: "Relay 22"
  node_8_relay_board_1_device_7: "Relay 23"
  node_8_relay_board_1_device_8: "Relay 24"  
            `;            
            }
            if (selectedTypeValue1 === '8 Port Relay Board 4' || selectedTypeValue2 === '8 Port Relay Board 4' || selectedTypeValue3 === '8 Port Relay Board 4' || selectedTypeValue4 === '8 Port Relay Board 4' || selectedTypeValue5 === '8 Port Relay Board 4' || selectedTypeValue5 === '8 Port Relay Board 4' || selectedTypeValue7 === '8 Port Relay Board 4' || selectedTypeValue8 === '8 Port Relay Board 4') {
                additionalConfig += `                
  node_8_relay_board_1_device_1: "Relay 25"
  node_8_relay_board_1_device_2: "Relay 26"
  node_8_relay_board_1_device_3: "Relay 27"
  node_8_relay_board_1_device_4: "Relay 28"
  node_8_relay_board_1_device_5: "Relay 29"
  node_8_relay_board_1_device_6: "Relay 30"
  node_8_relay_board_1_device_7: "Relay 31"
  node_8_relay_board_1_device_8: "Relay 32"  
            `;   
            }                        
            if (selectedOptionValue1 !== 'none' || selectedOptionValue2 !== 'none' || selectedOptionValue3 !== 'none' || selectedOptionValue4 !== 'none' || selectedOptionValue5 !== 'none' || selectedOptionValue6 !== 'none' || selectedOptionValue7 !== 'none' || selectedOptionValue8 !== 'none') {
                additionalConfig += `   
mcp23017:           
            `;
            }  
            if (selectedTypeValue1 === '16 GPIO Rack Card 1' ) {
                additionalConfig += `
  - id: 'mcp23017_hub_16_gpio_rack_card_1'
    address: ${selectedOptionValue1} 
            `;
            }    
            if (selectedTypeValue2 === '16 GPIO Rack Card 2' ) {
                additionalConfig += `
  - id: 'mcp23017_hub_16_gpio_rack_card_2'
    address: ${selectedOptionValue2} 
            `;
            }       
            if (selectedTypeValue3 === '16 GPIO Rack Card 3' ) {
                additionalConfig += `
  - id: 'mcp23017_hub_16_gpio_rack_card_3'
    address: ${selectedOptionValue3} 
            `;
            }  
            if (selectedTypeValue4 === '16 GPIO Rack Card 4' ) {
                additionalConfig += `
  - id: 'mcp23017_hub_16_gpio_rack_card_4'
    address: ${selectedOptionValue4} 
            `;
            }        
            if (selectedTypeValue1 === 'Button Controller' ) {
                additionalConfig += `
  - id: 'mcp23017_hub_8_button_keypad'
    address: ${selectedOptionValue1} 
            `;
            }  
            if (selectedTypeValue2 === 'Button Controller' ) {
                additionalConfig += `
  - id: 'mcp23017_hub_8_button_keypad'
    address: ${selectedOptionValue2} 
            `;
            }                            
            if (selectedTypeValue3 === 'Button Controller' ) {
                additionalConfig += `
  - id: 'mcp23017_hub_8_button_keypad'
    address: ${selectedOptionValue3} 
            `;
            }  
            if (selectedTypeValue4 === 'Button Controller' ) {
                additionalConfig += `
  - id: 'mcp23017_hub_8_button_keypad'
    address: ${selectedOptionValue4} 
            `;
            }  
            if (selectedTypeValue5 === 'Button Controller' ) {
                additionalConfig += `
  - id: 'mcp23017_hub_8_button_keypad'
    address: ${selectedOptionValue5} 
            `;
            }                
            if (selectedTypeValue6 === 'Button Controller' ) {
                additionalConfig += `
  - id: 'mcp23017_hub_8_button_keypad'
    address: ${selectedOptionValue6} 
            `;
            }              
            if (selectedTypeValue7 === 'Button Controller' ) {
                additionalConfig += `
  - id: 'mcp23017_hub_8_button_keypad'
    address: ${selectedOptionValue7} 
            `;
            }  
            if (selectedTypeValue8 === 'Button Controller' ) {
                additionalConfig += `
  - id: 'mcp23017_hub_8_button_keypad'
    address: ${selectedOptionValue8} 
            `;
            }               
            if (selectedTypeValue1 === '8 Port Relay Board 1' ) {
                additionalConfig += `
  - id: 'mcp23017_hub_8_relay_board_1'
    address: ${selectedOptionValue1} 
            `;
            }  
            if (selectedTypeValue2 === '8 Port Relay Board 1' ) {
                additionalConfig += `
  - id: 'mcp23017_hub_8_relay_board_1'
    address: ${selectedOptionValue2} 
            `;
            }       
            if (selectedTypeValue3 === '8 Port Relay Board 1' ) {
                additionalConfig += `
  - id: 'mcp23017_hub_8_relay_board_1'
    address: ${selectedOptionValue3} 
            `;
            }        
            if (selectedTypeValue4 === '8 Port Relay Board 1' ) {
                additionalConfig += `
  - id: 'mcp23017_hub_8_relay_board_1'
    address: ${selectedOptionValue4} 
            `;
            }   
            if (selectedTypeValue5 === '8 Port Relay Board 1' ) {
                additionalConfig += `
  - id: 'mcp23017_hub_8_relay_board_1'
    address: ${selectedOptionValue5} 
            `;
            }  
            if (selectedTypeValue6 === '8 Port Relay Board 1' ) {
                additionalConfig += `
  - id: 'mcp23017_hub_8_relay_board_1'
    address: ${selectedOptionValue6} 
            `;
            }       
            if (selectedTypeValue7 === '8 Port Relay Board 1' ) {
                additionalConfig += `
  - id: 'mcp23017_hub_8_relay_board_1'
    address: ${selectedOptionValue7} 
            `;
            }        
            if (selectedTypeValue8 === '8 Port Relay Board 1' ) {
                additionalConfig += `
  - id: 'mcp23017_hub_8_relay_board_1'
    address: ${selectedOptionValue8} 
            `;
            }        
            if (selectedTypeValue1 === '8 Port Relay Board 2' ) {
                additionalConfig += `
  - id: 'mcp23017_hub_8_relay_board_2'
    address: ${selectedOptionValue1} 
            `;
            }  
            if (selectedTypeValue2 === '8 Port Relay Board 2' ) {
                additionalConfig += `
  - id: 'mcp23017_hub_8_relay_board_2'
    address: ${selectedOptionValue2} 
            `;
            }       
            if (selectedTypeValue3 === '8 Port Relay Board 2' ) {
                additionalConfig += `
  - id: 'mcp23017_hub_8_relay_board_2'
    address: ${selectedOptionValue3} 
            `;
            }        
            if (selectedTypeValue4 === '8 Port Relay Board 2' ) {
                additionalConfig += `
  - id: 'mcp23017_hub_8_relay_board_2'
    address: ${selectedOptionValue4} 
            `;
            }   
            if (selectedTypeValue5 === '8 Port Relay Board 2' ) {
                additionalConfig += `
  - id: 'mcp23017_hub_8_relay_board_2'
    address: ${selectedOptionValue5} 
            `;
            }  
            if (selectedTypeValue6 === '8 Port Relay Board 2' ) {
                additionalConfig += `
  - id: 'mcp23017_hub_8_relay_board_2'
    address: ${selectedOptionValue6} 
            `;
            }       
            if (selectedTypeValue7 === '8 Port Relay Board 2' ) {
                additionalConfig += `
  - id: 'mcp23017_hub_8_relay_board_2'
    address: ${selectedOptionValue7} 
            `;
            }        
            if (selectedTypeValue8 === '8 Port Relay Board 2' ) {
                additionalConfig += `
  - id: 'mcp23017_hub_8_relay_board_2'
    address: ${selectedOptionValue8} 
            `;
            }   
            if (selectedTypeValue1 === '8 Port Relay Board 3' ) {
                additionalConfig += `
  - id: 'mcp23017_hub_8_relay_board_3'
    address: ${selectedOptionValue1} 
            `;
            }  
            if (selectedTypeValue2 === '8 Port Relay Board 3' ) {
                additionalConfig += `
  - id: 'mcp23017_hub_8_relay_board_3'
    address: ${selectedOptionValue2} 
            `;
            }       
            if (selectedTypeValue3 === '8 Port Relay Board 3' ) {
                additionalConfig += `
  - id: 'mcp23017_hub_8_relay_board_3'
    address: ${selectedOptionValue3} 
            `;
            }        
            if (selectedTypeValue4 === '8 Port Relay Board 3' ) {
                additionalConfig += `
  - id: 'mcp23017_hub_8_relay_board_3'
    address: ${selectedOptionValue4} 
            `;
            }   
            if (selectedTypeValue5 === '8 Port Relay Board 3' ) {
                additionalConfig += `
  - id: 'mcp23017_hub_8_relay_board_3'
    address: ${selectedOptionValue5} 
            `;
            }  
            if (selectedTypeValue6 === '8 Port Relay Board 3' ) {
                additionalConfig += `
  - id: 'mcp23017_hub_8_relay_board_3'
    address: ${selectedOptionValue6} 
            `;
            }       
            if (selectedTypeValue7 === '8 Port Relay Board 3' ) {
                additionalConfig += `
  - id: 'mcp23017_hub_8_relay_board_3'
    address: ${selectedOptionValue7} 
            `;
            }        
            if (selectedTypeValue8 === '8 Port Relay Board 3' ) {
                additionalConfig += `
  - id: 'mcp23017_hub_8_relay_board_3'
    address: ${selectedOptionValue8} 
            `;
            }        
            if (selectedTypeValue1 === '8 Port Relay Board 4' ) {
                additionalConfig += `
  - id: 'mcp23017_hub_8_relay_board_4'
    address: ${selectedOptionValue1} 
            `;
            }  
            if (selectedTypeValue2 === '8 Port Relay Board 4' ) {
                additionalConfig += `
  - id: 'mcp23017_hub_8_relay_board_4'
    address: ${selectedOptionValue2} 
            `;
            }       
            if (selectedTypeValue3 === '8 Port Relay Board 4' ) {
                additionalConfig += `
  - id: 'mcp23017_hub_8_relay_board_4'
    address: ${selectedOptionValue3} 
            `;
            }        
            if (selectedTypeValue4 === '8 Port Relay Board 4' ) {
                additionalConfig += `
  - id: 'mcp23017_hub_8_relay_board_4'
    address: ${selectedOptionValue4} 
            `;
            }   
            if (selectedTypeValue5 === '8 Port Relay Board 4' ) {
                additionalConfig += `
  - id: 'mcp23017_hub_8_relay_board_4'
    address: ${selectedOptionValue5} 
            `;
            }  
            if (selectedTypeValue6 === '8 Port Relay Board 4' ) {
                additionalConfig += `
  - id: 'mcp23017_hub_8_relay_board_4'
    address: ${selectedOptionValue6} 
            `;
            }       
            if (selectedTypeValue7 === '8 Port Relay Board 4' ) {
                additionalConfig += `
  - id: 'mcp23017_hub_8_relay_board_4'
    address: ${selectedOptionValue7} 
            `;
            }        
            if (selectedTypeValue8 === '8 Port Relay Board 4' ) {
                additionalConfig += `
  - id: 'mcp23017_hub_8_relay_board_4'
    address: ${selectedOptionValue8} 
            `;
            }                                                                                                       
            if (selectedOptionValue16 === 'home_automation_system' ) {
                additionalConfig += `   
esphome:
  name: ${textEntry1}
  #friendly_name: ${textEntry5}  
  on_boot:
       - delay: 1s           
                `;
            }
       if (selectedOptionValue11 === 'Enabled' || selectedOptionValue1 === '16 GPIO Rack Card 1' || selectedOptionValue2 === '16 GPIO Rack Card 2' || selectedOptionValue3 === '16 GPIO Rack Card 3' || selectedOptionValue4 === '16 GPIO Rack Card 4') {
                additionalConfig += `   
       - text_sensor.template.publish:
          id: last_name_pressed
          state: ""    
       - text_sensor.template.publish:
          id: last_state_pressed
          state: "" 
          `;
            }                                       
                if (selectedTypeValue1 === '16 GPIO Rack Card 1') {
                additionalConfig += `            
       - lambda: |-
          if (id(set_all_devices_to_no) == 0) {
            id(set_all_devices_to_no) = 1;
            id(device_1_set_1_16) = 1;
            id(device_2_set_1_16) = 1;
            id(device_3_set_1_16) = 1;
            id(device_4_set_1_16) = 1;
            id(device_5_set_1_16) = 1;
            id(device_6_set_1_16) = 1;
            id(device_7_set_1_16) = 1;
            id(device_8_set_1_16) = 1;
            id(device_9_set_1_16) = 1;
            id(device_10_set_1_16) = 1;
            id(device_11_set_1_16) = 1;
            id(device_12_set_1_16) = 1;
            id(device_13_set_1_16) = 1;
            id(device_14_set_1_16) = 1;
            id(device_15_set_1_16) = 1;
            id(device_16_set_1_16) = 1;
            `;
            }        
            if (selectedTypeValue2 === 'none' && selectedTypeValue1 === '16 GPIO Rack Card 1') {
                additionalConfig += `       
            }                       
                `;
            }                                                     
                if (selectedTypeValue2 === '16 GPIO Rack Card 2') {
                additionalConfig += `             
            id(device_1_set_17_32) = 1;
            id(device_2_set_17_32) = 1;
            id(device_3_set_17_32) = 1;
            id(device_4_set_17_32) = 1;
            id(device_5_set_17_32) = 1;
            id(device_6_set_17_32) = 1;
            id(device_7_set_17_32) = 1;
            id(device_8_set_17_32) = 1;
            id(device_9_set_17_32) = 1;
            id(device_10_set_17_32) = 1;
            id(device_11_set_17_32) = 1;
            id(device_12_set_17_32) = 1;
            id(device_13_set_17_32) = 1;
            id(device_14_set_17_32) = 1;
            id(device_15_set_17_32) = 1;
            id(device_16_set_17_32) = 1;  
            `;
            } 
            if (selectedTypeValue3 === 'none' && selectedTypeValue2 === '16 GPIO Rack Card 2') {
                additionalConfig += `       
            }                       
                `;
            }                                                        
                if (selectedTypeValue3 === '16 GPIO Rack Card 3') {
                additionalConfig += `              
            id(device_1_set_33_48) = 1;
            id(device_2_set_33_48) = 1;
            id(device_3_set_33_48) = 1;
            id(device_4_set_33_48) = 1;
            id(device_5_set_33_48) = 1;
            id(device_6_set_33_48) = 1;
            id(device_7_set_33_48) = 1;
            id(device_8_set_33_48) = 1;
            id(device_9_set_33_48) = 1;
            id(device_10_set_33_48) = 1;
            id(device_11_set_33_48) = 1;
            id(device_12_set_33_48) = 1;
            id(device_13_set_33_48) = 1;
            id(device_14_set_33_48) = 1;
            id(device_15_set_33_48) = 1;
            id(device_16_set_33_48) = 1; 
            `;
            }     
            if (selectedTypeValue4 === 'none' && selectedTypeValue3 === '16 GPIO Rack Card 3') {
                additionalConfig += `       
            }                       
                `;
            }                                                    
                if (selectedTypeValue4 === '16 GPIO Rack Card 4') {
                additionalConfig += `             
            id(device_1_set_49_64) = 1;
            id(device_2_set_49_64) = 1;
            id(device_3_set_49_64) = 1;
            id(device_4_set_49_64) = 1;
            id(device_5_set_49_64) = 1;
            id(device_6_set_49_64) = 1;
            id(device_7_set_49_64) = 1;
            id(device_8_set_49_64) = 1;
            id(device_9_set_49_64) = 1;
            id(device_10_set_49_64) = 1;
            id(device_11_set_49_64) = 1;
            id(device_12_set_49_64) = 1;
            id(device_13_set_49_64) = 1;
            id(device_14_set_49_64) = 1;
            id(device_15_set_49_64) = 1;
            id(device_16_set_49_64) = 1;                                                                                    
          }                       
                `;
            }       

    if (selectedOptionValue16 === 'home_automation_system' ) {
                additionalConfig += `   
esp32:
  board: esp-wrover-kit  
#  board: esp-wrover-kit
#  framework: 
#    type: esp-idf       
                `;
            }
    if (selectedOptionValue14 === 'Enabled' ) {
                additionalConfig += `   
web_server:
  port: 80
  auth:
    username: ${textEntry3}
    password: ${textEntry4}           
                `;
            }
            additionalConfig += `                          
ota:  
`; 
    if (selectedOptionValue13 === 'Enabled' ) {
                additionalConfig += `   
  password: ${textEntry2}             
                `;
            }
            if (selectedOptionValue16 === 'home_automation_system' ) {
                additionalConfig += `
ethernet:
  id: eth
  type: LAN8720
  mdc_pin: GPIO23
  mdio_pin: GPIO18
  clk_mode: GPIO0_IN
  phy_addr: 1
  power_pin: GPIO16          
                `;
            }
            additionalConfig += `               
api:
`; 
    if (selectedOptionValue15 === 'Enabled' ) {
                additionalConfig += `   
  encryption:
    key: "${textEntry6}"           
                `;
            }
            additionalConfig += `  
  reboot_timeout: 0s      
  `;
  if (selectedOptionValue16 === 'home_automation_system' ) {
                additionalConfig += `   
i2c:
  sda: 14
  scl: 15
  scan: true 
                `;
            }
    if (selectedOptionValue10 === 'Enabled' ) {
                additionalConfig += `   
display:
  - platform: ssd1306_i2c
    model: "SSD1306 128x64"
    address: 0x3C
    lambda: |-
            it.printf(it.get_width() / 2, 0, id(my_font_13b), id(my_green), TextAlign::CENTER_HORIZONTAL, "${textEntry5}"); 
            it.printf(it.get_width() / 2, 14, id(my_font_20b), id(my_blue), TextAlign::CENTER_HORIZONTAL," %s",id(last_name_pressed).state.c_str()); 
            it.printf(it.get_width() / 2, 24, id(my_font_20b), id(my_blue), TextAlign::CENTER_HORIZONTAL," %s",id(last_state_pressed).state.c_str());   
            it.print(0, 36, id(my_font_20b), id(my_white), "IP");                                                                    
            it.printf(it.get_width() / 2,36, id(my_font_20b), id(my_white), TextAlign::CENTER_HORIZONTAL, " %s",id(ipaddress).state.c_str());           
            it.printf(it.get_width() / 2, 48, id(my_font_13b), id(my_green), TextAlign::CENTER_HORIZONTAL, " %s",id(uptime_human).state.c_str());   



#if (id(system_status).state) {
#  it.print(55, 0, id(my_font_30b), id(my_green), "Online");
#}
#else {
#  it.print(55, -1, id(my_font_30b), id(my_yellow), "Offline");
#}                
color:
  - id: my_red
    red: 100%
    green: 0%
    blue: 0%
  - id: my_yellow
    red: 100%
    green: 100%
    blue: 0%
  - id: my_green
    red: 0%
    green: 100%
    blue: 0%
  - id: my_blue
    red: 0%
    green: 0%
    blue: 100%
  - id: my_gray
    red: 50%
    green: 50%
    blue: 50%   
  - id: my_white
    red: 100%
    green: 100%
    blue: 100%              
font:
  - file: "_fonts/refsan.ttf"
    id: my_font_30
    size: 30
  - file: "_fonts/refsan.ttf"
    id: my_font_20
    size: 20
  - file: "_fonts/refsan.ttf"
    id: my_font_13
    size: 13
  - file: "_fonts/refsan.ttf"
    id: my_font_15
    size: 15    
  - file: "_fonts/refsan.ttf"
    id: my_font_10
    size: 10   
  - file: "_fonts/refsan.ttf"
    id: my_font_30b
    size: 15
  - file: "_fonts/refsan.ttf"
    id: my_font_20b
    size: 10
  - file: "_fonts/refsan.ttf"
    id: my_font_13b
    size: 10  
  - file: "_fonts/refsan.ttf"
    id: my_font_15b
    size: 15    
  - file: "_fonts/refsan.ttf"
    id: my_font_10b
    size: 15 
                `;
              }              
    if (selectedOptionValue16 === 'home_automation_system' ) {
                additionalConfig += `   
text_sensor:
  - platform: template
    name: "Device IP"
    id: ipaddress
    entity_category: diagnostic
    icon: "mdi:ip-network"
    lambda: return { id(eth).get_ip_address().str() };
    update_interval: 5s  
    on_value:
     - if:
        condition:
          text_sensor.state:
            id: ipaddress
            state: '0.0.0.0'
            `;
            }   
            if (selectedOptionValue12 === 'Enabled' ) {
                additionalConfig += `             
        then: 
              - light.turn_on: 
                  id: statusledlight
                  green: 1.0
                  red: 1.0
                  blue: 0.0
                  brightness: 55%   
                  `;
              }              
    if (selectedOptionValue16 === 'home_automation_system' ) {
                additionalConfig += `                    
  - platform: template
    id: last_state_pressed    
    name: ${textEntry5} State
    icon: "mdi:state-machine"
  - platform: template
    id: last_name_pressed        
    name: ${textEntry5} Device    
    icon: "mdi:state-machine"     
                `;
            }   
            if (selectedOptionValue11 === 'Enabled' ) {
                additionalConfig += `   
  - platform: template
    id: uptime_human 
    name: Update    
    icon: mdi:clock-start              
                `;
            }                
    if (selectedOptionValue11 === 'Enabled' ) {
                additionalConfig += `   
sensor:
  - platform: uptime
    id: uptime_sensor
    update_interval: 10s
    on_raw_value:
      then:
        - text_sensor.template.publish:
            id: uptime_human
            state: !lambda |-
              int seconds = round(id(uptime_sensor).raw_state);
              int days = seconds / (24 * 3600);
              seconds = seconds % (24 * 3600);
              int hours = seconds / 3600;
              seconds = seconds % 3600;
              int minutes = seconds /  60;
              seconds = seconds % 60;
              return (
                (days ? to_string(days) + "d " : "") +
                (hours ? to_string(hours) + "h " : "") +
                (minutes ? to_string(minutes) + "m " : "") +
                (to_string(seconds) + "s")
              ).c_str();               
                `;
            }   
    if (selectedOptionValue12 === 'Enabled' ) {
                additionalConfig += `   
light:
  - platform: esp32_rmt_led_strip
    id: statusledlight
    name: "Status LED RGB"
    pin: 33
    num_leds: 1
    rmt_channel: 1
    rgb_order: GRB
    chipset: ws2812
    icon: "mdi:led-outline"
    max_refresh_rate: 500ms           
                `;
            }   

            if (selectedOptionValue16 === 'home_automation_system' ) {
                additionalConfig += `
switch:
  - platform: restart
    id: "restart_system"
  - platform: gpio
    pin: GPIO32
    name: Pico Buzzer
    inverted: no  
    id: buzzer
    icon: "mdi:surround-sound"
  - platform: gpio
    pin: GPIO04
    name: On Board Relay
    icon: "mdi:electric-switch"
    inverted: no  
    id: relay     
    `;
     }       
     if (checkbox.checked) {
            additionalConfig += `                
  - platform: gpio
    name: $gpio_rack_card_1_device_1 
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_1   
      number: 0
      inverted: False 
      `;
     }       
     if (checkbox65.checked) {
            additionalConfig += `       
  - platform: gpio
    name: $gpio_rack_card_1_device_1 
    id: switch_1
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_1   
      number: 0
      inverted: False 
    on_turn_on:
      - delay: 10ms
      - switch.turn_off: switch_1  
         `;              
            }   
            if (checkbox2.checked) {
            additionalConfig += `                
  - platform: gpio
    name: $gpio_rack_card_1_device_2
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_1
      number: 1        
      inverted: False     
                `;
            }    
            if (checkbox66.checked) {
            additionalConfig += `       
  - platform: gpio
    name: $gpio_rack_card_1_device_2
    id: switch_2
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_1   
      number: 1
      inverted: False 
    on_turn_on:
      - delay: 10ms
      - switch.turn_off: switch_1  
      `;              
            }             
            if (checkbox3.checked) {
            additionalConfig += `                
  - platform: gpio
    name: $gpio_rack_card_1_device_3
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_1
      number: 2
      inverted: False 
                `;
            }   
            if (checkbox67.checked) {
            additionalConfig += `       
  - platform: gpio
    name: $gpio_rack_card_1_device_3 
    id: switch_3
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_1   
      number: 2
      inverted: False 
    on_turn_on:
      - delay: 10ms
      - switch.turn_off: switch_3
      `;              
            }             
            if (checkbox4.checked) {
            additionalConfig += `                
  - platform: gpio
    name: $gpio_rack_card_1_device_4
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_1
      number: 3
      inverted: False 
                `;
            }   
            if (checkbox68.checked) {
            additionalConfig += `       
  - platform: gpio
    name: $gpio_rack_card_1_device_4 
    id: switch_4
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_1   
      number: 3
      inverted: False 
    on_turn_on:
      - delay: 10ms
      - switch.turn_off: switch_4
           `;              
            }             
            if (checkbox5.checked) {
            additionalConfig += `                
  - platform: gpio
    name: $gpio_rack_card_1_device_5
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_1
      number: 4       
      inverted: False     
                `;
            } 
            if (checkbox69.checked) {
            additionalConfig += `       
  - platform: gpio
    name: $gpio_rack_card_1_device_5
    id: switch_5
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_1   
      number: 4
      inverted: False 
    on_turn_on:
      - delay: 10ms
      - switch.turn_off: switch_5
          `;              
            }                
            if (checkbox6.checked) {
            additionalConfig += `                
  - platform: gpio
    name: $gpio_rack_card_1_device_6
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_1
      number: 5
      inverted: False 
                `;
            }       
            if (checkbox7.checked) {
            additionalConfig += `                
  - platform: gpio
    name: $gpio_rack_card_1_device_7
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_1
      number: 6
      inverted: False 
                `;
            }   
            if (checkbox8.checked) {
            additionalConfig += `                
  - platform: gpio
    name: $gpio_rack_card_1_device_8
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_1
      number: 7       
      inverted: False     
                `;
            }    
            if (checkbox9.checked) {
            additionalConfig += `                
  - platform: gpio
    name: $gpio_rack_card_1_device_9
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_1
      number: 8        
      inverted: False     
                `;
            }    
            if (checkbox10.checked) {
            additionalConfig += `                
  - platform: gpio
    name: $gpio_rack_card_1_device_10
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_1
      number: 9
      inverted: False 
                `;
            }   
            if (checkbox11.checked) {
            additionalConfig += `                
  - platform: gpio
    name: $gpio_rack_card_1_device_11
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_1
      number: 10
      inverted: False 
                `;
            }   
            if (checkbox12.checked) {
            additionalConfig += `                
  - platform: gpio
    name: $gpio_rack_card_1_device_12
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_1
      number: 11     
      inverted: False     
                `;
            }    
            if (checkbox13.checked) {
            additionalConfig += `                
  - platform: gpio
    name: $gpio_rack_card_1_device_13
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_1
      number: 12
      inverted: False 
                `;
            }       
            if (checkbox14.checked) {
            additionalConfig += `                
  - platform: gpio
    name: $gpio_rack_card_1_device_14
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_1
      number: 13
      inverted: False 
                `;
            }   
            if (checkbox15.checked) {
            additionalConfig += `                
  - platform: gpio
    name: $gpio_rack_card_1_device_15
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_1
      number: 14      
      inverted: False     
                `;
            }              
            if (checkbox16.checked) {
            additionalConfig += `                
  - platform: gpio
    name: $gpio_rack_card_1_device_16
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_1
      number: 15
      inverted: False 
                `;
            }      
            if (checkbox17.checked) {
            additionalConfig += `                
  - platform: gpio
    name: $gpio_rack_card_2_device_1 
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_2
      number: 0
      inverted: False 
                `;
            }   
            if (checkbox18.checked) {
            additionalConfig += `                
  - platform: gpio
    name: $gpio_rack_card_2_device_2
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_2
      number: 1        
      inverted: False     
                `;
            }    
            if (checkbox19.checked) {
            additionalConfig += `                
  - platform: gpio
    name: $gpio_rack_card_2_device_3
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_2
      number: 2
      inverted: False 
                `;
            }   
            if (checkbox20.checked) {
            additionalConfig += `                
  - platform: gpio
    name: $gpio_rack_card_2_device_4
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_2
      number: 3
      inverted: False 
                `;
            }   
            if (checkbox21.checked) {
            additionalConfig += `                
  - platform: gpio
    name: $gpio_rack_card_2_device_5
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_2
      number: 4       
      inverted: False     
                `;
            }    
            if (checkbox22.checked) {
            additionalConfig += `                
  - platform: gpio
    name: $gpio_rack_card_2_device_6
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_2
      number: 5
      inverted: False 
                `;
            }       
            if (checkbox23.checked) {
            additionalConfig += `                
  - platform: gpio
    name: $gpio_rack_card_2_device_7
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_2
      number: 6
      inverted: False 
                `;
            }   
            if (checkbox24.checked) {
            additionalConfig += `                
  - platform: gpio
    name: $gpio_rack_card_2_device_8
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_2
      number: 7       
      inverted: False     
                `;
            }    
            if (checkbox25.checked) {
            additionalConfig += `                
  - platform: gpio
    name: $gpio_rack_card_2_device_9
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_2
      number: 8        
      inverted: False     
                `;
            }    
            if (checkbox26.checked) {
            additionalConfig += `                
  - platform: gpio
    name: $gpio_rack_card_2_device_10
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_2
      number: 9
      inverted: False 
                `;
            }   
            if (checkbox27.checked) {
            additionalConfig += `                
  - platform: gpio
    name: $gpio_rack_card_2_device_11
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_2
      number: 10
      inverted: False 
                `;
            }   
            if (checkbox28.checked) {
            additionalConfig += `                
  - platform: gpio
    name: $gpio_rack_card_2_device_12
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_2
      number: 11     
      inverted: False     
                `;
            }    
            if (checkbox29.checked) {
            additionalConfig += `                
  - platform: gpio
    name: $gpio_rack_card_2_device_13
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_2
      number: 12
      inverted: False 
                `;
            }       
            if (checkbox30.checked) {
            additionalConfig += `                
  - platform: gpio
    name: $gpio_rack_card_2_device_14
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_2
      number: 13
      inverted: False 
                `;
            }   
            if (checkbox31.checked) {
            additionalConfig += `                
  - platform: gpio
    name: $gpio_rack_card_2_device_15
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_2
      number: 14      
      inverted: False     
                `;
            }              
            if (checkbox32.checked) {
            additionalConfig += `                
  - platform: gpio
    name: $gpio_rack_card_2_device_16
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_2
      number: 15
      inverted: False 
                `;
            }           
            if (checkbox33.checked) {
            additionalConfig += `                
  - platform: gpio
    name: $gpio_rack_card_3_device_1 
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_3
      number: 0
      inverted: False 
                `;
            }   
            if (checkbox34.checked) {
            additionalConfig += `                
  - platform: gpio
    name: $gpio_rack_card_3_device_2
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_3
      number: 1        
      inverted: False     
                `;
            }    
            if (checkbox35.checked) {
            additionalConfig += `                
  - platform: gpio
    name: $gpio_rack_card_3_device_3
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_3
      number: 2
      inverted: False 
                `;
            }   
            if (checkbox36.checked) {
            additionalConfig += `                
  - platform: gpio
    name: $gpio_rack_card_3_device_4
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_3
      number: 3
      inverted: False 
                `;
            }   
            if (checkbox37.checked) {
            additionalConfig += `                
  - platform: gpio
    name: $gpio_rack_card_3_device_5
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_3
      number: 4       
      inverted: False     
                `;
            }    
            if (checkbox38.checked) {
            additionalConfig += `                
  - platform: gpio
    name: $gpio_rack_card_3_device_6
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_3
      number: 5
      inverted: False 
                `;
            }       
            if (checkbox39.checked) {
            additionalConfig += `                
  - platform: gpio
    name: $gpio_rack_card_3_device_7
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_3
      number: 6
      inverted: False 
                `;
            }   
            if (checkbox40.checked) {
            additionalConfig += `                
  - platform: gpio
    name: $gpio_rack_card_3_device_8
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_3
      number: 7       
      inverted: False     
                `;
            }    

     
            if (checkbox41.checked) {
            additionalConfig += `                
  - platform: gpio
    name: $gpio_rack_card_3_device_9
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_3
      number: 8        
      inverted: False     
                `;
            }    
            if (checkbox42.checked) {
            additionalConfig += `                
  - platform: gpio
    name: $gpio_rack_card_3_device_10
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_3
      number: 9
      inverted: False 
                `;
            }   
            if (checkbox43.checked) {
            additionalConfig += `                
  - platform: gpio
    name: $gpio_rack_card_3_device_11
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_3
      number: 10
      inverted: False 
                `;
            }   
            if (checkbox44.checked) {
            additionalConfig += `                
  - platform: gpio
    name: $gpio_rack_card_3_device_12
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_3
      number: 11     
      inverted: False     
                `;
            }    
            if (checkbox45.checked) {
            additionalConfig += `                
  - platform: gpio
    name: $gpio_rack_card_3_device_13
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_3
      number: 12
      inverted: False 
                `;
            }       
            if (checkbox46.checked) {
            additionalConfig += `                
  - platform: gpio
    name: $gpio_rack_card_3_device_14
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_3
      number: 13
      inverted: False 
                `;
            }   
            if (checkbox47.checked) {
            additionalConfig += `                
  - platform: gpio
    name: $gpio_rack_card_3_device_15
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_3
      number: 14      
      inverted: False     
                `;
            }              
            if (checkbox48.checked) {
            additionalConfig += `                
  - platform: gpio
    name: $gpio_rack_card_3_device_16
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_3
      number: 15
      inverted: False 
                `;
            }   
            if (checkbox49.checked) {
            additionalConfig += `                
  - platform: gpio
    name: $gpio_rack_card_4_device_1 
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_4
      number: 0
      inverted: False 
                `;
            }   
            if (checkbox50.checked) {
            additionalConfig += `                
  - platform: gpio
    name: $gpio_rack_card_4_device_2
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_4
      number: 1        
      inverted: False     
                `;
            }    
            if (checkbox51.checked) {
            additionalConfig += `                
  - platform: gpio
    name: $gpio_rack_card_4_device_3
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_4
      number: 2
      inverted: False 
                `;
            }   
            if (checkbox52.checked) {
            additionalConfig += `                
  - platform: gpio
    name: $gpio_rack_card_4_device_4
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_4
      number: 3
      inverted: False 
                `;
            }   
            if (checkbox53.checked) {
            additionalConfig += `                
  - platform: gpio
    name: $gpio_rack_card_4_device_5
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_4
      number: 4       
      inverted: False     
                `;
            }    
            if (checkbox54.checked) {
            additionalConfig += `                
  - platform: gpio
    name: $gpio_rack_card_4_device_6
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_4
      number: 5
      inverted: False 
                `;
            }       
            if (checkbox55.checked) {
            additionalConfig += `                
  - platform: gpio
    name: $gpio_rack_card_4_device_7
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_4
      number: 6
      inverted: False 
                `;
            }   
            if (checkbox56.checked) {
            additionalConfig += `                
  - platform: gpio
    name: $gpio_rack_card_4_device_8
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_4
      number: 7       
      inverted: False     
                `;
            }    

     
            if (checkbox57.checked) {
            additionalConfig += `                
  - platform: gpio
    name: $gpio_rack_card_4_device_9
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_4
      number: 8        
      inverted: False     
                `;
            }    
            if (checkbox58.checked) {
            additionalConfig += `                
  - platform: gpio
    name: $gpio_rack_card_4_device_10
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_4
      number: 9
      inverted: False 
                `;
            }   
            if (checkbox59.checked) {
            additionalConfig += `                
  - platform: gpio
    name: $gpio_rack_card_4_device_11
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_4
      number: 10
      inverted: False 
                `;
            }   
            if (checkbox60.checked) {
            additionalConfig += `                
  - platform: gpio
    name: $gpio_rack_card_4_device_12
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_4
      number: 11     
      inverted: False     
                `;
            }    
            if (checkbox61.checked) {
            additionalConfig += `                
  - platform: gpio
    name: $gpio_rack_card_4_device_13
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_4
      number: 12
      inverted: False 
                `;
            }       
            if (checkbox62.checked) {
            additionalConfig += `                
  - platform: gpio
    name: $gpio_rack_card_4_device_14
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_4
      number: 13
      inverted: False 
                `;
            }   
            if (checkbox63.checked) {
            additionalConfig += `                
  - platform: gpio
    name: $gpio_rack_card_4_device_15
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_4
      number: 14      
      inverted: False     
                `;
            }              
            if (checkbox64.checked) {
            additionalConfig += `                
  - platform: gpio
    name: $gpio_rack_card_4_device_16
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_4
      number: 15
      inverted: False 
                `;
            }  

    if (typeDropdown1 === 'Button Controller' || typeDropdown2 === 'Button Controller' || typeDropdown3 === 'Button Controller' || typeDropdown4 === 'Button Controller' || typeDropdown5 === 'Button Controller' || typeDropdown6 === 'Button Controller' || typeDropdown7 === 'Button Controller' || typeDropdown8 === 'Button Controller') {
                additionalConfig += `   
  - platform: gpio
    name: Key Light 8
    id: key_light_8
    pin:
      mcp23xxx: mcp23017_hub_8_button_keypad
      number: 15
      mode:
       output: true
      inverted: false           
      
  - platform: gpio
    name: Key Light 7
    id: key_light_7
    pin:
      mcp23xxx: mcp23017_hub_8_button_keypad
      number: 14
      mode:
       output: true
      inverted: false          
      
  - platform: gpio
    name: Key Light 6
    id: key_light_6
    pin:
      mcp23xxx: mcp23017_hub_8_button_keypad
      number: 13
      mode:
       output: true
      inverted: false       
      
  - platform: gpio
    name: Key Light 5
    id: key_light_5
    pin:
      mcp23xxx: mcp23017_hub_8_button_keypad
      number: 12
      mode:
       output: true
      inverted: false         

  - platform: gpio
    name: Key Light 4
    id: key_light_4
    pin:
      mcp23xxx: mcp23017_hub_8_button_keypad
      number: 11
      mode:
       output: true
      inverted: false           
          
  - platform: gpio
    name: Key Light 3
    id: key_light_3
    pin:
      mcp23xxx: mcp23017_hub_8_button_keypad
      number: 10
      mode:
       output: true
      inverted: false  
       
      
  - platform: gpio
    name: Key Light 2
    id: key_light_2
    pin:
      mcp23xxx: mcp23017_hub_8_button_keypad
      number: 9
      mode:
       output: true
      inverted: false      

  - platform: gpio
    name: Key Light 1
    id: key_light_1
    pin:
      mcp23xxx: mcp23017_hub_8_button_keypad
      number: 8
      mode:
       output: true
      inverted: false          
                `;
            }     
    if (selectedOptionValue9 === 'Enabled' ) {
                additionalConfig += `   
logger:                
                `;
            }                     
//////////////////////////  BINARY SENSOR   //////////////////////                                                 
          if (selectedOptionValue16 === 'home_automation_system' ) {
                additionalConfig += `
binary_sensor:
  - platform: status
    id: system_status
    name: status    
                `;
            }          
    if (selectedOptionValue12 === 'Enabled' ) {
                additionalConfig += `    
    on_press:
          then:
            - light.turn_on: 
                id: statusledlight
                green: 1.0
                red: 0.0
                blue: 0.0
                brightness: 55%      
    on_release:
          then:           
            - light.turn_on: 
                id: statusledlight
                red: 1.0
                green: 0.0
                blue: 0.0
                brightness: 55%          
                `;
            }       
            if (typeDropdown1 === 'Button Controller' || typeDropdown2 === 'Button Controller' || typeDropdown3 === 'Button Controller' || typeDropdown4 === 'Button Controller' || typeDropdown5 === 'Button Controller' || typeDropdown6 === 'Button Controller' || typeDropdown7 === 'Button Controller' || typeDropdown8 === 'Button Controller') {
                additionalConfig += `   
  - platform: gpio
    name: Key 1
    pin:
      mcp23xxx: mcp23017_hub_8_button_keypad
      number: 0
      mode:
        input: True
        pullup: True          
      inverted: True
    on_press:
      then: 
        - switch.turn_on: key_light_1
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("Key 1");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:  
        - switch.turn_off: key_light_1      
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("Key 1");
            id(last_state_pressed).publish_state("OFF");  
      
  - platform: gpio
    name: Key 2
    pin:
      mcp23xxx: mcp23017_hub_8_button_keypad
      number: 1
      mode:
        input: True
        pullup: True    
      inverted: True
    on_press:
      then: 
        - switch.turn_on: key_light_2      
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("Key 2");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:  
        - switch.turn_off: key_light_2        
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("Key 2");
            id(last_state_pressed).publish_state("OFF");    
      
  - platform: gpio
    name: Key 3
    pin:
      mcp23xxx: mcp23017_hub_8_button_keypad
      number: 2
      mode:
        input: True
        pullup: True           
      inverted: True
    on_press:
      then: 
        - switch.turn_on: key_light_3       
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("Key 3");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:  
        - switch.turn_off: key_light_3 
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("Key 3");
            id(last_state_pressed).publish_state("OFF");          
      
  - platform: gpio
    name: Key 4
    pin:
      mcp23xxx: mcp23017_hub_8_button_keypad
      number: 3
      mode:
        input: True
        pullup: True         
      inverted: True   
    on_press:
      then: 
        - switch.turn_on: key_light_4
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("Key 4");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:  
        - switch.turn_off: key_light_4
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("Key 4");
            id(last_state_pressed).publish_state("OFF");                 

  - platform: gpio
    name: Key 5
    pin:
      mcp23xxx: mcp23017_hub_8_button_keypad
      number: 4
      mode:
        input: True
        pullup: True   
      inverted: True
    on_press:
      then: 
        - switch.turn_on: key_light_5
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("Key 5");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:  
        - switch.turn_off: key_light_5
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("Key 5");
            id(last_state_pressed).publish_state("OFF");       
          
  - platform: gpio
    name: Key 6
    pin:
      mcp23xxx: mcp23017_hub_8_button_keypad
      number: 5
      mode:
        input: True
        pullup: True        
      inverted: True
    on_press:
      then: 
        - switch.turn_on: key_light_6
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("Key 6");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:  
        - switch.turn_off: key_light_6
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("Key 6");
            id(last_state_pressed).publish_state("OFF");          
      
  - platform: gpio
    name: Key 7
    pin:
      mcp23xxx: mcp23017_hub_8_button_keypad
      number: 6
      mode:
        input: True
        pullup: True      
      inverted: True
    on_press:
      then: 
        - switch.turn_on: key_light_7
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("Key 7");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:  
        - switch.turn_off: key_light_7
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("Key 7");
            id(last_state_pressed).publish_state("OFF");  

  - platform: gpio
    name: Key 8
    pin:
      mcp23xxx: mcp23017_hub_8_button_keypad
      number: 7
      mode:
        input: True
        pullup: True           
      inverted: True
    on_press:
      then: 
        - switch.turn_on: key_light_8
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("Key 8");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:  
        - switch.turn_off: key_light_8
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("Key 8");
            id(last_state_pressed).publish_state("OFF");    
                `;
            }                                            
                if (!checkbox1.checked && selectedTypeValue1 === '16 GPIO Rack Card 1') {
            additionalConfig += `                  
  - platform: template
    name: $gpio_rack_card_1_device_1
    id: device_1_invert
    lambda: |-
      if ((id(rack_1_device).state == true && id(device_1_set_1_16) == 1) || 
          (id(rack_1_device).state == false && id(device_1_set_1_16) == 2))
      {
        return true;
      } else {
        return false;
      }
    on_press:
      then: 
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_1_device_1");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:   
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_1_device_1");
            id(last_state_pressed).publish_state("OFF");  
  - platform: gpio
    id: rack_1_device
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_1
      number: 0
      mode:
        input: True
        pullup: True          
      inverted: True
      `;
            }                                                    
                if (!checkbox2.checked && selectedTypeValue1 === '16 GPIO Rack Card 1') {
            additionalConfig += `         
  #########################################################################
  - platform: template
    name: $gpio_rack_card_1_device_2
    id: device_2_invert
    lambda: |-
      if ((id(rack_2_device).state == true && id(device_2_set_1_16) == 1) || 
          (id(rack_2_device).state == false && id(device_2_set_1_16) == 2))
      {
        return true;
      } else {
        return false;
      }
    on_press:
      then:   
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_1_device_2");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:       
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_1_device_2");
            id(last_state_pressed).publish_state("OFF");          
  - platform: gpio
    id: rack_2_device
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_1
      number: 1
      mode:
        input: True
        pullup: True    
      inverted: True
      `;
            }                                            
                if (!checkbox3.checked && selectedTypeValue1 === '16 GPIO Rack Card 1') {
            additionalConfig += `         
  #########################################################################
  - platform: template
    name: $gpio_rack_card_1_device_3
    id: device_3_invert
    lambda: |-
      if ((id(rack_3_device).state == true && id(device_3_set_1_16) == 1) || 
          (id(rack_3_device).state == false && id(device_3_set_1_16) == 2))
      {
        return true;
      } else {
        return false;
      }      
    on_press:
      then:    
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_1_device_3");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:  
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_1_device_3");
            id(last_state_pressed).publish_state("OFF");          

  - platform: gpio
    id: rack_3_device
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_1
      number: 2
      mode:
        input: True
        pullup: True           
      inverted: True
      `;
            }                                            
                if (!checkbox4.checked && selectedTypeValue1 === '16 GPIO Rack Card 1') {
            additionalConfig += `         
  #########################################################################
  - platform: template
    name: $gpio_rack_card_1_device_4
    id: device_4_invert
    lambda: |-
      if ((id(rack_4_device).state == true && id(device_4_set_1_16) == 1) || 
          (id(rack_4_device).state == false && id(device_4_set_1_16) == 2))
      {
        return true;
      } else {
        return false;
      }   
    on_press:
      then: 
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_1_device_4");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:  
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_1_device_4");
            id(last_state_pressed).publish_state("OFF");              
  - platform: gpio
    id: rack_4_device
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_1
      number: 3
      mode:
        input: True
        pullup: True         
      inverted: True   
      `;
            }                                            
                if (!checkbox5.checked && selectedTypeValue1 === '16 GPIO Rack Card 1') {
            additionalConfig += `                   
  #########################################################################
  - platform: template
    name: $gpio_rack_card_1_device_5
    id: device_5_invert
    lambda: |-
      if ((id(rack_5_device).state == true && id(device_5_set_1_16) == 1) || 
          (id(rack_5_device).state == false && id(device_5_set_1_16) == 2))
      {
        return true;
      } else {
        return false;
      } 
    on_press:
      then: 
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_1_device_5");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:  
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_1_device_5");
            id(last_state_pressed).publish_state("OFF");           
  - platform: gpio
    id: rack_5_device
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_1
      number: 4
      mode:
        input: True
        pullup: True   
      inverted: True
      `;
            }                                            
                if (!checkbox6.checked && selectedTypeValue1 === '16 GPIO Rack Card 1') {
            additionalConfig += `         
  #########################################################################
  - platform: template
    name: $gpio_rack_card_1_device_6
    id: device_6_invert
    lambda: |-
      if ((id(rack_6_device).state == true && id(device_6_set_1_16) == 1) || 
          (id(rack_6_device).state == false && id(device_6_set_1_16) == 2))
      {
        return true;
      } else {
        return false;
      }  
    on_press:
      then: 
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_1_device_6");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:  
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_1_device_6");
            id(last_state_pressed).publish_state("OFF");                 
  - platform: gpio
    id: rack_6_device
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_1
      number: 5
      mode:
        input: True
        pullup: True        
      inverted: True
      `;
            }                                            
                if (!checkbox7.checked && selectedTypeValue1 === '16 GPIO Rack Card 1') {
            additionalConfig += `           
  #########################################################################
  - platform: template
    name: $gpio_rack_card_1_device_7
    id: device_7_invert
    lambda: |-
      if ((id(rack_7_device).state == true && id(device_7_set_1_16) == 1) || 
          (id(rack_7_device).state == false && id(device_7_set_1_16) == 2))
      {
        return true;
      } else {
        return false;
      }    
    on_press:
      then: 
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_1_device_7");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:  
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_1_device_7");
            id(last_state_pressed).publish_state("OFF");             
  - platform: gpio
    id: rack_7_device
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_1
      number: 6
      mode:
        input: True
        pullup: True      
      inverted: True
      `;
            }                                            
                if (!checkbox8.checked && selectedTypeValue1 === '16 GPIO Rack Card 1') {
            additionalConfig += `   
  #########################################################################
  - platform: template
    name: $gpio_rack_card_1_device_8
    id: device_8_invert
    lambda: |-
      if ((id(rack_8_device).state == true && id(device_8_set_1_16) == 1) || 
          (id(rack_8_device).state == false && id(device_8_set_1_16) == 2))
      {
        return true;
      } else {
        return false;
      }    
    on_press:
      then: 
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_1_device_8");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:  
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_1_device_8");
            id(last_state_pressed).publish_state("OFF");        
  - platform: gpio
    id: rack_8_device
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_1
      number: 7
      mode:
        input: True
        pullup: True           
      inverted: True
      `;
            }                                            
                if (!checkbox9.checked && selectedTypeValue1 === '16 GPIO Rack Card 1') {
            additionalConfig += `      
  - platform: template
    name: $gpio_rack_card_1_device_9
    id: device_9_invert
    lambda: |-
      if ((id(rack_9_device).state == true && id(device_9_set_1_16) == 1) || 
          (id(rack_9_device).state == false && id(device_9_set_1_16) == 2))
      {
        return true;
      } else {
        return false;
      }
    on_press:
      then: 
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_1_device_9");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:   
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_1_device_9");
            id(last_state_pressed).publish_state("OFF");  
  - platform: gpio
    id: rack_9_device
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_1
      number: 8
      mode:
        input: True
        pullup: True          
      inverted: True
      `;
            }                                            
                if (!checkbox10.checked && selectedTypeValue1 === '16 GPIO Rack Card 1') {
            additionalConfig += `   
  #########################################################################
  - platform: template
    name: $gpio_rack_card_1_device_10
    id: device_10_invert
    lambda: |-
      if ((id(rack_10_device).state == true && id(device_10_set_1_16) == 1) || 
          (id(rack_10_device).state == false && id(device_10_set_1_16) == 2))
      {
        return true;
      } else {
        return false;
      }
    on_press:
      then:   
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_1_device_10");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:       
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_1_device_10");
            id(last_state_pressed).publish_state("OFF");    
      
  - platform: gpio
    id: rack_10_device
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_1
      number: 9
      mode:
        input: True
        pullup: True    
      inverted: True
      `;
            }                                            
                if (!checkbox11.checked && selectedTypeValue1 === '16 GPIO Rack Card 1') {
            additionalConfig += `   
  #########################################################################
  - platform: template
    name: $gpio_rack_card_1_device_11
    id: device_11_invert
    lambda: |-
      if ((id(rack_11_device).state == true && id(device_11_set_1_16) == 1) || 
          (id(rack_11_device).state == false && id(device_11_set_1_16) == 2))
      {
        return true;
      } else {
        return false;
      }    
    on_press:
      then:    
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_1_device_11");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:  
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_1_device_11");
            id(last_state_pressed).publish_state("OFF");           
  - platform: gpio
    id: rack_11_device
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_1
      number: 10
      mode:
        input: True
        pullup: True           
      inverted: True
       
      `;
            }                                            
                if (!checkbox12.checked && selectedTypeValue1 === '16 GPIO Rack Card 1') {
            additionalConfig += `   
  #########################################################################
  - platform: template
    name: $gpio_rack_card_1_device_12
    id: device_12_invert
    lambda: |-
      if ((id(rack_12_device).state == true && id(device_12_set_1_16) == 1) || 
          (id(rack_12_device).state == false && id(device_12_set_1_16) == 2))
      {
        return true;
      } else {
        return false;
      }  
    on_press:
      then: 
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_1_device_12");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:  
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_1_device_12");
            id(last_state_pressed).publish_state("OFF");                
  - platform: gpio
    id: rack_12_device
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_1
      number: 11
      mode:
        input: True
        pullup: True         
      inverted: True   
      `;
            }                                            
                if (!checkbox13.checked && selectedTypeValue1 === '16 GPIO Rack Card 1') {
            additionalConfig += `                  
  #########################################################################
  - platform: template
    name: $gpio_rack_card_1_device_13
    id: device_13_invert
    lambda: |-
      if ((id(rack_13_device).state == true && id(device_13_set_1_16) == 1) || 
          (id(rack_13_device).state == false && id(device_13_set_1_16) == 2))
      {
        return true;
      } else {
        return false;
      }   
    on_press:
      then: 
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_1_device_13");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:  
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_1_device_13");
            id(last_state_pressed).publish_state("OFF");           
  - platform: gpio
    id: rack_13_device
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_1
      number: 12
      mode:
        input: True
        pullup: True   
      inverted: True
      `;
            }                                            
                if (!checkbox14.checked && selectedTypeValue1 === '16 GPIO Rack Card 1') {
            additionalConfig += `       
  #########################################################################
  - platform: template
    name: $gpio_rack_card_1_device_14
    id: device_14_invert
    lambda: |-
      if ((id(rack_14_device).state == true && id(device_14_set_1_16) == 1) || 
          (id(rack_14_device).state == false && id(device_14_set_1_16) == 2))
      {
        return true;
      } else {
        return false;
      }      
    on_press:
      then: 
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_1_device_14");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:  
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_1_device_14");
            id(last_state_pressed).publish_state("OFF");             
  - platform: gpio
    id: rack_14_device
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_1
      number: 13
      mode:
        input: True
        pullup: True        
      inverted: True
      `;
            }                                            
                if (!checkbox15.checked && selectedTypeValue1 === '16 GPIO Rack Card 1') {
            additionalConfig += `           
  #########################################################################
  - platform: template
    name: $gpio_rack_card_1_device_15
    id: device_15_invert
    lambda: |-
      if ((id(rack_15_device).state == true && id(device_15_set_1_16) == 1) || 
          (id(rack_15_device).state == false && id(device_15_set_1_16) == 2))
      {
        return true;
      } else {
        return false;
      }     
    on_press:
      then: 
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_1_device_15");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:  
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_1_device_15");
            id(last_state_pressed).publish_state("OFF");            
  - platform: gpio
    id: rack_15_device
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_1
      number: 14
      mode:
        input: True
        pullup: True      
      inverted: True
      `;
            }                                            
                if (!checkbox16.checked && selectedTypeValue1 === '16 GPIO Rack Card 1') {
            additionalConfig += `   
  #########################################################################
  - platform: template
    name: $gpio_rack_card_1_device_16
    id: device_16_invert
    lambda: |-
      if ((id(rack_16_device).state == true && id(device_16_set_1_16) == 1) || 
          (id(rack_16_device).state == false && id(device_16_set_1_16) == 2))
      {
        return true;
      } else {
        return false;
      }    
    on_press:
      then: 
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_1_device_16");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:  
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_1_device_16");
            id(last_state_pressed).publish_state("OFF");          
  - platform: gpio
    id: rack_16_device
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_1
      number: 15
      mode:
        input: True
        pullup: True           
      inverted: True
      `;
            }                                            
                if (!checkbox17.checked && selectedTypeValue2 === '16 GPIO Rack Card 2') {
            additionalConfig += `      
  - platform: template
    name: $gpio_rack_card_2_device_1
    id: device_1_invert_2
    lambda: |-
      if ((id(rack_2_device_1).state == true && id(device_1_set_17_32) == 1) || 
          (id(rack_2_device_1).state == false && id(device_1_set_17_32) == 2))
      {
        return true;
      } else {
        return false;
      }
    on_press:
      then: 
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_2_device_1");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:   
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_2_device_1");
            id(last_state_pressed).publish_state("OFF");  
  - platform: gpio
    id: rack_2_device_1
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_2
      number: 0
      mode:
        input: True
        pullup: True          
      inverted: True
      `;
            }                                            
                if (!checkbox18.checked && selectedTypeValue2 === '16 GPIO Rack Card 2') {
            additionalConfig += `          
  #########################################################################
  - platform: template
    name: $gpio_rack_card_2_device_2
    id: device_2_invert_2
    lambda: |-
      if ((id(rack_2_device_2).state == true && id(device_2_set_17_32) == 1) || 
          (id(rack_2_device_2).state == false && id(device_2_set_17_32) == 2))
      {
        return true;
      } else {
        return false;
      }
    on_press:
      then: 
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_2_device_2");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:   
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_2_device_2");
            id(last_state_pressed).publish_state("OFF");  
  - platform: gpio
    id: rack_2_device_2
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_2
      number: 1
      mode:
        input: True
        pullup: True          
      inverted: True
      `;
            }                                            
                if (!checkbox19.checked && selectedTypeValue2 === '16 GPIO Rack Card 2') {
            additionalConfig += `          
  #########################################################################
  - platform: template
    name: $gpio_rack_card_2_device_3
    id: device_3_invert_2
    lambda: |-
      if ((id(rack_2_device_3).state == true && id(device_3_set_17_32) == 1) || 
          (id(rack_2_device_3).state == false && id(device_3_set_17_32) == 2))
      {
        return true;
      } else {
        return false;
      }
    on_press:
      then: 
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_2_device_3");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:   
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_2_device_3");
            id(last_state_pressed).publish_state("OFF");  
  - platform: gpio
    id: rack_2_device_3
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_2
      number: 2
      mode:
        input: True
        pullup: True          
      inverted: True
      `;
            }                                            
                if (!checkbox20.checked && selectedTypeValue2 === '16 GPIO Rack Card 2') {
            additionalConfig += `          
  #########################################################################
  - platform: template
    name: $gpio_rack_card_2_device_4
    id: device_4_invert_2
    lambda: |-
      if ((id(rack_2_device_4).state == true && id(device_4_set_17_32) == 1) || 
          (id(rack_2_device_4).state == false && id(device_4_set_17_32) == 2))
      {
        return true;
      } else {
        return false;
      }
    on_press:
      then: 
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_2_device_4");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:   
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_2_device_4");
            id(last_state_pressed).publish_state("OFF");  
  - platform: gpio
    id: rack_2_device_4
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_2
      number: 3
      mode:
        input: True
        pullup: True          
      inverted: True
      `;
            }                                            
                if (!checkbox21.checked && selectedTypeValue2 === '16 GPIO Rack Card 2') {
            additionalConfig += `          
  #########################################################################
  - platform: template
    name: $gpio_rack_card_2_device_5
    id: device_5_invert_2
    lambda: |-
      if ((id(rack_2_device_5).state == true && id(device_5_set_17_32) == 1) || 
          (id(rack_2_device_5).state == false && id(device_5_set_17_32) == 2))
      {
        return true;
      } else {
        return false;
      }
    on_press:
      then: 
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_2_device_5");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:   
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_2_device_5");
            id(last_state_pressed).publish_state("OFF");  
  - platform: gpio
    id: rack_2_device_5
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_2
      number: 4
      mode:
        input: True
        pullup: True          
      inverted: True
      `;
            }                                            
                if (!checkbox22.checked && selectedTypeValue2 === '16 GPIO Rack Card 2') {
            additionalConfig += `          
  #########################################################################
  - platform: template
    name: $gpio_rack_card_2_device_6
    id: device_6_invert_2
    lambda: |-
      if ((id(rack_2_device_6).state == true && id(device_6_set_17_32) == 1) || 
          (id(rack_2_device_6).state == false && id(device_6_set_17_32) == 2))
      {
        return true;
      } else {
        return false;
      }
    on_press:
      then: 
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_2_device_6");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:   
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_2_device_6");
            id(last_state_pressed).publish_state("OFF");  
  - platform: gpio
    id: rack_2_device_6
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_2
      number: 5
      mode:
        input: True
        pullup: True          
      inverted: True
      `;
            }                                            
                if (!checkbox23.checked && selectedTypeValue2 === '16 GPIO Rack Card 2') {
            additionalConfig += `          
  #########################################################################
  - platform: template
    name: $gpio_rack_card_2_device_7
    id: device_7_invert_2
    lambda: |-
      if ((id(rack_2_device_7).state == true && id(device_7_set_17_32) == 1) || 
          (id(rack_2_device_7).state == false && id(device_7_set_17_32) == 2))
      {
        return true;
      } else {
        return false;
      }
    on_press:
      then: 
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_2_device_7");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:   
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_2_device_7");
            id(last_state_pressed).publish_state("OFF");  
  - platform: gpio
    id: rack_2_device_7
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_2
      number: 6
      mode:
        input: True
        pullup: True          
      inverted: True
      `;
            }                                            
                if (!checkbox24.checked && selectedTypeValue2 === '16 GPIO Rack Card 2') {
            additionalConfig += `          
  #########################################################################
  - platform: template
    name: $gpio_rack_card_2_device_8
    id: device_8_invert_2
    lambda: |-
      if ((id(rack_2_device_8).state == true && id(device_8_set_17_32) == 1) || 
          (id(rack_2_device_8).state == false && id(device_8_set_17_32) == 2))
      {
        return true;
      } else {
        return false;
      }
    on_press:
      then: 
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_2_device_8");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:   
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_2_device_8");
            id(last_state_pressed).publish_state("OFF");  
  - platform: gpio
    id: rack_2_device_8
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_2
      number: 7
      mode:
        input: True
        pullup: True          
      inverted: True
      `;
            }                                            
                if (!checkbox25.checked && selectedTypeValue2 === '16 GPIO Rack Card 2') {
            additionalConfig += `          
      #########################################################################
  - platform: template
    name: $gpio_rack_card_2_device_9
    id: device_9_invert_2
    lambda: |-
      if ((id(rack_2_device_9).state == true && id(device_9_set_17_32) == 1) || 
          (id(rack_2_device_9).state == false && id(device_9_set_17_32) == 2))
      {
        return true;
      } else {
        return false;
      }
    on_press:
      then: 
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_2_device_9");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:   
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_2_device_9");
            id(last_state_pressed).publish_state("OFF");  
  - platform: gpio
    id: rack_2_device_9
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_2
      number: 8
      mode:
        input: True
        pullup: True          
      inverted: True
      `;
            }                                            
                if (!checkbox26.checked && selectedTypeValue2 === '16 GPIO Rack Card 2') {
            additionalConfig += `          
      #########################################################################
  - platform: template
    name: $gpio_rack_card_2_device_10
    id: device_10_invert_2
    lambda: |-
      if ((id(rack_2_device_10).state == true && id(device_10_set_17_32) == 1) || 
          (id(rack_2_device_10).state == false && id(device_10_set_17_32) == 2))
      {
        return true;
      } else {
        return false;
      }
    on_press:
      then: 
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_2_device_10");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:   
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_2_device_10");
            id(last_state_pressed).publish_state("OFF");  
  - platform: gpio
    id: rack_2_device_10
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_2
      number: 9
      mode:
        input: True
        pullup: True          
      inverted: True
      `;
            }                                            
                if (!checkbox27.checked && selectedTypeValue2 === '16 GPIO Rack Card 2') {
            additionalConfig += `          
      #########################################################################
  - platform: template
    name: $gpio_rack_card_2_device_11
    id: device_11_invert_2
    lambda: |-
      if ((id(rack_2_device_11).state == true && id(device_11_set_17_32) == 1) || 
          (id(rack_2_device_11).state == false && id(device_11_set_17_32) == 2))
      {
        return true;
      } else {
        return false;
      }
    on_press:
      then: 
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_2_device_11");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:   
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_2_device_11");
            id(last_state_pressed).publish_state("OFF");  
  - platform: gpio
    id: rack_2_device_11
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_2
      number: 10
      mode:
        input: True
        pullup: True          
      inverted: True
      `;
            }                                            
                if (!checkbox28.checked && selectedTypeValue2 === '16 GPIO Rack Card 2') {
            additionalConfig += `          
  #########################################################################
  - platform: template
    name: $gpio_rack_card_2_device_12
    id: device_12_invert_2
    lambda: |-
      if ((id(rack_2_device_12).state == true && id(device_12_set_17_32) == 1) || 
          (id(rack_2_device_12).state == false && id(device_12_set_17_32) == 2))
      {
        return true;
      } else {
        return false;
      }
    on_press:
      then: 
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_2_device_12");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:   
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_2_device_12");
            id(last_state_pressed).publish_state("OFF");  
  - platform: gpio
    id: rack_2_device_12
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_2
      number: 11
      mode:
        input: True
        pullup: True          
      inverted: True     
      `;
            }                                            
                if (!checkbox29.checked && selectedTypeValue2 === '16 GPIO Rack Card 2') {
            additionalConfig += `           
      #########################################################################
  - platform: template
    name: $gpio_rack_card_2_device_13
    id: device_13_invert_2
    lambda: |-
      if ((id(rack_2_device_13).state == true && id(device_13_set_17_32) == 1) || 
          (id(rack_2_device_13).state == false && id(device_13_set_17_32) == 2))
      {
        return true;
      } else {
        return false;
      }
    on_press:
      then: 
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_2_device_13");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:   
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_2_device_13");
            id(last_state_pressed).publish_state("OFF");  
  - platform: gpio
    id: rack_2_device_13
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_2
      number: 12
      mode:
        input: True
        pullup: True          
      inverted: True
      `;
            }                                            
                if (!checkbox30.checked && selectedTypeValue2 === '16 GPIO Rack Card 2') {
            additionalConfig += `          
      #########################################################################
  - platform: template
    name: $gpio_rack_card_2_device_14
    id: device_14_invert_2
    lambda: |-
      if ((id(rack_2_device_14).state == true && id(device_14_set_17_32) == 1) || 
          (id(rack_2_device_14).state == false && id(device_14_set_17_32) == 2))
      {
        return true;
      } else {
        return false;
      }
    on_press:
      then: 
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_2_device_14");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:   
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_2_device_14");
            id(last_state_pressed).publish_state("OFF");  
  - platform: gpio
    id: rack_2_device_14
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_2
      number: 13
      mode:
        input: True
        pullup: True          
      inverted: True
      `;
            }                                            
                if (!checkbox31.checked && selectedTypeValue2 === '16 GPIO Rack Card 2') {
            additionalConfig += `          
      #########################################################################
  - platform: template
    name: $gpio_rack_card_2_device_15
    id: device_15_invert_2
    lambda: |-
      if ((id(rack_2_device_15).state == true && id(device_15_set_17_32) == 1) || 
          (id(rack_2_device_15).state == false && id(device_15_set_17_32) == 2))
      {
        return true;
      } else {
        return false;
      }
    on_press:
      then: 
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_2_device_15");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:   
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_2_device_15");
            id(last_state_pressed).publish_state("OFF");  
  - platform: gpio
    id: rack_2_device_15
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_2
      number: 14
      mode:
        input: True
        pullup: True          
      inverted: True
      `;
            }                                            
                if (!checkbox32.checked && selectedTypeValue2 === '16 GPIO Rack Card 2') {
            additionalConfig += `          
      #########################################################################
  - platform: template
    name: $gpio_rack_card_2_device_16
    id: device_16_invert_2
    lambda: |-
      if ((id(rack_2_device_16).state == true && id(device_16_set_17_32) == 1) || 
          (id(rack_2_device_16).state == false && id(device_16_set_17_32) == 2))
      {
        return true;
      } else {
        return false;
      }
    on_press:
      then: 
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_2_device_16");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:   
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_2_device_16");
            id(last_state_pressed).publish_state("OFF");  
  - platform: gpio
    id: rack_2_device_16
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_2
      number: 15
      mode:
        input: True
        pullup: True          
      inverted: True
      `;
            }                                            
                if (!checkbox33.checked && selectedTypeValue3 === '16 GPIO Rack Card 3') {
            additionalConfig += ` 
  - platform: template
    name: $gpio_rack_card_3_device_1
    id: device_1_invert_3
    lambda: |-
      if ((id(rack_3_device_1).state == true && id(device_1_set_33_48) == 1) || 
          (id(rack_3_device_1).state == false && id(device_1_set_33_48) == 2))
      {
        return true;
      } else {
        return false;
      }
    on_press:
      then: 
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_3_device_1");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:   
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_3_device_1");
            id(last_state_pressed).publish_state("OFF");  
  - platform: gpio
    id: rack_3_device_1
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_3
      number: 0
      mode:
        input: True
        pullup: True          
      inverted: True
      `;
            }                                            
                if (!checkbox34.checked && selectedTypeValue3 === '16 GPIO Rack Card 3') {
            additionalConfig += `       
  #########################################################################
  - platform: template
    name: $gpio_rack_card_3_device_2
    id: device_2_invert_3
    lambda: |-
      if ((id(rack_3_device_2).state == true && id(device_2_set_33_48) == 1) || 
          (id(rack_3_device_2).state == false && id(device_2_set_33_48) == 2))
      {
        return true;
      } else {
        return false;
      }
    on_press:
      then: 
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_3_device_2");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:   
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_3_device_2");
            id(last_state_pressed).publish_state("OFF");  
  - platform: gpio
    id: rack_3_device_2
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_3
      number: 1
      mode:
        input: True
        pullup: True          
      inverted: True
      `;
            }                                            
                if (!checkbox35.checked && selectedTypeValue3 === '16 GPIO Rack Card 3') {
            additionalConfig += `       
  #########################################################################
  - platform: template
    name: $gpio_rack_card_3_device_3
    id: device_3_invert_3
    lambda: |-
      if ((id(rack_3_device_3).state == true && id(device_3_set_33_48) == 1) || 
          (id(rack_3_device_3).state == false && id(device_3_set_33_48) == 2))
      {
        return true;
      } else {
        return false;
      }
    on_press:
      then: 
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_3_device_3");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:   
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_3_device_3");
            id(last_state_pressed).publish_state("OFF");  
  - platform: gpio
    id: rack_3_device_3
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_3
      number: 2
      mode:
        input: True
        pullup: True          
      inverted: True
      `;
            }                                            
                if (!checkbox36.checked && selectedTypeValue3 === '16 GPIO Rack Card 3') {
            additionalConfig += `       
  #########################################################################
  - platform: template
    name: $gpio_rack_card_3_device_4
    id: device_4_invert_3
    lambda: |-
      if ((id(rack_3_device_4).state == true && id(device_4_set_33_48) == 1) || 
          (id(rack_3_device_4).state == false && id(device_4_set_33_48) == 2))
      {
        return true;
      } else {
        return false;
      }
    on_press:
      then: 
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_3_device_4");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:   
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_3_device_4");
            id(last_state_pressed).publish_state("OFF");  
  - platform: gpio
    id: rack_3_device_4
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_3
      number: 3
      mode:
        input: True
        pullup: True          
      inverted: True
      `;
            }                                            
                if (!checkbox37.checked && selectedTypeValue3 === '16 GPIO Rack Card 3') {
            additionalConfig += `       
  #########################################################################
  - platform: template
    name: $gpio_rack_card_3_device_5
    id: device_5_invert_3
    lambda: |-
      if ((id(rack_3_device_5).state == true && id(device_5_set_33_48) == 1) || 
          (id(rack_3_device_5).state == false && id(device_5_set_33_48) == 2))
      {
        return true;
      } else {
        return false;
      }
    on_press:
      then: 
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_3_device_5");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:   
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_3_device_5");
            id(last_state_pressed).publish_state("OFF");  
  - platform: gpio
    id: rack_3_device_5
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_3
      number: 4
      mode:
        input: True
        pullup: True          
      inverted: True
      `;
            }                                            
                if (!checkbox38.checked && selectedTypeValue3 === '16 GPIO Rack Card 3') {
            additionalConfig += `       
  #########################################################################
  - platform: template
    name: $gpio_rack_card_3_device_6
    id: device_6_invert_3
    lambda: |-
      if ((id(rack_3_device_6).state == true && id(device_6_set_33_48) == 1) || 
          (id(rack_3_device_6).state == false && id(device_6_set_33_48) == 2))
      {
        return true;
      } else {
        return false;
      }
    on_press:
      then: 
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_3_device_6");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:   
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_3_device_6");
            id(last_state_pressed).publish_state("OFF");  
  - platform: gpio
    id: rack_3_device_6
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_3
      number: 5
      mode:
        input: True
        pullup: True          
      inverted: True
      `;
            }                                            
                if (!checkbox39.checked && selectedTypeValue3 === '16 GPIO Rack Card 3') {
            additionalConfig += `       
  #########################################################################
  - platform: template
    name: $gpio_rack_card_3_device_7
    id: device_7_invert_3
    lambda: |-
      if ((id(rack_3_device_7).state == true && id(device_7_set_33_48) == 1) || 
          (id(rack_3_device_7).state == false && id(device_7_set_33_48) == 2))
      {
        return true;
      } else {
        return false;
      }
    on_press:
      then: 
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_3_device_7");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:   
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_3_device_7");
            id(last_state_pressed).publish_state("OFF");  
  - platform: gpio
    id: rack_3_device_7
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_3
      number: 6
      mode:
        input: True
        pullup: True          
      inverted: True
      `;
            }                                            
                if (!checkbox40.checked && selectedTypeValue3 === '16 GPIO Rack Card 3') {
            additionalConfig += `       
  #########################################################################
  - platform: template
    name: $gpio_rack_card_3_device_8
    id: device_8_invert_3
    lambda: |-
      if ((id(rack_3_device_8).state == true && id(device_8_set_33_48) == 1) || 
          (id(rack_3_device_8).state == false && id(device_8_set_33_48) == 2))
      {
        return true;
      } else {
        return false;
      }
    on_press:
      then: 
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_3_device_8");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:   
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_3_device_8");
            id(last_state_pressed).publish_state("OFF");  
  - platform: gpio
    id: rack_3_device_8
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_3
      number: 7
      mode:
        input: True
        pullup: True          
      inverted: True
      `;
            }                                            
                if (!checkbox41.checked && selectedTypeValue3 === '16 GPIO Rack Card 3') {
            additionalConfig += `       
      #########################################################################
  - platform: template
    name: $gpio_rack_card_3_device_9
    id: device_9_invert_3
    lambda: |-
      if ((id(rack_3_device_9).state == true && id(device_9_set_33_48) == 1) || 
          (id(rack_3_device_9).state == false && id(device_9_set_33_48) == 2))
      {
        return true;
      } else {
        return false;
      }
    on_press:
      then: 
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_3_device_9");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:   
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_3_device_9");
            id(last_state_pressed).publish_state("OFF");  
  - platform: gpio
    id: rack_3_device_9
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_3
      number: 8
      mode:
        input: True
        pullup: True          
      inverted: True
      `;
            }                                            
                if (!checkbox42.checked && selectedTypeValue3 === '16 GPIO Rack Card 3') {
            additionalConfig += `       
      #########################################################################
  - platform: template
    name: $gpio_rack_card_3_device_10
    id: device_10_invert_3
    lambda: |-
      if ((id(rack_3_device_10).state == true && id(device_10_set_33_48) == 1) || 
          (id(rack_3_device_10).state == false && id(device_10_set_33_48) == 2))
      {
        return true;
      } else {
        return false;
      }
    on_press:
      then: 
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_3_device_10");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:   
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_3_device_10");
            id(last_state_pressed).publish_state("OFF");  
  - platform: gpio
    id: rack_3_device_10
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_3
      number: 9
      mode:
        input: True
        pullup: True          
      inverted: True
      `;
            }                                            
                if (!checkbox43.checked && selectedTypeValue3 === '16 GPIO Rack Card 3') {
            additionalConfig += `       
      #########################################################################
  - platform: template
    name: $gpio_rack_card_3_device_11
    id: device_11_invert_3
    lambda: |-
      if ((id(rack_3_device_11).state == true && id(device_11_set_33_48) == 1) || 
          (id(rack_3_device_11).state == false && id(device_11_set_33_48) == 2))
      {
        return true;
      } else {
        return false;
      }
    on_press:
      then: 
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_3_device_11");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:   
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_3_device_11");
            id(last_state_pressed).publish_state("OFF");  
  - platform: gpio
    id: rack_3_device_11
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_3
      number: 10
      mode:
        input: True
        pullup: True          
      inverted: True
      `;
            }                                            
                if (!checkbox44.checked && selectedTypeValue3 === '16 GPIO Rack Card 3') {
            additionalConfig += `       
  #########################################################################
  - platform: template
    name: $gpio_rack_card_3_device_12
    id: device_12_invert_3
    lambda: |-
      if ((id(rack_3_device_12).state == true && id(device_12_set_33_48) == 1) || 
          (id(rack_3_device_12).state == false && id(device_12_set_33_48) == 2))
      {
        return true;
      } else {
        return false;
      }
    on_press:
      then: 
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_3_device_12");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:   
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_3_device_12");
            id(last_state_pressed).publish_state("OFF");  
  - platform: gpio
    id: rack_3_device_12
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_3
      number: 11
      mode:
        input: True
        pullup: True          
      inverted: True      
      `;
            }                                            
                if (!checkbox45.checked && selectedTypeValue3 === '16 GPIO Rack Card 3') {
            additionalConfig += `       
      #########################################################################
  - platform: template
    name: $gpio_rack_card_3_device_13
    id: device_13_invert_3
    lambda: |-
      if ((id(rack_3_device_13).state == true && id(device_13_set_33_48) == 1) || 
          (id(rack_3_device_13).state == false && id(device_13_set_33_48) == 2))
      {
        return true;
      } else {
        return false;
      }
    on_press:
      then: 
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_3_device_13");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:   
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_3_device_13");
            id(last_state_pressed).publish_state("OFF");  
  - platform: gpio
    id: rack_3_device_13
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_3
      number: 12
      mode:
        input: True
        pullup: True          
      inverted: True
      `;
            }                                            
                if (!checkbox46.checked && selectedTypeValue3 === '16 GPIO Rack Card 3') {
            additionalConfig += `       
      #########################################################################
  - platform: template
    name: $gpio_rack_card_3_device_14
    id: device_14_invert_3
    lambda: |-
      if ((id(rack_3_device_14).state == true && id(device_14_set_33_48) == 1) || 
          (id(rack_3_device_14).state == false && id(device_14_set_33_48) == 2))
      {
        return true;
      } else {
        return false;
      }
    on_press:
      then: 
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_3_device_14");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:   
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_3_device_14");
            id(last_state_pressed).publish_state("OFF");  
  - platform: gpio
    id: rack_3_device_14
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_3
      number: 13
      mode:
        input: True
        pullup: True          
      inverted: True
      `;
            }                                            
                if (!checkbox47.checked && selectedTypeValue3 === '16 GPIO Rack Card 3') {
            additionalConfig += `       
      #########################################################################
  - platform: template
    name: $gpio_rack_card_3_device_15
    id: device_15_invert_3
    lambda: |-
      if ((id(rack_3_device_15).state == true && id(device_15_set_33_48) == 1) || 
          (id(rack_3_device_15).state == false && id(device_15_set_33_48) == 2))
      {
        return true;
      } else {
        return false;
      }
    on_press:
      then: 
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_3_device_15");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:   
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_3_device_15");
            id(last_state_pressed).publish_state("OFF");  
  - platform: gpio
    id: rack_3_device_15
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_3
      number: 14
      mode:
        input: True
        pullup: True          
      inverted: True
      `;
            }                                            
                if (!checkbox48.checked && selectedTypeValue3 === '16 GPIO Rack Card 3') {
            additionalConfig += `       
      #########################################################################
  - platform: template
    name: $gpio_rack_card_3_device_16
    id: device_16_invert_3
    lambda: |-
      if ((id(rack_3_device_16).state == true && id(device_16_set_33_48) == 1) || 
          (id(rack_3_device_16).state == false && id(device_16_set_33_48) == 2))
      {
        return true;
      } else {
        return false;
      }
    on_press:
      then: 
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_3_device_16");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:   
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_3_device_16");
            id(last_state_pressed).publish_state("OFF");  
  - platform: gpio
    id: rack_3_device_16
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_3
      number: 15
      mode:
        input: True
        pullup: True          
      inverted: True
      `;
            }                                            
                if (!checkbox49.checked && selectedTypeValue4 === '16 GPIO Rack Card 4') {
            additionalConfig += `   
  - platform: template
    name: $gpio_rack_card_4_device_1
    id: device_1_invert_4
    lambda: |-
      if ((id(rack_4_device_1).state == true && id(device_1_set_49_64) == 1) || 
          (id(rack_4_device_1).state == false && id(device_1_set_49_64) == 2))
      {
        return true;
      } else {
        return false;
      }
    on_press:
      then: 
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_4_device_1");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:   
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_4_device_1");
            id(last_state_pressed).publish_state("OFF");  
  - platform: gpio
    id: rack_4_device_1
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_4
      number: 0
      mode:
        input: True
        pullup: True          
      inverted: True
      `;
            }                                            
                if (!checkbox50.checked && selectedTypeValue4 === '16 GPIO Rack Card 4') {
            additionalConfig += `         
  #########################################################################
  - platform: template
    name: $gpio_rack_card_4_device_2
    id: device_2_invert_4
    lambda: |-
      if ((id(rack_4_device_2).state == true && id(device_2_set_49_64) == 1) || 
          (id(rack_4_device_2).state == false && id(device_2_set_49_64) == 2))
      {
        return true;
      } else {
        return false;
      }
    on_press:
      then: 
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_4_device_2");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:   
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_4_device_2");
            id(last_state_pressed).publish_state("OFF");  
  - platform: gpio
    id: rack_4_device_2
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_4
      number: 1
      mode:
        input: True
        pullup: True          
      inverted: True
      `;
            }                                            
                if (!checkbox51.checked && selectedTypeValue4 === '16 GPIO Rack Card 4') {
            additionalConfig += `         
  #########################################################################
  - platform: template
    name: $gpio_rack_card_4_device_3
    id: device_3_invert_4
    lambda: |-
      if ((id(rack_4_device_3).state == true && id(device_3_set_49_64) == 1) || 
          (id(rack_4_device_3).state == false && id(device_3_set_49_64) == 2))
      {
        return true;
      } else {
        return false;
      }
    on_press:
      then: 
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_4_device_3");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:   
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_4_device_3");
            id(last_state_pressed).publish_state("OFF");  
  - platform: gpio
    id: rack_4_device_3
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_4
      number: 2
      mode:
        input: True
        pullup: True          
      inverted: True
      `;
            }                                            
                if (!checkbox52.checked && selectedTypeValue4 === '16 GPIO Rack Card 4') {
            additionalConfig += `         
  #########################################################################
  - platform: template
    name: $gpio_rack_card_4_device_4
    id: device_4_invert_4
    lambda: |-
      if ((id(rack_4_device_4).state == true && id(device_4_set_49_64) == 1) || 
          (id(rack_4_device_4).state == false && id(device_4_set_49_64) == 2))
      {
        return true;
      } else {
        return false;
      }
    on_press:
      then: 
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_4_device_4");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:   
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_4_device_4");
            id(last_state_pressed).publish_state("OFF");  
  - platform: gpio
    id: rack_4_device_4
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_4
      number: 3
      mode:
        input: True
        pullup: True          
      inverted: True
      `;
            }                                            
                if (!checkbox53.checked && selectedTypeValue4 === '16 GPIO Rack Card 4') {
            additionalConfig += `         
  #########################################################################
  - platform: template
    name: $gpio_rack_card_4_device_5
    id: device_5_invert_4
    lambda: |-
      if ((id(rack_4_device_5).state == true && id(device_5_set_49_64) == 1) || 
          (id(rack_4_device_5).state == false && id(device_5_set_49_64) == 2))
      {
        return true;
      } else {
        return false;
      }
    on_press:
      then: 
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_4_device_5");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:   
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_4_device_5");
            id(last_state_pressed).publish_state("OFF");  
  - platform: gpio
    id: rack_4_device_5
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_4
      number: 4
      mode:
        input: True
        pullup: True          
      inverted: True
      `;
            }                                            
                if (!checkbox54.checked && selectedTypeValue4 === '16 GPIO Rack Card 4') {
            additionalConfig += `         
  #########################################################################
  - platform: template
    name: $gpio_rack_card_4_device_6
    id: device_6_invert_4
    lambda: |-
      if ((id(rack_4_device_6).state == true && id(device_6_set_49_64) == 1) || 
          (id(rack_4_device_6).state == false && id(device_6_set_49_64) == 2))
      {
        return true;
      } else {
        return false;
      }
    on_press:
      then: 
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_4_device_6");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:   
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_4_device_6");
            id(last_state_pressed).publish_state("OFF");  
  - platform: gpio
    id: rack_4_device_6
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_4
      number: 5
      mode:
        input: True
        pullup: True          
      inverted: True
      `;
            }                                            
                if (!checkbox55.checked && selectedTypeValue4 === '16 GPIO Rack Card 4') {
            additionalConfig += `         
  #########################################################################
  - platform: template
    name: $gpio_rack_card_4_device_7
    id: device_7_invert_4
    lambda: |-
      if ((id(rack_4_device_7).state == true && id(device_7_set_49_64) == 1) || 
          (id(rack_4_device_7).state == false && id(device_7_set_49_64) == 2))
      {
        return true;
      } else {
        return false;
      }
    on_press:
      then: 
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_4_device_7");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:   
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_4_device_7");
            id(last_state_pressed).publish_state("OFF");  
  - platform: gpio
    id: rack_4_device_7
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_4
      number: 6
      mode:
        input: True
        pullup: True          
      inverted: True
      `;
            }                                            
                if (!checkbox56.checked && selectedTypeValue4 === '16 GPIO Rack Card 4') {
            additionalConfig += `         
  #########################################################################
  - platform: template
    name: $gpio_rack_card_4_device_8
    id: device_8_invert_4
    lambda: |-
      if ((id(rack_4_device_8).state == true && id(device_8_set_49_64) == 1) || 
          (id(rack_4_device_8).state == false && id(device_8_set_49_64) == 2))
      {
        return true;
      } else {
        return false;
      }
    on_press:
      then: 
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_4_device_8");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:   
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_4_device_8");
            id(last_state_pressed).publish_state("OFF");  
  - platform: gpio
    id: rack_4_device_8
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_4
      number: 7
      mode:
        input: True
        pullup: True          
      inverted: True
      `;
            }                                            
                if (!checkbox57.checked && selectedTypeValue4 === '16 GPIO Rack Card 4') {
            additionalConfig += `         
      #########################################################################
  - platform: template
    name: $gpio_rack_card_4_device_9
    id: device_9_invert_4
    lambda: |-
      if ((id(rack_4_device_9).state == true && id(device_9_set_49_64) == 1) || 
          (id(rack_4_device_9).state == false && id(device_9_set_49_64) == 2))
      {
        return true;
      } else {
        return false;
      }
    on_press:
      then: 
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_4_device_9");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:   
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_4_device_9");
            id(last_state_pressed).publish_state("OFF");  
  - platform: gpio
    id: rack_4_device_9
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_4
      number: 8
      mode:
        input: True
        pullup: True          
      inverted: True
      `;
            }                                            
                if (!checkbox58.checked && selectedTypeValue4 === '16 GPIO Rack Card 4') {
            additionalConfig += `         
      #########################################################################
  - platform: template
    name: $gpio_rack_card_4_device_10
    id: device_10_invert_4
    lambda: |-
      if ((id(rack_4_device_10).state == true && id(device_10_set_49_64) == 1) || 
          (id(rack_4_device_10).state == false && id(device_10_set_49_64) == 2))
      {
        return true;
      } else {
        return false;
      }
    on_press:
      then: 
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_4_device_10");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:   
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_4_device_10");
            id(last_state_pressed).publish_state("OFF");  
  - platform: gpio
    id: rack_4_device_10
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_4
      number: 9
      mode:
        input: True
        pullup: True          
      inverted: True
      `;
            }                                            
                if (!checkbox59.checked && selectedTypeValue4 === '16 GPIO Rack Card 4') {
            additionalConfig += `         
      #########################################################################
  - platform: template
    name: $gpio_rack_card_4_device_11
    id: device_11_invert_4
    lambda: |-
      if ((id(rack_4_device_11).state == true && id(device_11_set_49_64) == 1) || 
          (id(rack_4_device_11).state == false && id(device_11_set_49_64) == 2))
      {
        return true;
      } else {
        return false;
      }
    on_press:
      then: 
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_4_device_11");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:   
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_4_device_11");
            id(last_state_pressed).publish_state("OFF");  
  - platform: gpio
    id: rack_4_device_11
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_4
      number: 10
      mode:
        input: True
        pullup: True          
      inverted: True
      `;
            }                                            
                if (!checkbox60.checked && selectedTypeValue4 === '16 GPIO Rack Card 4') {
            additionalConfig += `         
  #########################################################################
  - platform: template
    name: $gpio_rack_card_4_device_12
    id: device_12_invert_4
    lambda: |-
      if ((id(rack_4_device_12).state == true && id(device_12_set_49_64) == 1) || 
          (id(rack_4_device_12).state == false && id(device_12_set_49_64) == 2))
      {
        return true;
      } else {
        return false;
      }
    on_press:
      then: 
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_4_device_12");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:   
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_4_device_12");
            id(last_state_pressed).publish_state("OFF");  
  - platform: gpio
    id: rack_4_device_12
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_4
      number: 11
      mode:
        input: True
        pullup: True          
      inverted: True    
      `;
            }                                            
                if (!checkbox61.checked && selectedTypeValue4 === '16 GPIO Rack Card 4') {
            additionalConfig += `           
      #########################################################################
  - platform: template
    name: $gpio_rack_card_4_device_13
    id: device_13_invert_4
    lambda: |-
      if ((id(rack_4_device_13).state == true && id(device_13_set_49_64) == 1) || 
          (id(rack_4_device_13).state == false && id(device_13_set_49_64) == 2))
      {
        return true;
      } else {
        return false;
      }
    on_press:
      then: 
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_4_device_13");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:   
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_4_device_13");
            id(last_state_pressed).publish_state("OFF");  
  - platform: gpio
    id: rack_4_device_13
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_4
      number: 12
      mode:
        input: True
        pullup: True          
      inverted: True
      `;
            }                                            
                if (!checkbox62.checked && selectedTypeValue4 === '16 GPIO Rack Card 4') {
            additionalConfig += `         
      #########################################################################
  - platform: template
    name: $gpio_rack_card_4_device_14
    id: device_14_invert_4
    lambda: |-
      if ((id(rack_4_device_14).state == true && id(device_14_set_49_64) == 1) || 
          (id(rack_4_device_14).state == false && id(device_14_set_49_64) == 2))
      {
        return true;
      } else {
        return false;
      }
    on_press:
      then: 
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_4_device_14");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:   
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_4_device_14");
            id(last_state_pressed).publish_state("OFF");  
  - platform: gpio
    id: rack_4_device_14
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_4
      number: 13
      mode:
        input: True
        pullup: True          
      inverted: True
      `;
            }                                            
                if (!checkbox63.checked && selectedTypeValue4 === '16 GPIO Rack Card 4') {
            additionalConfig += `         
      #########################################################################
  - platform: template
    name: $gpio_rack_card_4_device_15
    id: device_15_invert_4
    lambda: |-
      if ((id(rack_4_device_15).state == true && id(device_15_set_49_64) == 1) || 
          (id(rack_4_device_15).state == false && id(device_15_set_49_64) == 2))
      {
        return true;
      } else {
        return false;
      }
    on_press:
      then: 
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_4_device_15");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:   
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_4_device_15");
            id(last_state_pressed).publish_state("OFF");  
  - platform: gpio
    id: rack_4_device_15
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_4
      number: 14
      mode:
        input: True
        pullup: True          
      inverted: True
      `;
            }                                            
                if (!checkbox64.checked && selectedTypeValue4 === '16 GPIO Rack Card 4') {
            additionalConfig += `         
      #########################################################################
  - platform: template
    name: $gpio_rack_card_4_device_16
    id: device_16_invert_4
    lambda: |-
      if ((id(rack_4_device_16).state == true && id(device_16_set_49_64) == 1) || 
          (id(rack_4_device_16).state == false && id(device_16_set_49_64) == 2))   
      {
        return true;
      } else {
        return false;
      }
    on_press:
      then: 
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_4_device_16");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:   
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_4_device_16");
            id(last_state_pressed).publish_state("OFF");  
  - platform: gpio
    id: rack_4_device_16
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_4
      number: 15
      mode:
        input: True
        pullup: True          
      inverted: True
        `;  
          }                                               
//////////////////////////  BUTTON   //////////////////////
            if (selectedOptionValue16 === 'home_automation_system' ) {
                additionalConfig += `
button:
  - platform: template
    name: button placeholder
    internal: true   
                `;
            }           
            if (selectedTypeValue1 === '16 GPIO Rack Card 1' ) {
                additionalConfig += `   
  - platform: template
    name: GPIO State Set (NO\NC 1-16)
    icon: "mdi:set-merge"
    on_press:
           `;
            }   
          if (!checkbox1.checked && selectedTypeValue1 === '16 GPIO Rack Card 1') {
            additionalConfig += `    
      - lambda: |-
          if (id(device_select_1).state == "NO" && id(select_gpio_1).state == "$gpio_rack_card_1_device_1") {
            id(device_1_set_1_16) = 1;
          }            
      - lambda: |-
          if (id(device_select_1).state == "NC" && id(select_gpio_1).state == "$gpio_rack_card_1_device_1") {
            id(device_1_set_1_16) = 2;
          }
          `;
            }   
          if (!checkbox2.checked && selectedTypeValue1 === '16 GPIO Rack Card 1') {
            additionalConfig += ` 
      - lambda: |-
          if (id(device_select_1).state == "NO" && id(select_gpio_1).state == "$gpio_rack_card_1_device_2") {
            id(device_2_set_1_16) = 1;
          } 
      - lambda: |-
          if (id(device_select_1).state == "NC" && id(select_gpio_1).state == "$gpio_rack_card_1_device_2") {
            id(device_2_set_1_16) = 2;
          }          
          `;
            }   
          if (!checkbox3.checked && selectedTypeValue1 === '16 GPIO Rack Card 1') {
            additionalConfig += ` 
      - lambda: |-
          if (id(device_select_1).state == "NO" && id(select_gpio_1).state == "$gpio_rack_card_1_device_3") {
            id(device_3_set_1_16) = 1;
          } 
      - lambda: |-
          if (id(device_select_1).state == "NC" && id(select_gpio_1).state == "$gpio_rack_card_1_device_3") {
            id(device_3_set_1_16) = 2;
          }
          `;
            }   
          if (!checkbox4.checked && selectedTypeValue1 === '16 GPIO Rack Card 1') {
            additionalConfig += ` 
      - lambda: |-
          if (id(device_select_1).state == "NO" && id(select_gpio_1).state == "$gpio_rack_card_1_device_4") {
            id(device_4_set_1_16) = 1;
          } 
      - lambda: |-
          if (id(device_select_1).state == "NC" && id(select_gpio_1).state == "$gpio_rack_card_1_device_4") {
            id(device_4_set_1_16) = 2;
          }  
          `;
            }   
          if (!checkbox5.checked && selectedTypeValue1 === '16 GPIO Rack Card 1') {
            additionalConfig += ` 
      - lambda: |-
          if (id(device_select_1).state == "NO" && id(select_gpio_1).state == "$gpio_rack_card_1_device_5") {
            id(device_5_set_1_16) = 1;
          } 
      - lambda: |-
          if (id(device_select_1).state == "NC" && id(select_gpio_1).state == "$gpio_rack_card_1_device_5") {
            id(device_5_set_1_16) = 2;
          }
          `;
            }   
          if (!checkbox6.checked && selectedTypeValue1 === '16 GPIO Rack Card 1') {
            additionalConfig += ` 
      - lambda: |-
          if (id(device_select_1).state == "NO" && id(select_gpio_1).state == "$gpio_rack_card_1_device_6") {
            id(device_6_set_1_16) = 1;
          } 
      - lambda: |-
          if (id(device_select_1).state == "NC" && id(select_gpio_1).state == "$gpio_rack_card_1_device_6") {
            id(device_6_set_1_16) = 2;
          }         
          `;
            }   
          if (!checkbox7.checked && selectedTypeValue1 === '16 GPIO Rack Card 1') {
            additionalConfig += `  
      - lambda: |-
          if (id(device_select_1).state == "NO" && id(select_gpio_1).state == "$gpio_rack_card_1_device_7") {
            id(device_7_set_1_16) = 1;
          } 
      - lambda: |-
          if (id(device_select_1).state == "NC" && id(select_gpio_1).state == "$gpio_rack_card_1_device_7") {
            id(device_7_set_1_16) = 2;
          }
          `;
            }   
          if (!checkbox8.checked && selectedTypeValue1 === '16 GPIO Rack Card 1') {
            additionalConfig += ` 
      - lambda: |-
          if (id(device_select_1).state == "NO" && id(select_gpio_1).state == "$gpio_rack_card_1_device_8") {
            id(device_8_set_1_16) = 1;
          } 
      - lambda: |-
          if (id(device_select_1).state == "NC" && id(select_gpio_1).state == "$gpio_rack_card_1_device_8") {
            id(device_8_set_1_16) = 2;
          }  
          `;
            }   
          if (!checkbox9.checked && selectedTypeValue1 === '16 GPIO Rack Card 1') {
            additionalConfig += ` 
      - lambda: |-
          if (id(device_select_1).state == "NO" && id(select_gpio_1).state == "$gpio_rack_card_1_device_9") {
            id(device_9_set_1_16) = 1;
          } 
      - lambda: |-
          if (id(device_select_1).state == "NC" && id(select_gpio_1).state == "$gpio_rack_card_1_device_9") {
            id(device_9_set_1_16) = 2;
          }
          `;
            }   
          if (!checkbox10.checked && selectedTypeValue1 === '16 GPIO Rack Card 1') {
            additionalConfig += ` 
      - lambda: |-
          if (id(device_select_1).state == "NO" && id(select_gpio_1).state == "$gpio_rack_card_1_device_10") {
            id(device_10_set_1_16) = 1;
          } 
      - lambda: |-
          if (id(device_select_1).state == "NC" && id(select_gpio_1).state == "$gpio_rack_card_1_device_10") {
            id(device_10_set_1_16) = 2;
          }          
          `;
            }   
          if (!checkbox11.checked && selectedTypeValue1 === '16 GPIO Rack Card 1') {
            additionalConfig += ` 
      - lambda: |-
          if (id(device_select_1).state == "NO" && id(select_gpio_1).state == "$gpio_rack_card_1_device_11") {
            id(device_11_set_1_16) = 1;
          } 
      - lambda: |-
          if (id(device_select_1).state == "NC" && id(select_gpio_1).state == "$gpio_rack_card_1_device_11") {
            id(device_11_set_1_16) = 2;
          }
          `;
            }   
          if (!checkbox12.checked && selectedTypeValue1 === '16 GPIO Rack Card 1') {
            additionalConfig += ` 
      - lambda: |-
          if (id(device_select_1).state == "NO" && id(select_gpio_1).state == "$gpio_rack_card_1_device_12") {
            id(device_12_set_1_16) = 1;
          } 
      - lambda: |-
          if (id(device_select_1).state == "NC" && id(select_gpio_1).state == "$gpio_rack_card_1_device_12") {
            id(device_12_set_1_16) = 2;
          }  
          `;
            }   
          if (!checkbox13.checked && selectedTypeValue1 === '16 GPIO Rack Card 1') {
            additionalConfig += ` 
      - lambda: |-
          if (id(device_select_1).state == "NO" && id(select_gpio_1).state == "$gpio_rack_card_1_device_13") {
            id(device_13_set_1_16) = 1;
          } 
      - lambda: |-
          if (id(device_select_1).state == "NC" && id(select_gpio_1).state == "$gpio_rack_card_1_device_13") {
            id(device_13_set_1_16) = 2;
          }
          `;
            }   
          if (!checkbox14.checked && selectedTypeValue1 === '16 GPIO Rack Card 1') {
            additionalConfig += ` 
      - lambda: |-
          if (id(device_select_1).state == "NO" && id(select_gpio_1).state == "$gpio_rack_card_1_device_14") {
            id(device_14_set_1_16) = 1;
          } 
      - lambda: |-
          if (id(device_select_1).state == "NC" && id(select_gpio_1).state == "$gpio_rack_card_1_device_14") {
            id(device_14_set_1_16) = 2;
          }         
          `;
            }   
          if (!checkbox15.checked && selectedTypeValue1 === '16 GPIO Rack Card 1') {
            additionalConfig += ` 
      - lambda: |-
          if (id(device_select_1).state == "NO" && id(select_gpio_1).state == "$gpio_rack_card_1_device_15") {
            id(device_15_set_1_16) = 1;
          } 
      - lambda: |-
          if (id(device_select_1).state == "NC" && id(select_gpio_1).state == "$gpio_rack_card_1_device_15") {
            id(device_15_set_1_16) = 2;
          }
          `;
            }   
          if (!checkbox16.checked && selectedTypeValue1 === '16 GPIO Rack Card 1') {
            additionalConfig += ` 
      - lambda: |-
          if (id(device_select_1).state == "NO" && id(select_gpio_1).state == "$gpio_rack_card_1_device_16") {
            id(device_16_set_1_16) = 1;
          } 
      - lambda: |-
          if (id(device_select_1).state == "NC" && id(select_gpio_1).state == "$gpio_rack_card_1_device_16") {
            id(device_16_set_1_16) = 2;
          }  
          `;  
          }    
          if (selectedTypeValue1 === '16 GPIO Rack Card 1') {
          additionalConfig += `    
      - select.set:
          id: select_gpio_1
          option: "None" 
          `;  
          }    
          if (selectedTypeValue2 === '16 GPIO Rack Card 2') {
          additionalConfig += `  
  - platform: template
    name: GPIO State Set (NO\NC 17-32)
    icon: "mdi:set-merge"
    on_press:         
    `;
            }   
          if (!checkbox17.checked && selectedTypeValue2 === '16 GPIO Rack Card 2') {
            additionalConfig += `   
      - lambda: |-
          if (id(device_select_1).state == "NO" && id(select_gpio_1).state == "$gpio_rack_card_2_device_1") {
            id(device_1_set_17_32) = 1;
          } 
      - lambda: |-
          if (id(device_select_1).state == "NC" && id(select_gpio_1).state == "$gpio_rack_card_2_device_1") {
            id(device_1_set_17_32) = 2;
          }
          `;
            }   
          if (!checkbox18.checked && selectedTypeValue2 === '16 GPIO Rack Card 2') {
            additionalConfig += `   
      - lambda: |-
          if (id(device_select_1).state == "NO" && id(select_gpio_1).state == "$gpio_rack_card_2_device_2") {
            id(device_2_set_17_32) = 1;
          } 
      - lambda: |-
          if (id(device_select_1).state == "NC" && id(select_gpio_1).state == "$gpio_rack_card_2_device_2") {
            id(device_2_set_17_32) = 2;
          }         
          `;
            }   
          if (!checkbox19.checked && selectedTypeValue2 === '16 GPIO Rack Card 2') {
            additionalConfig += `    
      - lambda: |-
          if (id(device_select_1).state == "NO" && id(select_gpio_1).state == "$gpio_rack_card_2_device_3") {
            id(device_3_set_17_32) = 1;
          } 
      - lambda: |-
          if (id(device_select_1).state == "NC" && id(select_gpio_1).state == "$gpio_rack_card_2_device_3") {
            id(device_3_set_17_32) = 2;
          }
          `;
            }   
          if (!checkbox20.checked && selectedTypeValue2 === '16 GPIO Rack Card 2') {
            additionalConfig += `   
      - lambda: |-
          if (id(device_select_1).state == "NO" && id(select_gpio_1).state == "$gpio_rack_card_2_device_4") {
            id(device_4_set_17_32) = 1;
          } 
      - lambda: |-
          if (id(device_select_1).state == "NC" && id(select_gpio_1).state == "$gpio_rack_card_2_device_4") {
            id(device_4_set_17_32) = 2;
          }  
          `;
            }   
          if (!checkbox21.checked && selectedTypeValue2 === '16 GPIO Rack Card 2') {
            additionalConfig += `   
      - lambda: |-
          if (id(device_select_1).state == "NO" && id(select_gpio_1).state == "$gpio_rack_card_2_device_5") {
            id(device_5_set_17_32) = 1;
          } 
      - lambda: |-
          if (id(device_select_1).state == "NC" && id(select_gpio_1).state == "$gpio_rack_card_2_device_5") {
            id(device_5_set_17_32) = 2;
          }    
          `;
            }   
          if (!checkbox22.checked && selectedTypeValue2 === '16 GPIO Rack Card 2') {
            additionalConfig += `   
      - lambda: |-
          if (id(device_select_1).state == "NO" && id(select_gpio_1).state == "$gpio_rack_card_2_device_6") {
            id(device_6_set_17_32) = 1;
          } 
      - lambda: |-
          if (id(device_select_1).state == "NC" && id(select_gpio_1).state == "$gpio_rack_card_2_device_6") {
            id(device_6_set_17_32) = 2;
          }     
          `;
            }   
          if (!checkbox23.checked && selectedTypeValue2 === '16 GPIO Rack Card 2') {
            additionalConfig += `        
      - lambda: |-
          if (id(device_select_1).state == "NO" && id(select_gpio_1).state == "$gpio_rack_card_2_device_7") {
            id(device_7_set_17_32) = 1;
          } 
      - lambda: |-
          if (id(device_select_1).state == "NC" && id(select_gpio_1).state == "$gpio_rack_card_2_device_7") {
            id(device_7_set_17_32) = 2;
          }
          `;
            }   
          if (!checkbox24.checked && selectedTypeValue2 === '16 GPIO Rack Card 2') {
            additionalConfig += `   
      - lambda: |-
          if (id(device_select_1).state == "NO" && id(select_gpio_1).state == "$gpio_rack_card_2_device_8") {
            id(device_8_set_17_32) = 1;
          } 
      - lambda: |-
          if (id(device_select_1).state == "NC" && id(select_gpio_1).state == "$gpio_rack_card_2_device_8") {
            id(device_8_set_17_32) = 2;
          }  
          `;
            }   
          if (!checkbox25.checked && selectedTypeValue2 === '16 GPIO Rack Card 2') {
            additionalConfig += `   
      - lambda: |-
          if (id(device_select_1).state == "NO" && id(select_gpio_1).state == "$gpio_rack_card_2_device_9") {
            id(device_9_set_17_32) = 1;
          } 
      - lambda: |-
          if (id(device_select_1).state == "NC" && id(select_gpio_1).state == "$gpio_rack_card_2_device_9") {
            id(device_9_set_17_32) = 2;
          }
          `;
            }   
          if (!checkbox26.checked && selectedTypeValue2 === '16 GPIO Rack Card 2') {
            additionalConfig += `   
      - lambda: |-
          if (id(device_select_1).state == "NO" && id(select_gpio_1).state == "$gpio_rack_card_2_device_10") {
            id(device_10_set_17_32) = 1;
          } 
      - lambda: |-
          if (id(device_select_1).state == "NC" && id(select_gpio_1).state == "$gpio_rack_card_2_device_10") {
            id(device_10_set_17_32) = 2;
          }     
          `;
            }   
          if (!checkbox27.checked && selectedTypeValue2 === '16 GPIO Rack Card 2') {
            additionalConfig += `        
      - lambda: |-
          if (id(device_select_1).state == "NO" && id(select_gpio_1).state == "$gpio_rack_card_2_device_11") {
            id(device_11_set_17_32) = 1;
          } 
      - lambda: |-
          if (id(device_select_1).state == "NC" && id(select_gpio_1).state == "$gpio_rack_card_2_device_11") {
            id(device_11_set_17_32) = 2;
          }
          `;
            }   
          if (!checkbox28.checked && selectedTypeValue2 === '16 GPIO Rack Card 2') {
            additionalConfig += `   
      - lambda: |-
          if (id(device_select_1).state == "NO" && id(select_gpio_1).state == "$gpio_rack_card_2_device_12") {
            id(device_12_set_17_32) = 1;
          } 
      - lambda: |-
          if (id(device_select_1).state == "NC" && id(select_gpio_1).state == "$gpio_rack_card_2_device_12") {
            id(device_12_set_17_32) = 2;
          }  
          `;
            }   
          if (!checkbox29.checked && selectedTypeValue2 === '16 GPIO Rack Card 2') {
            additionalConfig += `   
      - lambda: |-
          if (id(device_select_1).state == "NO" && id(select_gpio_1).state == "$gpio_rack_card_2_device_13") {
            id(device_13_set_17_32) = 1;
          } 
      - lambda: |-
          if (id(device_select_1).state == "NC" && id(select_gpio_1).state == "$gpio_rack_card_2_device_13") {
            id(device_13_set_17_32) = 2;
          }
          `;
            }   
          if (!checkbox30.checked && selectedTypeValue2 === '16 GPIO Rack Card 2') {
            additionalConfig += `   
      - lambda: |-
          if (id(device_select_1).state == "NO" && id(select_gpio_1).state == "$gpio_rack_card_2_device_14") {
            id(device_14_set_17_32) = 1;
          } 
      - lambda: |-
          if (id(device_select_1).state == "NC" && id(select_gpio_1).state == "$gpio_rack_card_2_device_14") {
            id(device_14_set_17_32) = 2;
          }       
          `;
            }   
          if (!checkbox31.checked && selectedTypeValue2 === '16 GPIO Rack Card 2') {
            additionalConfig += `      
      - lambda: |-
          if (id(device_select_1).state == "NO" && id(select_gpio_1).state == "$gpio_rack_card_2_device_15") {
            id(device_15_set_17_32) = 1;
          } 
      - lambda: |-
          if (id(device_select_1).state == "NC" && id(select_gpio_1).state == "$gpio_rack_card_2_device_15") {
            id(device_15_set_17_32) = 2;
          }
          `;
            }   
          if (!checkbox32.checked && selectedTypeValue2 === '16 GPIO Rack Card 2') {
            additionalConfig += `   
      - lambda: |-
          if (id(device_select_1).state == "NO" && id(select_gpio_1).state == "$gpio_rack_card_2_device_16") {
            id(device_16_set_17_32) = 1;
          } 
      - lambda: |-
          if (id(device_select_1).state == "NC" && id(select_gpio_1).state == "$gpio_rack_card_2_device_16") {
            id(device_16_set_17_32) = 2;
          }  
          `;    
        }                
        if (selectedTypeValue2 === '16 GPIO Rack Card 2' ) {
                additionalConfig += `          
      - select.set:
          id: select_gpio_1
          option: "None" 
          `;    
        }                
        if (selectedTypeValue3 === '16 GPIO Rack Card 3' ) {
                additionalConfig += `   
  - platform: template
    name: GPIO State Set (NO\NC 33-48)
    icon: "mdi:set-merge"
    on_press:   
    `;
            }   
          if (!checkbox33.checked && selectedTypeValue3 === '16 GPIO Rack Card 3') {
            additionalConfig += `              
      - lambda: |-
          if (id(device_select_1).state == "NO" && id(select_gpio_1).state == "$gpio_rack_card_3_device_1") {
            id(device_1_set_33_48) = 1;
          } 
      - lambda: |-
          if (id(device_select_1).state == "NC" && id(select_gpio_1).state == "$gpio_rack_card_3_device_1") {
            id(device_1_set_33_48) = 2;
          }
          `;
            }   
          if (!checkbox34.checked && selectedTypeValue3 === '16 GPIO Rack Card 3') {
            additionalConfig += ` 
      - lambda: |-
          if (id(device_select_1).state == "NO" && id(select_gpio_1).state == "$gpio_rack_card_3_device_2") {
            id(device_2_set_33_48) = 1;
          } 
      - lambda: |-
          if (id(device_select_1).state == "NC" && id(select_gpio_1).state == "$gpio_rack_card_3_device_2") {
            id(device_2_set_33_48) = 2;
          }      
          `;
            }   
          if (!checkbox35.checked && selectedTypeValue3 === '16 GPIO Rack Card 3') {
            additionalConfig += `    
      - lambda: |-
          if (id(device_select_1).state == "NO" && id(select_gpio_1).state == "$gpio_rack_card_3_device_3") {
            id(device_3_set_33_48) = 1;
          } 
      - lambda: |-
          if (id(device_select_1).state == "NC" && id(select_gpio_1).state == "$gpio_rack_card_3_device_3") {
            id(device_3_set_33_48) = 2;
          } 
             `;
            }   
          if (!checkbox36.checked && selectedTypeValue3 === '16 GPIO Rack Card 3') {
            additionalConfig += `
      - lambda: |-
          if (id(device_select_1).state == "NO" && id(select_gpio_1).state == "$gpio_rack_card_3_device_4") {
            id(device_4_set_33_48) = 1;
          } 
      - lambda: |-
          if (id(device_select_1).state == "NC" && id(select_gpio_1).state == "$gpio_rack_card_3_device_4") {
            id(device_4_set_33_48) = 2;
          }  
          `;
            }   
          if (!checkbox37.checked && selectedTypeValue3 === '16 GPIO Rack Card 3') {
            additionalConfig += `
      - lambda: |-
          if (id(device_select_1).state == "NO" && id(select_gpio_1).state == "$gpio_rack_card_3_device_5") {
            id(device_5_set_33_48) = 1;
          } 
      - lambda: |-
          if (id(device_select_1).state == "NC" && id(select_gpio_1).state == "$gpio_rack_card_3_device_5") {
            id(device_5_set_33_48) = 2;
          }
          `;
            }   
          if (!checkbox38.checked && selectedTypeValue3 === '16 GPIO Rack Card 3') {
            additionalConfig += `
      - lambda: |-
          if (id(device_select_1).state == "NO" && id(select_gpio_1).state == "$gpio_rack_card_3_device_6") {
            id(device_6_set_33_48) = 1;
          } 
      - lambda: |-
          if (id(device_select_1).state == "NC" && id(select_gpio_1).state == "$gpio_rack_card_3_device_6") {
            id(device_6_set_33_48) = 2;
          }        
          `;
            }   
          if (!checkbox39.checked && selectedTypeValue3 === '16 GPIO Rack Card 3') {
            additionalConfig += `  
      - lambda: |-
          if (id(device_select_1).state == "NO" && id(select_gpio_1).state == "$gpio_rack_card_3_device_7") {
            id(device_7_set_33_48) = 1;
          } 
      - lambda: |-
          if (id(device_select_1).state == "NC" && id(select_gpio_1).state == "$gpio_rack_card_3_device_7") {
            id(device_7_set_33_48) = 2;
          }
          `;
            }   
          if (!checkbox40.checked && selectedTypeValue3 === '16 GPIO Rack Card 3') {
            additionalConfig += `
      - lambda: |-
          if (id(device_select_1).state == "NO" && id(select_gpio_1).state == "$gpio_rack_card_3_device_8") {
            id(device_8_set_33_48) = 1;
          } 
      - lambda: |-
          if (id(device_select_1).state == "NC" && id(select_gpio_1).state == "$gpio_rack_card_3_device_8") {
            id(device_8_set_33_48) = 2;
          }  
          `;
            }   
          if (!checkbox41.checked && selectedTypeValue3 === '16 GPIO Rack Card 3') {
            additionalConfig += `
      - lambda: |-
          if (id(device_select_1).state == "NO" && id(select_gpio_1).state == "$gpio_rack_card_3_device_9") {
            id(device_9_set_33_48) = 1;
          } 
      - lambda: |-
          if (id(device_select_1).state == "NC" && id(select_gpio_1).state == "$gpio_rack_card_3_device_9") {
            id(device_9_set_33_48) = 2;
          }
          `;
            }   
          if (!checkbox42.checked && selectedTypeValue3 === '16 GPIO Rack Card 3') {
            additionalConfig += `
      - lambda: |-
          if (id(device_select_1).state == "NO" && id(select_gpio_1).state == "$gpio_rack_card_3_device_10") {
            id(device_10_set_33_48) = 1;
          } 
      - lambda: |-
          if (id(device_select_1).state == "NC" && id(select_gpio_1).state == "$gpio_rack_card_3_device_10") {
            id(device_10_set_33_48) = 2;
          }         
          `;
            }   
          if (!checkbox43.checked && selectedTypeValue3 === '16 GPIO Rack Card 3') {
            additionalConfig += ` 
      - lambda: |-
          if (id(device_select_1).state == "NO" && id(select_gpio_1).state == "$gpio_rack_card_3_device_11") {
            id(device_11_set_33_48) = 1;
          } 
      - lambda: |-
          if (id(device_select_1).state == "NC" && id(select_gpio_1).state == "$gpio_rack_card_3_device_11") {
            id(device_11_set_33_48) = 2;
          }
          `;
            }   
          if (!checkbox44.checked && selectedTypeValue3 === '16 GPIO Rack Card 3') {
            additionalConfig += `
      - lambda: |-
          if (id(device_select_1).state == "NO" && id(select_gpio_1).state == "$gpio_rack_card_3_device_12") {
            id(device_12_set_33_48) = 1;
          } 
      - lambda: |-
          if (id(device_select_1).state == "NC" && id(select_gpio_1).state == "$gpio_rack_card_3_device_12") {
            id(device_12_set_33_48) = 2;
          }  
          `;
            }   
          if (!checkbox45.checked && selectedTypeValue3 === '16 GPIO Rack Card 3') {
            additionalConfig += `
      - lambda: |-
          if (id(device_select_1).state == "NO" && id(select_gpio_1).state == "$gpio_rack_card_3_device_13") {
            id(device_13_set_33_48) = 1;
          } 
      - lambda: |-
          if (id(device_select_1).state == "NC" && id(select_gpio_1).state == "$gpio_rack_card_3_device_13") {
            id(device_13_set_33_48) = 2;
          }
          `;
            }   
          if (!checkbox46.checked && selectedTypeValue3 === '16 GPIO Rack Card 3') {
            additionalConfig += `
      - lambda: |-
          if (id(device_select_1).state == "NO" && id(select_gpio_1).state == "$gpio_rack_card_3_device_14") {
            id(device_14_set_33_48) = 1;
          } 
      - lambda: |-
          if (id(device_select_1).state == "NC" && id(select_gpio_1).state == "$gpio_rack_card_3_device_14") {
            id(device_14_set_33_48) = 2;
          }     
          `;
            }   
          if (!checkbox47.checked && selectedTypeValue3 === '16 GPIO Rack Card 3') {
            additionalConfig += `     
      - lambda: |-
          if (id(device_select_1).state == "NO" && id(select_gpio_1).state == "$gpio_rack_card_3_device_15") {
            id(device_15_set_33_48) = 1;
          } 
      - lambda: |-
          if (id(device_select_1).state == "NC" && id(select_gpio_1).state == "$gpio_rack_card_3_device_15") {
            id(device_15_set_33_48) = 2;
          }
          `;
            }   
          if (!checkbox48.checked && selectedTypeValue3 === '16 GPIO Rack Card 3') {
            additionalConfig += `
      - lambda: |-
          if (id(device_select_1).state == "NO" && id(select_gpio_1).state == "$gpio_rack_card_3_device_16") {
            id(device_16_set_33_48) = 1;
          } 
      - lambda: |-
          if (id(device_select_1).state == "NC" && id(select_gpio_1).state == "$gpio_rack_card_3_device_16") {
            id(device_16_set_33_48) = 2;
          }  
          `;  
          }    
          if (selectedTypeValue3 === '16 GPIO Rack Card 3' ) {
                additionalConfig += `          
      - select.set:
          id: select_gpio_1
          option: "None" 
          `;  
          }    
          if (selectedTypeValue4 === '16 GPIO Rack Card 4' ) {
                additionalConfig += `   
  - platform: template
    name: GPIO State Set (NO\NC 49-64)
    icon: "mdi:set-merge"
    on_press:
    `;
            }   
          if (!checkbox49.checked && selectedTypeValue4 === '16 GPIO Rack Card 4') {
            additionalConfig += ` 
      - lambda: |-
          if (id(device_select_1).state == "NO" && id(select_gpio_1).state == "$gpio_rack_card_4_device_1") {
            id(device_1_set_49_64) = 1;
          } 
      - lambda: |-
          if (id(device_select_1).state == "NC" && id(select_gpio_1).state == "$gpio_rack_card_4_device_1") {
            id(device_1_set_49_64) = 2;
          }
          `;
            }   
          if (!checkbox50.checked && selectedTypeValue4 === '16 GPIO Rack Card 4') {
            additionalConfig += ` 
      - lambda: |-
          if (id(device_select_1).state == "NO" && id(select_gpio_1).state == "$gpio_rack_card_4_device_2") {
            id(device_2_set_49_64) = 1;
          } 
      - lambda: |-
          if (id(device_select_1).state == "NC" && id(select_gpio_1).state == "$gpio_rack_card_4_device_2") {
            id(device_2_set_49_64) = 2;
          }      
          `;
            }   
          if (!checkbox51.checked && selectedTypeValue4 === '16 GPIO Rack Card 4') {
            additionalConfig += `     
      - lambda: |-
          if (id(device_select_1).state == "NO" && id(select_gpio_1).state == "$gpio_rack_card_4_device_3") {
            id(device_3_set_49_64) = 1;
          } 
      - lambda: |-
          if (id(device_select_1).state == "NC" && id(select_gpio_1).state == "$gpio_rack_card_4_device_3") {
            id(device_3_set_49_64) = 2;
          }
          `;
            }   
          if (!checkbox52.checked && selectedTypeValue4 === '16 GPIO Rack Card 4') {
            additionalConfig += ` 
      - lambda: |-
          if (id(device_select_1).state == "NO" && id(select_gpio_1).state == "$gpio_rack_card_4_device_4") {
            id(device_4_set_49_64) = 1;
          } 
      - lambda: |-
          if (id(device_select_1).state == "NC" && id(select_gpio_1).state == "$gpio_rack_card_4_device_4") {
            id(device_4_set_49_64) = 2;
          }  
          `;
            }   
          if (!checkbox53.checked && selectedTypeValue4 === '16 GPIO Rack Card 4') {
            additionalConfig += ` 
      - lambda: |-
          if (id(device_select_1).state == "NO" && id(select_gpio_1).state == "$gpio_rack_card_4_device_5") {
            id(device_5_set_49_64) = 1;
          } 
      - lambda: |-
          if (id(device_select_1).state == "NC" && id(select_gpio_1).state == "$gpio_rack_card_4_device_5") {
            id(device_5_set_49_64) = 2;
          }
          `;
            }   
          if (!checkbox54.checked && selectedTypeValue4 === '16 GPIO Rack Card 4') {
            additionalConfig += ` 
      - lambda: |-
          if (id(device_select_1).state == "NO" && id(select_gpio_1).state == "$gpio_rack_card_4_device_6") {
            id(device_6_set_49_64) = 1;
          } 
      - lambda: |-
          if (id(device_select_1).state == "NC" && id(select_gpio_1).state == "$gpio_rack_card_4_device_6") {
            id(device_6_set_49_64) = 2;
          }        
          `;
            }   
          if (!checkbox55.checked && selectedTypeValue4 === '16 GPIO Rack Card 4') {
            additionalConfig += `   
      - lambda: |-
          if (id(device_select_1).state == "NO" && id(select_gpio_1).state == "$gpio_rack_card_4_device_7") {
            id(device_7_set_49_64) = 1;
          } 
      - lambda: |-
          if (id(device_select_1).state == "NC" && id(select_gpio_1).state == "$gpio_rack_card_4_device_7") {
            id(device_7_set_49_64) = 2;
          }
          `;
            }   
          if (!checkbox56.checked && selectedTypeValue4 === '16 GPIO Rack Card 4') {
            additionalConfig += ` 
      - lambda: |-
          if (id(device_select_1).state == "NO" && id(select_gpio_1).state == "$gpio_rack_card_4_device_8") {
            id(device_8_set_49_64) = 1;
          } 
      - lambda: |-
          if (id(device_select_1).state == "NC" && id(select_gpio_1).state == "$gpio_rack_card_4_device_8") {
            id(device_8_set_49_64) = 2;
          }  
          `;
            }   
          if (!checkbox57.checked && selectedTypeValue4 === '16 GPIO Rack Card 4') {
            additionalConfig += ` 
      - lambda: |-
          if (id(device_select_1).state == "NO" && id(select_gpio_1).state == "$gpio_rack_card_4_device_9") {
            id(device_9_set_49_64) = 1;
          } 
      - lambda: |-
          if (id(device_select_1).state == "NC" && id(select_gpio_1).state == "$gpio_rack_card_4_device_9") {
            id(device_9_set_49_64) = 2;
          }
          `;
            }   
          if (!checkbox58.checked && selectedTypeValue4 === '16 GPIO Rack Card 4') {
            additionalConfig += ` 
      - lambda: |-
          if (id(device_select_1).state == "NO" && id(select_gpio_1).state == "$gpio_rack_card_4_device_10") {
            id(device_10_set_49_64) = 1;
          } 
      - lambda: |-
          if (id(device_select_1).state == "NC" && id(select_gpio_1).state == "$gpio_rack_card_4_device_10") {
            id(device_10_set_49_64) = 2;
          }    
          `;
            }   
          if (!checkbox59.checked && selectedTypeValue4 === '16 GPIO Rack Card 4') {
            additionalConfig += `       
      - lambda: |-
          if (id(device_select_1).state == "NO" && id(select_gpio_1).state == "$gpio_rack_card_4_device_11") {
            id(device_11_set_49_64) = 1;
          } 
      - lambda: |-
          if (id(device_select_1).state == "NC" && id(select_gpio_1).state == "$gpio_rack_card_4_device_11") {
            id(device_11_set_49_64) = 2;
          }
          `;
            }   
          if (!checkbox60.checked && selectedTypeValue4 === '16 GPIO Rack Card 4') {
            additionalConfig += ` 
      - lambda: |-
          if (id(device_select_1).state == "NO" && id(select_gpio_1).state == "$gpio_rack_card_4_device_12") {
            id(device_12_set_49_64) = 1;
          } 
      - lambda: |-
          if (id(device_select_1).state == "NC" && id(select_gpio_1).state == "$gpio_rack_card_4_device_12") {
            id(device_12_set_49_64) = 2;
          }  
          `;
            }   
          if (!checkbox61.checked && selectedTypeValue4 === '16 GPIO Rack Card 4') {
            additionalConfig += ` 
      - lambda: |-
          if (id(device_select_1).state == "NO" && id(select_gpio_1).state == "$gpio_rack_card_4_device_13") {
            id(device_13_set_49_64) = 1;
          } 
      - lambda: |-
          if (id(device_select_1).state == "NC" && id(select_gpio_1).state == "$gpio_rack_card_4_device_13") {
            id(device_13_set_49_64) = 2;
          }
          `;
            }   
          if (!checkbox62.checked && selectedTypeValue4 === '16 GPIO Rack Card 4') {
            additionalConfig += ` 
      - lambda: |-
          if (id(device_select_1).state == "NO" && id(select_gpio_1).state == "$gpio_rack_card_4_device_14") {
            id(device_14_set_49_64) = 1;
          } 
      - lambda: |-
          if (id(device_select_1).state == "NC" && id(select_gpio_1).state == "$gpio_rack_card_4_device_14") {
            id(device_14_set_49_64) = 2;
          }   
          `;
            }   
          if (!checkbox63.checked && selectedTypeValue4 === '16 GPIO Rack Card 4') {
            additionalConfig += `        
      - lambda: |-
          if (id(device_select_1).state == "NO" && id(select_gpio_1).state == "$gpio_rack_card_4_device_15") {
            id(device_15_set_49_64) = 1;
          } 
      - lambda: |-
          if (id(device_select_1).state == "NC" && id(select_gpio_1).state == "$gpio_rack_card_4_device_15") {
            id(device_15_set_49_64) = 2;
          }
          `;
            }   
          if (!checkbox64.checked && selectedTypeValue4 === '16 GPIO Rack Card 4') {
            additionalConfig += ` 
      - lambda: |-
          if (id(device_select_1).state == "NO" && id(select_gpio_1).state == "$gpio_rack_card_4_device_16") {
            id(device_16_set_49_64) = 1;
          } 
      - lambda: |-
          if (id(device_select_1).state == "NC" && id(select_gpio_1).state == "$gpio_rack_card_4_device_16") {
            id(device_16_set_49_64) = 2;
          } 
          `;  
          }    
          if (selectedTypeValue4 === '16 GPIO Rack Card 4' ) {
                additionalConfig += `          
      - select.set:
          id: select_gpio_1
          option: "None"    
          `;  
          }    
//////////////////////////  SELECET   //////////////////////
            if (selectedOptionValue16 === 'home_automation_system' ) {
                additionalConfig += `
select:
  - platform: template
    id: select_placeholder
    optimistic: true
    initial_option: "None"
    internal: true 
    options:
      - "None"  
                `;
            }       
              if (selectedTypeValue1 === '16 GPIO Rack Card 1' ) {
                  additionalConfig += `    
  
  - platform: template
    name: GPIO NO\NC
    id: device_select_1
    optimistic: true
    initial_option: "NO"
    options:
      - "NO"
      - "NC" 

  - platform: template
    name: Select GPIO (1-16)
    id: select_gpio_1
    optimistic: true
    initial_option: "None"
    options:
      - "None"
      - ${textEntryGPIO1}
      - ${textEntryGPIO2}
      - ${textEntryGPIO3}
      - ${textEntryGPIO4}  
      - ${textEntryGPIO5}
      - ${textEntryGPIO6}
      - ${textEntryGPIO7}
      - ${textEntryGPIO8}  
      - ${textEntryGPIO9}
      - ${textEntryGPIO10}
      - ${textEntryGPIO11}
      - ${textEntryGPIO12}  
      - ${textEntryGPIO13}
      - ${textEntryGPIO14}
      - ${textEntryGPIO15}
      - ${textEntryGPIO16}            
      `;  
          }    
          if (selectedTypeValue2 === '16 GPIO Rack Card 2' ) {
                  additionalConfig += `                    
      - ${textEntryGPIO17}
      - ${textEntryGPIO18}
      - ${textEntryGPIO19}
      - ${textEntryGPIO20}  
      - ${textEntryGPIO21}
      - ${textEntryGPIO22}
      - ${textEntryGPIO23}
      - ${textEntryGPIO24}  
      - ${textEntryGPIO25}
      - ${textEntryGPIO26}
      - ${textEntryGPIO27}
      - ${textEntryGPIO28}  
      - ${textEntryGPIO29}
      - ${textEntryGPIO30}
      - ${textEntryGPIO31}
      - ${textEntryGPIO32}     
      `;  
          } 
          if (selectedTypeValue3 === '16 GPIO Rack Card 3' ) {
                  additionalConfig += `    
      - ${textEntryGPIO33}
      - ${textEntryGPIO34}
      - ${textEntryGPIO35}
      - ${textEntryGPIO36}  
      - ${textEntryGPIO37}
      - ${textEntryGPIO38}
      - ${textEntryGPIO39}
      - ${textEntryGPIO40}  
      - ${textEntryGPIO41}
      - ${textEntryGPIO42}
      - ${textEntryGPIO43}
      - ${textEntryGPIO44}  
      - ${textEntryGPIO45}
      - ${textEntryGPIO46}
      - ${textEntryGPIO47}
      - ${textEntryGPIO48}     
      `;  
          }   
          if (selectedTypeValue4 === '16 GPIO Rack Card 4' ) {
                  additionalConfig += `           
      - ${textEntryGPIO49}
      - ${textEntryGPIO50}
      - ${textEntryGPIO51}
      - ${textEntryGPIO52}  
      - ${textEntryGPIO53}
      - ${textEntryGPIO54}
      - ${textEntryGPIO55}
      - ${textEntryGPIO56}  
      - ${textEntryGPIO57}
      - ${textEntryGPIO58}
      - ${textEntryGPIO59}
      - ${textEntryGPIO60}  
      - ${textEntryGPIO61}
      - ${textEntryGPIO62}
      - ${textEntryGPIO63}
      - ${textEntryGPIO64}  
      `;  
          }    
//////////////////////////  GLOBALS   //////////////////////
          if (selectedOptionValue16 === 'home_automation_system' ) {
                additionalConfig += `
globals: 
  - id: global_placeholder
    type: float
    restore_value: no
                `;
            }       
              if (selectedTypeValue1 === '16 GPIO Rack Card 1' ) {
                  additionalConfig += `    
#########################
  - id: set_all_devices_to_no
    type: float
    restore_value: yes
#########################                  
  - id: device_1_set_1_16
    type: float
    restore_value: yes
  - id: device_2_set_1_16
    type: float
    restore_value: yes
  - id: device_3_set_1_16
    type: float
    restore_value: yes
  - id: device_4_set_1_16
    type: float
    restore_value: yes
  - id: device_5_set_1_16
    type: float
    restore_value: yes
  - id: device_6_set_1_16
    type: float
    restore_value: yes
  - id: device_7_set_1_16
    type: float
    restore_value: yes
  - id: device_8_set_1_16
    type: float
    restore_value: yes
  - id: device_9_set_1_16
    type: float
    restore_value: yes
  - id: device_10_set_1_16
    type: float
    restore_value: yes
  - id: device_11_set_1_16
    type: float
    restore_value: yes
  - id: device_12_set_1_16
    type: float
    restore_value: yes
  - id: device_13_set_1_16
    type: float
    restore_value: yes
  - id: device_14_set_1_16
    type: float
    restore_value: yes
  - id: device_15_set_1_16
    type: float
    restore_value: yes
  - id: device_16_set_1_16
    type: float
    restore_value: yes 
  `;  
          }    
          if (selectedTypeValue2 === '16 GPIO Rack Card 2') {
                  additionalConfig += `    
  - id: device_1_set_17_32
    type: float
    restore_value: yes
  - id: device_2_set_17_32
    type: float
    restore_value: yes
  - id: device_3_set_17_32
    type: float
    restore_value: yes
  - id: device_4_set_17_32
    type: float
    restore_value: yes
  - id: device_5_set_17_32
    type: float
    restore_value: yes
  - id: device_6_set_17_32
    type: float
    restore_value: yes
  - id: device_7_set_17_32
    type: float
    restore_value: yes
  - id: device_8_set_17_32
    type: float
    restore_value: yes
  - id: device_9_set_17_32
    type: float
    restore_value: yes
  - id: device_10_set_17_32
    type: float
    restore_value: yes
  - id: device_11_set_17_32
    type: float
    restore_value: yes
  - id: device_12_set_17_32
    type: float
    restore_value: yes
  - id: device_13_set_17_32
    type: float
    restore_value: yes
  - id: device_14_set_17_32
    type: float
    restore_value: yes
  - id: device_15_set_17_32
    type: float
    restore_value: yes
  - id: device_16_set_17_32
    type: float
    restore_value: yes 
  `;  
          }  
          if (selectedTypeValue3 === '16 GPIO Rack Card 3') {
                  additionalConfig += `    
  - id: device_1_set_33_48
    type: float
    restore_value: yes
  - id: device_2_set_33_48
    type: float
    restore_value: yes
  - id: device_3_set_33_48
    type: float
    restore_value: yes
  - id: device_4_set_33_48
    type: float
    restore_value: yes
  - id: device_5_set_33_48
    type: float
    restore_value: yes
  - id: device_6_set_33_48
    type: float
    restore_value: yes
  - id: device_7_set_33_48
    type: float
    restore_value: yes
  - id: device_8_set_33_48
    type: float
    restore_value: yes
  - id: device_9_set_33_48
    type: float
    restore_value: yes
  - id: device_10_set_33_48
    type: float
    restore_value: yes
  - id: device_11_set_33_48
    type: float
    restore_value: yes
  - id: device_12_set_33_48
    type: float
    restore_value: yes
  - id: device_13_set_33_48
    type: float
    restore_value: yes
  - id: device_14_set_33_48
    type: float
    restore_value: yes
  - id: device_15_set_33_48
    type: float
    restore_value: yes
  - id: device_16_set_33_48
    type: float
    restore_value: yes 
  `;  
          }        
          if (selectedTypeValue4 === '16 GPIO Rack Card 4') {
                  additionalConfig += `    
  - id: device_1_set_49_64
    type: float
    restore_value: yes
  - id: device_2_set_49_64
    type: float
    restore_value: yes
  - id: device_3_set_49_64
    type: float
    restore_value: yes
  - id: device_4_set_49_64
    type: float
    restore_value: yes
  - id: device_5_set_49_64
    type: float
    restore_value: yes
  - id: device_6_set_49_64
    type: float
    restore_value: yes
  - id: device_7_set_49_64
    type: float
    restore_value: yes
  - id: device_8_set_49_64
    type: float
    restore_value: yes
  - id: device_9_set_49_64
    type: float
    restore_value: yes
  - id: device_10_set_49_64
    type: float
    restore_value: yes
  - id: device_11_set_49_64
    type: float
    restore_value: yes
  - id: device_12_set_49_64
    type: float
    restore_value: yes
  - id: device_13_set_49_64
    type: float
    restore_value: yes
  - id: device_14_set_49_64
    type: float
    restore_value: yes
  - id: device_15_set_49_64
    type: float
    restore_value: yes
  - id: device_16_set_49_64
    type: float
    restore_value: yes 
  `;  
}    
////////////////////////////////////  Blinds  ////////////////////////////////////////////////////////
if (selectedOptionValue16 === 'iha_blinds' ) {
                additionalConfig += `   
substitutions:
  name: "${textEntry5}"  
  cover_1_name: ${textEntry7}
  cover_2_name: ${textEntry8}
  cover_3_name: ${textEntry9}
  cover_4_name: ${textEntry10} 
  group_name_1: ${textEntry11}
  group_name_2: ${textEntry12}
  group_name_3: ${textEntry13}  
  software: V5.0 (12/8/2023)

esphome:
  project:
    name: "David Morris.IHA Blinds"
    version: IHA "$software ESP32"  
  name: ${textEntry1} 
  on_boot:
    - delay: 10s
    - stepper.report_position:
        id: my_stepper
        position: !lambda 'return id(stored_step);'
    - stepper.set_target:
         id: my_stepper
         target: !lambda 'return id(stored_step);' 
    - stepper.report_position:
        id: my_stepper_2
        position: !lambda 'return id(stored_step_2);'
    - stepper.set_target:
         id: my_stepper_2
         target: !lambda 'return id(stored_step_2);' 
    - stepper.report_position:
        id: my_stepper_3
        position: !lambda 'return id(stored_step_3);'         
    - stepper.set_target:
         id: my_stepper_3
         target: !lambda 'return id(stored_step_3);' 
    - stepper.report_position:
        id: my_stepper_4
        position: !lambda 'return id(stored_step_4);'       
    - stepper.set_target:
         id: my_stepper_4
         target: !lambda 'return id(stored_step_4);'                   
    - number.set:
        id: open_close_time
        value: !lambda 'return id(closing_time);' 
    - number.set:
        id: open_close_time_2
        value: !lambda 'return id(closing_time_2);' 
    - number.set:
        id: open_close_time_3
        value: !lambda 'return id(closing_time_3);' 
    - number.set:
        id: open_close_time_4
        value: !lambda 'return id(closing_time_4);'  
    - number.set:
        id: group_delay_s
        value: !lambda 'return id(group_delay);'                                        
    - switch.turn_off: ontimeout
    - delay: 5s
    - switch.turn_on: ontimeout 
    - lambda: |-
        if (id(r_window_1) == 0.0) {
          auto call = id(remote_window_1).make_call();
          call.set_option("None");
          call.perform();
        } else if (id(r_window_1) == 1.0) {
          auto call = id(remote_window_1).make_call();
          call.set_option("Button 1");
          call.perform();
        } else if (id(r_window_1) == 2.0) {
          auto call = id(remote_window_1).make_call();
          call.set_option("Button 2");
          call.perform();
        }                  
    - lambda: |-
        if (id(g_window_1) == 0.0) {
          auto call = id(group_window_1a).make_call();
          call.set_option("None");
          call.perform();
        } else if (id(g_window_1) == 1.0) {
          auto call = id(group_window_1a).make_call();
          call.set_option("Group 1");
          call.perform();
        } else if (id(g_window_1) == 2.0) {
          auto call = id(group_window_1a).make_call();
          call.set_option("Group 2");
          call.perform();
        } else if (id(g_window_1) == 3.0) {
          auto call = id(group_window_1a).make_call();
          call.set_option("Group 3");
          call.perform();
        }   
    - lambda: |-
        if (id(g_window_1b) == 0.0) {
          auto call = id(group_window_1b).make_call();
          call.set_option("None");
          call.perform();
        } else if (id(g_window_1b) == 1.0) {
          auto call = id(group_window_1b).make_call();
          call.set_option("Group 1");
          call.perform();
        } else if (id(g_window_1b) == 2.0) {
          auto call = id(group_window_1b).make_call();
          call.set_option("Group 2");
          call.perform();
        } else if (id(g_window_1b) == 3.0) {
          auto call = id(group_window_1b).make_call();
          call.set_option("Group 3");
          call.perform();
        }                          
    - lambda: |-
        if (id(r_window_2) == 0.0) {
          auto call = id(remote_window_2).make_call();
          call.set_option("None");
          call.perform();
        } else if (id(r_window_2) == 1.0) {
          auto call = id(remote_window_2).make_call();
          call.set_option("Button 1");
          call.perform();
        } else if (id(r_window_2) == 2.0) {
          auto call = id(remote_window_2).make_call();
          call.set_option("Button 2");
          call.perform();
        }          
    - lambda: |-
        if (id(g_window_2) == 0.0) {
          auto call = id(group_window_2a).make_call();
          call.set_option("None");
          call.perform();
        } else if (id(g_window_2) == 1.0) {
          auto call = id(group_window_2a).make_call();
          call.set_option("Group 1");
          call.perform();
        } else if (id(g_window_2) == 2.0) {
          auto call = id(group_window_2a).make_call();
          call.set_option("Group 2");
          call.perform();
        } else if (id(g_window_2) == 3.0) {
          auto call = id(group_window_2a).make_call();
          call.set_option("Group 3");
          call.perform();
        }     
    - lambda: |-
        if (id(g_window_2b) == 0.0) {
          auto call = id(group_window_2b).make_call();
          call.set_option("None");
          call.perform();
        } else if (id(g_window_2b) == 1.0) {
          auto call = id(group_window_2b).make_call();
          call.set_option("Group 1");
          call.perform();
        } else if (id(g_window_2b) == 2.0) {
          auto call = id(group_window_2b).make_call();
          call.set_option("Group 2");
          call.perform();
        } else if (id(g_window_2b) == 3.0) {
          auto call = id(group_window_2b).make_call();
          call.set_option("Group 3");
          call.perform();
        }             
    - lambda: |-
        if (id(r_window_3) == 0.0) {
          auto call = id(remote_window_3).make_call();
          call.set_option("None");
          call.perform();
        } else if (id(r_window_3) == 1.0) {
          auto call = id(remote_window_3).make_call();
          call.set_option("Button 1");
          call.perform();
        } else if (id(r_window_3) == 2.0) {
          auto call = id(remote_window_3).make_call();
          call.set_option("Button 2");
          call.perform();
        }          
    - lambda: |-
        if (id(g_window_3) == 0.0) {
          auto call = id(group_window_3a).make_call();
          call.set_option("None");
          call.perform();
        } else if (id(g_window_3) == 1.0) {
          auto call = id(group_window_3a).make_call();
          call.set_option("Group 1");
          call.perform();
        } else if (id(g_window_3) == 2.0) {
          auto call = id(group_window_3a).make_call();
          call.set_option("Group 2");
          call.perform();
        } else if (id(g_window_3) == 3.0) {
          auto call = id(group_window_3a).make_call();
          call.set_option("Group 3");
          call.perform();
        } 
    - lambda: |-
        if (id(g_window_3b) == 0.0) {
          auto call = id(group_window_3b).make_call();
          call.set_option("None");
          call.perform();
        } else if (id(g_window_3b) == 1.0) {
          auto call = id(group_window_3b).make_call();
          call.set_option("Group 1");
          call.perform();
        } else if (id(g_window_3b) == 2.0) {
          auto call = id(group_window_3b).make_call();
          call.set_option("Group 2");
          call.perform();
        } else if (id(g_window_3b) == 3.0) {
          auto call = id(group_window_3b).make_call();
          call.set_option("Group 3");
          call.perform();
        }           
    - lambda: |-
        if (id(r_window_4) == 0.0) {
          auto call = id(remote_window_4).make_call();
          call.set_option("None");
          call.perform();
        } else if (id(r_window_4) == 1.0) {
          auto call = id(remote_window_4).make_call();
          call.set_option("Button 1");
          call.perform();
        } else if (id(r_window_4) == 2.0) {
          auto call = id(remote_window_4).make_call();
          call.set_option("Button 2");
          call.perform();
        }          
    - lambda: |-
        if (id(g_window_4) == 0.0) {
          auto call = id(group_window_4a).make_call();
          call.set_option("None");
          call.perform();
        } else if (id(g_window_4) == 1.0) {
          auto call = id(group_window_4a).make_call();
          call.set_option("Group 1");
          call.perform();
        } else if (id(g_window_4) == 2.0) {
          auto call = id(group_window_4a).make_call();
          call.set_option("Group 2");
          call.perform();
        } else if (id(g_window_4) == 3.0) {
          auto call = id(group_window_4a).make_call();
          call.set_option("Group 3");
          call.perform();
        }    
    - lambda: |-
        if (id(g_window_4b) == 0.0) {
          auto call = id(group_window_4b).make_call();
          call.set_option("None");
          call.perform();
        } else if (id(g_window_4b) == 1.0) {
          auto call = id(group_window_4b).make_call();
          call.set_option("Group 1");
          call.perform();
        } else if (id(g_window_4b) == 2.0) {
          auto call = id(group_window_4b).make_call();
          call.set_option("Group 2");
          call.perform();
        } else if (id(g_window_4b) == 3.0) {
          auto call = id(group_window_4b).make_call();
          call.set_option("Group 3");
          call.perform();
        }                              
    - stepper.set_speed:
            id: my_stepper
            speed: !lambda 'return id(driver_helper);'
    - stepper.set_speed:
            id: my_stepper_2
            speed: !lambda 'return id(driver_helper);'
    - stepper.set_speed:
            id: my_stepper_3
            speed: !lambda 'return id(driver_helper);'
    - stepper.set_speed:
            id: my_stepper_4
            speed: !lambda 'return id(driver_helper);'       
    - lambda: |-
        if (id(driver_helper) == 3) {
          auto call = id(driver_select).make_call();
          call.set_option("None");
          call.perform();    
        } else if (id(driver_helper) == 700) {
          auto call = id(driver_select).make_call();
          call.set_option("A4988");
          call.perform();
        } else if (id(driver_helper) == 3000) {
          auto call = id(driver_select).make_call();
          call.set_option("TMC2208");
          call.perform(); 
        }

esp32:
  board: wemos_d1_mini32
  framework:
    type: arduino


wifi:
  ssid: ${textEntry14} 
  password: ${textEntry15} 
  reboot_timeout: 0s
  ap:
    ssid: "IHA Blinds"
    password: password1234
    ap_timeout: 10s  
captive_portal:    



globals: 
  - id: driver_helper
    type: float
    restore_value: yes

  - id: group_delay
    type: float
    restore_value: yes
  - id: stored_step
    type: float
    restore_value: yes
  - id: closing_time
    type: float
    restore_value: yes
  - id: stored_step_2
    type: float
    restore_value: yes
  - id: stored_step_3
    type: float
    restore_value: yes
  - id: stored_step_4
    type: float
    restore_value: yes        
  - id: closing_time_2
    type: float
    restore_value: yes
  - id: closing_time_3
    type: float
    restore_value: yes
  - id: closing_time_4
    type: float
    restore_value: yes    
  - id: r_window_1
    type: float
    restore_value: yes  
  - id: r_window_2
    type: float
    restore_value: yes
  - id: r_window_3
    type: float
    restore_value: yes
  - id: r_window_4
    type: float
    restore_value: yes 
  - id: g_window_1
    type: float
    restore_value: yes     
  - id: g_window_2
    type: float
    restore_value: yes   
  - id: g_window_3
    type: float
    restore_value: yes   
  - id: g_window_4
    type: float
    restore_value: yes   
  - id: g_window_1b
    type: float
    restore_value: yes     
  - id: g_window_2b
    type: float
    restore_value: yes   
  - id: g_window_3b
    type: float
    restore_value: yes   
  - id: g_window_4b
    type: float
    restore_value: yes       

select:
  - platform: template
    name: Drive Select
    id: driver_select
    optimistic: true
    initial_option: "None"
    options:
      - None
      - A4988
      - TMC2208
    on_value:
      - lambda: |-
          if (id(driver_select).state == "A4988") {
            id(driver_helper) = 700;
          }
      - lambda: |-
          if (id(driver_select).state == "TMC2208") {
            id(driver_helper) = 3000;
          }
      - lambda: |-
          if (id(driver_select).state == "None") {
            id(driver_helper) = 3;
          }          
      - stepper.set_speed:
            id: my_stepper
            speed: !lambda 'return id(driver_helper);'
      - stepper.set_speed:
            id: my_stepper_2
            speed: !lambda 'return id(driver_helper);'
      - stepper.set_speed:
            id: my_stepper_3
            speed: !lambda 'return id(driver_helper);'
      - stepper.set_speed:
            id: my_stepper_4
            speed: !lambda 'return id(driver_helper);'                                    

  - platform: template
    name: Window 1 Group Option 1
    id: group_window_1a
    optimistic: true
    initial_option: "None"
    options:
      - None
      - Group 1
      - Group 2
      - Group 3      
    on_value:
              - if:
                  condition:
                    - for:
                        time: 30s
                        condition:
                          switch.is_on: ontimeout                             
                  then:               
                    - lambda: |-
                        if (id(group_window_1a).state == "None") {
                          id(g_window_1) = 0;
                        }
                    - lambda: |-
                        if (id(group_window_1a).state == "Group 1") {
                          id(g_window_1) = 1;
                        }
                    - lambda: |-
                        if (id(group_window_1a).state == "Group 2") {
                          id(g_window_1) = 2;
                        }
                    - lambda: |-
                        if (id(group_window_1a).state == "Group 3") {
                          id(g_window_1) = 3;
                        }                        

          

  - platform: template
    name: Window 2 Group Option 1
    id: group_window_2a
    optimistic: true
    initial_option: "None"
    options:
      - None
      - Group 1
      - Group 2
      - Group 3       
    on_value:
      then:
              - if:
                  condition:
                    - for:
                        time: 30s
                        condition:
                          switch.is_on: ontimeout                             
                  then:               
                    - lambda: |-
                        if (id(group_window_2a).state == "None") {
                          id(g_window_2) = 0;
                        }
                    - lambda: |-
                        if (id(group_window_2a).state == "Group 1") {
                          id(g_window_2) = 1;
                        }
                    - lambda: |-
                        if (id(group_window_2a).state == "Group 2") {
                          id(g_window_2) = 2;
                        }
                    - lambda: |-
                        if (id(group_window_2a).state == "Group 3") {
                          id(g_window_2) = 3;
                        }  

  - platform: template
    name: Window 3 Group Option 1
    id: group_window_3a
    optimistic: true
    initial_option: "None"
    options:
      - None
      - Group 1
      - Group 2
      - Group 3       
    on_value:
      then:
              - if:
                  condition:
                    - for:
                        time: 30s
                        condition:
                          switch.is_on: ontimeout                             
                  then:               
                    - lambda: |-
                        if (id(group_window_3a).state == "None") {
                          id(g_window_3) = 0;
                        }
                    - lambda: |-
                        if (id(group_window_3a).state == "Group 1") {
                          id(g_window_3) = 1;
                        }
                    - lambda: |-
                        if (id(group_window_3a).state == "Group 2") {
                          id(g_window_3) = 2;
                        }
                    - lambda: |-
                        if (id(group_window_3a).state == "Group 3") {
                          id(g_window_3) = 3;
                        }  

  - platform: template
    name: Window 4 Group Option 1
    id: group_window_4a
    optimistic: true
    initial_option: "None"
    options:
      - None
      - Group 1
      - Group 2  
      - Group 3                 
    on_value:
      then:
              - if:
                  condition:
                    - for:
                        time: 30s
                        condition:
                          switch.is_on: ontimeout                             
                  then:               
                    - lambda: |-
                        if (id(group_window_4a).state == "None") {
                          id(g_window_4) = 0;
                        }
                    - lambda: |-
                        if (id(group_window_4a).state == "Group 1") {
                          id(g_window_4) = 1;
                        }
                    - lambda: |-
                        if (id(group_window_4a).state == "Group 2") {
                          id(g_window_4) = 2;
                        }
                    - lambda: |-
                        if (id(group_window_4a).state == "Group 3") {
                          id(g_window_4) = 3;
                        }  

  - platform: template
    name: Window 1 Group Option 2
    id: group_window_1b
    optimistic: true
    initial_option: "None"
    options:
      - None
      - Group 1
      - Group 2
      - Group 3      
    on_value:
              - if:
                  condition:
                    - for:
                        time: 30s
                        condition:
                          switch.is_on: ontimeout                             
                  then:               
                    - lambda: |-
                        if (id(group_window_1b).state == "None") {
                          id(g_window_1b) = 0;
                        }
                    - lambda: |-
                        if (id(group_window_1b).state == "Group 1") {
                          id(g_window_1b) = 1;
                        }
                    - lambda: |-
                        if (id(group_window_1b).state == "Group 2") {
                          id(g_window_1b) = 2;
                        }
                    - lambda: |-
                        if (id(group_window_1b).state == "Group 3") {
                          id(g_window_1b) = 3;
                        }                        

          

  - platform: template
    name: Window 2 Group Option 2
    id: group_window_2b
    optimistic: true
    initial_option: "None"
    options:
      - None
      - Group 1
      - Group 2
      - Group 3       
    on_value:
      then:
              - if:
                  condition:
                    - for:
                        time: 30s
                        condition:
                          switch.is_on: ontimeout                             
                  then:               
                    - lambda: |-
                        if (id(group_window_2b).state == "None") {
                          id(g_window_2b) = 0;
                        }
                    - lambda: |-
                        if (id(group_window_2b).state == "Group 1") {
                          id(g_window_2b) = 1;
                        }
                    - lambda: |-
                        if (id(group_window_2b).state == "Group 2") {
                          id(g_window_2b) = 2;
                        }
                    - lambda: |-
                        if (id(group_window_2b).state == "Group 3") {
                          id(g_window_2b) = 3;
                        }  

  - platform: template
    name: Window 3 Group Option 2
    id: group_window_3b
    optimistic: true
    initial_option: "None"
    options:
      - None
      - Group 1
      - Group 2
      - Group 3       
    on_value:
      then:
              - if:
                  condition:
                    - for:
                        time: 30s
                        condition:
                          switch.is_on: ontimeout                             
                  then:               
                    - lambda: |-
                        if (id(group_window_3b).state == "None") {
                          id(g_window_3b) = 0;
                        }
                    - lambda: |-
                        if (id(group_window_3b).state == "Group 1") {
                          id(g_window_3b) = 1;
                        }
                    - lambda: |-
                        if (id(group_window_3b).state == "Group 2") {
                          id(g_window_3b) = 2;
                        }
                    - lambda: |-
                        if (id(group_window_3b).state == "Group 3") {
                          id(g_window_3b) = 3;
                        }  

  - platform: template
    name: Window 4 Group Option 2
    id: group_window_4b
    optimistic: true
    initial_option: "None"
    options:
      - None
      - Group 1
      - Group 2  
      - Group 3                 
    on_value:
      then:
              - if:
                  condition:
                    - for:
                        time: 30s
                        condition:
                          switch.is_on: ontimeout                             
                  then:               
                    - lambda: |-
                        if (id(group_window_4b).state == "None") {
                          id(g_window_4b) = 0;
                        }
                    - lambda: |-
                        if (id(group_window_4b).state == "Group 1") {
                          id(g_window_4b) = 1;
                        }
                    - lambda: |-
                        if (id(group_window_4b).state == "Group 2") {
                          id(g_window_4b) = 2;
                        }
                    - lambda: |-
                        if (id(group_window_4b).state == "Group 3") {
                          id(g_window_4b) = 3;
                        }  

  - platform: template
    name: Window 1 Button Assign
    id: remote_window_1
    optimistic: true
    initial_option: "None"
    options:
      - None
      - Button 1
      - Button 2
    on_value:
       then:
              - if:
                  condition:
                    - for:
                        time: 30s
                        condition:
                          switch.is_on: ontimeout                             
                  then:               
                    - lambda: |-
                        if (id(remote_window_1).state == "None") {
                          id(r_window_1) = 0;
                        }
                    - lambda: |-
                        if (id(remote_window_1).state == "Button 1") {
                          id(r_window_1) = 1;
                        }
                    - lambda: |-
                        if (id(remote_window_1).state == "Button 2") {
                          id(r_window_1) = 2;
                        }    

                                               
  - platform: template
    name: Window 2 Button Assign
    id: remote_window_2
    optimistic: true
    initial_option: "None"
    options:
      - None
      - Button 1
      - Button 2
    on_value:
       then:
              - if:
                  condition:
                    - for:
                        time: 30s
                        condition:
                          switch.is_on: ontimeout                             
                  then:               
                    - lambda: |-
                        if (id(remote_window_2).state == "None") {
                          id(r_window_2) = 0;
                        }
                    - lambda: |-
                        if (id(remote_window_2).state == "Button 1") {
                          id(r_window_2) = 1;
                        }
                    - lambda: |-
                        if (id(remote_window_2).state == "Button 2") {
                          id(r_window_2) = 2;
                        }     
  - platform: template
    name: Window 3 Button Assign
    id: remote_window_3
    optimistic: true
    initial_option: "None"
    options:
      - None
      - Button 1
      - Button 2
    on_value:
       then:
              - if:
                  condition:
                    - for:
                        time: 30s
                        condition:
                          switch.is_on: ontimeout                             
                  then:               
                    - lambda: |-
                        if (id(remote_window_3).state == "None") {
                          id(r_window_3) = 0;
                        }
                    - lambda: |-
                        if (id(remote_window_3).state == "Button 1") {
                          id(r_window_3) = 1;
                        }
                    - lambda: |-
                        if (id(remote_window_3).state == "Button 2") {
                          id(r_window_3) = 2;
                        }    
  - platform: template
    name: Window 4 Button Assign
    id: remote_window_4
    optimistic: true
    initial_option: "None"
    options:
      - None
      - Button 1
      - Button 2 
    on_value:
       then:
              - if:
                  condition:
                    - for:
                        time: 30s
                        condition:
                          switch.is_on: ontimeout                             
                  then:               
                    - lambda: |-
                        if (id(remote_window_4).state == "None") {
                          id(r_window_4) = 0;
                        }
                    - lambda: |-
                        if (id(remote_window_4).state == "Button 1") {
                          id(r_window_4) = 1;
                        }
                    - lambda: |-
                        if (id(remote_window_4).state == "Button 2") {
                          id(r_window_4) = 2;
                        }   
number:
  - platform: template
    icon: "mdi:timer"
    name: Group Delay
    mode: box
    id: group_delay_s
    optimistic: true
    min_value: 0
    max_value: .5
    step: .05
    on_value: 
      - lambda: id(group_delay) = id(group_delay_s).state; 

  - platform: template
    icon: "mdi:timer"
    name: Duration $cover_1_name
    mode: box
    id: open_close_time
    optimistic: true
    min_value: 200
    max_value: 10000
    step: 1
    on_value: 
      - lambda: id(closing_time) = id(open_close_time).state; 

  - platform: template
    icon: "mdi:timer"
    name: Duration $cover_2_name
    mode: box
    id: open_close_time_2
    optimistic: true
    min_value: 200
    max_value: 10000
    step: 1
    on_value: 
      - lambda: id(closing_time_2) = id(open_close_time_2).state;       

  - platform: template
    icon: "mdi:timer"
    name: Duration $cover_3_name
    mode: box
    id: open_close_time_3
    optimistic: true
    min_value: 200
    max_value: 10000
    step: 1
    on_value: 
      - lambda: id(closing_time_3) = id(open_close_time_3).state;     

  - platform: template
    icon: "mdi:timer"
    name: Duration $cover_4_name
    mode: box
    id: open_close_time_4
    optimistic: true
    min_value: 200
    max_value: 10000
    step: 1
    on_value: 
      - lambda: id(closing_time_4) = id(open_close_time_4).state;  

cover:
  - platform: template
    name: "$group_name_1"
    id: cover_window_1
    device_class: blind
    open_action: 
      - lambda: |-
          if (id(group_window_1a).state == "Group 1" || id(group_window_1b).state == "Group 1") {
            auto call = id(my_blind).make_call();
            call.set_command_open();
            call.perform();
          }
          if (id(group_window_2a).state == "Group 1" || id(group_window_2b).state == "Group 1") {
            auto call = id(my_blind2).make_call();
            call.set_command_open();
            call.perform();
          }
          if (id(group_window_3a).state == "Group 1" || id(group_window_3b).state == "Group 1") {
            auto call = id(my_blind3).make_call();
            call.set_command_open();
            call.perform();
          }
          if (id(group_window_4a).state == "Group 1" || id(group_window_4b).state == "Group 1") {
            auto call = id(my_blind4).make_call();
            call.set_command_open();
            call.perform();
          }
               
    close_action:   
      - lambda: |-
          if (id(group_window_1a).state == "Group 1" || id(group_window_1b).state == "Group 1") {
            auto call = id(my_blind).make_call();
            call.set_command_close();
            call.perform();
          }
          if (id(group_window_2a).state == "Group 1" || id(group_window_2b).state == "Group 1") {
            auto call = id(my_blind2).make_call();
            call.set_command_close();
            call.perform();
          }
          if (id(group_window_3a).state == "Group 1" || id(group_window_3b).state == "Group 1") {
            auto call = id(my_blind3).make_call();
            call.set_command_close();
            call.perform();
          }
          if (id(group_window_4a).state == "Group 1" || id(group_window_4b).state == "Group 1") {
            auto call = id(my_blind4).make_call();
            call.set_command_close();
            call.perform();
          }
    stop_action:
      - lambda: |-
          if (id(group_window_1a).state == "Group 1" || id(group_window_1b).state == "Group 1") {
            auto call = id(my_blind).make_call();
            call.set_command_stop();
            call.perform();
          }
          if (id(group_window_2a).state == "Group 1" || id(group_window_2b).state == "Group 1") {
            auto call = id(my_blind2).make_call();
            call.set_command_stop();
            call.perform();
          }
          if (id(group_window_3a).state == "Group 1" || id(group_window_3b).state == "Group 1") {
            auto call = id(my_blind3).make_call();
            call.set_command_stop();
            call.perform();
          }
          if (id(group_window_4a).state == "Group 1" || id(group_window_4b).state == "Group 1") {
            auto call = id(my_blind4).make_call();
            call.set_command_stop();
            call.perform();
          }
    optimistic: true
    assumed_state: true
    has_position: true
    position_action:    
      - delay: 1s
      - lambda: |-
          if (id(group_window_1a).state == "Group 1" || id(group_window_1b).state == "Group 1") {
            auto call = id(my_blind).make_call();
            call.set_position(id(cover_window_1).position);
            call.perform();
          }
      - lambda: id(group_delay);
      - lambda: |-
          if (id(group_window_1a).state == "Group 1" || id(group_window_1b).state == "Group 1") {
            id(my_stepper).set_target(pos * id(closing_time));
          }
      - lambda: |-
          if (id(group_window_2a).state == "Group 1" || id(group_window_2b).state == "Group 1") {
            auto call = id(my_blind2).make_call();
            call.set_position(id(cover_window_1).position);
            call.perform();
          }
      - lambda: id(group_delay); 
      - lambda: |-
          if (id(group_window_2a).state == "Group 1" || id(group_window_2b).state == "Group 1") {
            id(my_stepper_2).set_target(pos * id(closing_time_2));
          }
      - lambda: |-
          if (id(group_window_3a).state == "Group 1" || id(group_window_3b).state == "Group 1") {
            auto call = id(my_blind3).make_call();
            call.set_position(id(cover_window_1).position);
            call.perform();
          }
      - lambda: id(group_delay); 
      - lambda: |-
          if (id(group_window_3a).state == "Group 1" || id(group_window_3b).state == "Group 1") {
            id(my_stepper_3).set_target(pos * id(closing_time_3));
          }
      - lambda: |-
          if (id(group_window_4a).state == "Group 1" || id(group_window_4b).state == "Group 1") {
            auto call = id(my_blind4).make_call();
            call.set_position(id(cover_window_1).position);
            call.perform();
          }
      - lambda: id(group_delay);  
      - lambda: |-
          if (id(group_window_4a).state == "Group 1" || id(group_window_4b).state == "Group 1") {
            id(my_stepper_4).set_target(pos * id(closing_time_4));
          }
                      


  - platform: template
    name: "$group_name_2"
    id: cover_window_2
    device_class: blind
    open_action: 
     - lambda: |-
          if (id(group_window_1a).state == "Group 1" || id(group_window_1b).state == "Group 2") {
            auto call = id(my_blind).make_call();
            call.set_command_open();
            call.perform();
          }
          if (id(group_window_2a).state == "Group 1" || id(group_window_2b).state == "Group 2") {
            auto call = id(my_blind2).make_call();
            call.set_command_open();
            call.perform();
          }
          if (id(group_window_3a).state == "Group 1" || id(group_window_3b).state == "Group 2") {
            auto call = id(my_blind3).make_call();
            call.set_command_open();
            call.perform();
          }
          if (id(group_window_4a).state == "Group 1" || id(group_window_4b).state == "Group 2") {
            auto call = id(my_blind4).make_call();
            call.set_command_open();
            call.perform();
          }
               
    close_action:   
      - lambda: |-
          if (id(group_window_1a).state == "Group 1" || id(group_window_1b).state == "Group 2") {
            auto call = id(my_blind).make_call();
            call.set_command_close();
            call.perform();
          }
          if (id(group_window_2a).state == "Group 1" || id(group_window_2b).state == "Group 2") {
            auto call = id(my_blind2).make_call();
            call.set_command_close();
            call.perform();
          }
          if (id(group_window_3a).state == "Group 1" || id(group_window_3b).state == "Group 2") {
            auto call = id(my_blind3).make_call();
            call.set_command_close();
            call.perform();
          }
          if (id(group_window_4a).state == "Group 1" || id(group_window_4b).state == "Group 2") {
            auto call = id(my_blind4).make_call();
            call.set_command_close();
            call.perform();
          }
    stop_action:
      - lambda: |-
          if (id(group_window_1a).state == "Group 2" || id(group_window_1b).state == "Group 2") {
            auto call = id(my_blind).make_call();
            call.set_command_stop();
            call.perform();
          }
          if (id(group_window_2a).state == "Group 2" || id(group_window_2b).state == "Group 2") {
            auto call = id(my_blind2).make_call();
            call.set_command_stop();
            call.perform();
          }
          if (id(group_window_3a).state == "Group 2" || id(group_window_3b).state == "Group 2") {
            auto call = id(my_blind3).make_call();
            call.set_command_stop();
            call.perform();
          }
          if (id(group_window_4a).state == "Group 2" || id(group_window_4b).state == "Group 2") {
            auto call = id(my_blind4).make_call();
            call.set_command_stop();
            call.perform();
          }     
    optimistic: true
    assumed_state: true
    has_position: true
    position_action:  
############## AAAA##############   
      - delay: 1s
      - lambda: |-
          if (id(group_window_1a).state == "Group 2" || id(group_window_1b).state == "Group 2") {
            auto call = id(my_blind).make_call();
            call.set_position(id(cover_window_2).position);
            call.perform();
          }
      - lambda: id(group_delay); 
      - lambda: |-
          if (id(group_window_1a).state == "Group 2" || id(group_window_1b).state == "Group 2") {
            id(my_stepper).set_target(pos * id(closing_time));
          }
      - lambda: |-
          if (id(group_window_2a).state == "Group 2" || id(group_window_2b).state == "Group 2") {
            auto call = id(my_blind2).make_call();
            call.set_position(id(cover_window_2).position);
            call.perform();
          }
      - lambda: id(group_delay); 
      - lambda: |-
          if (id(group_window_2a).state == "Group 2" || id(group_window_2b).state == "Group 2") {
            id(my_stepper_2).set_target(pos * id(closing_time_2));
          }
      - lambda: |-
          if (id(group_window_3a).state == "Group 2" || id(group_window_3b).state == "Group 2") {
            auto call = id(my_blind3).make_call();
            call.set_position(id(cover_window_2).position);
            call.perform();
          }
      - lambda: id(group_delay); 
      - lambda: |-
          if (id(group_window_3a).state == "Group 2" || id(group_window_3b).state == "Group 2") {
            id(my_stepper_3).set_target(pos * id(closing_time_3));
          }
      - lambda: |-
          if (id(group_window_4a).state == "Group 2" || id(group_window_4b).state == "Group 2") {
            auto call = id(my_blind4).make_call();
            call.set_position(id(cover_window_2).position);
            call.perform();
          }
      - lambda: id(group_delay); 
      - lambda: |-
          if (id(group_window_4a).state == "Group 2" || id(group_window_4b).state == "Group 2") {
            id(my_stepper_4).set_target(pos * id(closing_time_4));
          }
                          
############## AAAA##############           


  - platform: template
    name: "$group_name_3"
    id: cover_window_3
    device_class: blind
    open_action: 
     - lambda: |-
          if (id(group_window_1a).state == "Group 1" || id(group_window_1b).state == "Group 3") {
            auto call = id(my_blind).make_call();
            call.set_command_open();
            call.perform();
          }
          if (id(group_window_2a).state == "Group 1" || id(group_window_2b).state == "Group 3") {
            auto call = id(my_blind2).make_call();
            call.set_command_open();
            call.perform();
          }
          if (id(group_window_3a).state == "Group 1" || id(group_window_3b).state == "Group 3") {
            auto call = id(my_blind3).make_call();
            call.set_command_open();
            call.perform();
          }
          if (id(group_window_4a).state == "Group 1" || id(group_window_4b).state == "Group 3") {
            auto call = id(my_blind4).make_call();
            call.set_command_open();
            call.perform();
          }
               
    close_action:   
      - lambda: |-
          if (id(group_window_1a).state == "Group 1" || id(group_window_1b).state == "Group 3") {
            auto call = id(my_blind).make_call();
            call.set_command_close();
            call.perform();
          }
          if (id(group_window_2a).state == "Group 1" || id(group_window_2b).state == "Group 3") {
            auto call = id(my_blind2).make_call();
            call.set_command_close();
            call.perform();
          }
          if (id(group_window_3a).state == "Group 1" || id(group_window_3b).state == "Group 3") {
            auto call = id(my_blind3).make_call();
            call.set_command_close();
            call.perform();
          }
          if (id(group_window_4a).state == "Group 1" || id(group_window_4b).state == "Group 3") {
            auto call = id(my_blind4).make_call();
            call.set_command_close();
            call.perform();
          }
    stop_action:
      - lambda: |-
          if (id(group_window_1a).state == "Group 3" || id(group_window_1b).state == "Group 3") {
            auto call = id(my_blind).make_call();
            call.set_command_stop();
            call.perform();
          }
          if (id(group_window_2a).state == "Group 3" || id(group_window_2b).state == "Group 3") {
            auto call = id(my_blind2).make_call();
            call.set_command_stop();
            call.perform();
          }
          if (id(group_window_3a).state == "Group 3" || id(group_window_3b).state == "Group 3") {
            auto call = id(my_blind3).make_call();
            call.set_command_stop();
            call.perform();
          }
          if (id(group_window_4a).state == "Group 3" || id(group_window_4b).state == "Group 3") {
            auto call = id(my_blind4).make_call();
            call.set_command_stop();
            call.perform();
          }
    optimistic: true
    assumed_state: true
    has_position: true
    position_action:  
############## AAAA##############   
      - delay: 1s              
      - lambda: |-
          if (id(group_window_1a).state == "Group 3" || id(group_window_1b).state == "Group 3") {
            auto call = id(my_blind).make_call();
            call.set_position(id(cover_window_3).position);
            call.perform();
          }
      - lambda: id(group_delay); 
      - lambda: |-
          if (id(group_window_1a).state == "Group 3" || id(group_window_1b).state == "Group 3") {
            id(my_stepper).set_target(pos * id(closing_time));
          }   
      - lambda: |-
          if (id(group_window_2a).state == "Group 3" || id(group_window_2b).state == "Group 3") {
            auto call = id(my_blind2).make_call();
            call.set_position(id(cover_window_3).position);
            call.perform();
          }
      - lambda: id(group_delay);       
      - lambda: |-
          if (id(group_window_2a).state == "Group 3" || id(group_window_2b).state == "Group 3") {
            id(my_stepper_2).set_target(pos * id(closing_time_2));
          }    
      - lambda: |-
          if (id(group_window_3a).state == "Group 3" || id(group_window_3b).state == "Group 3") {
            auto call = id(my_blind3).make_call();
            call.set_position(id(cover_window_3).position);
            call.perform();
          }
      - lambda: id(group_delay);   
      - lambda: |-
          if (id(group_window_3a).state == "Group 3" || id(group_window_3b).state == "Group 3") {
            id(my_stepper_3).set_target(pos * id(closing_time_3));
          }                       
      - lambda: |-
          if (id(group_window_4a).state == "Group 3" || id(group_window_4b).state == "Group 3") {
            auto call = id(my_blind4).make_call();
            call.set_position(id(cover_window_3).position);
            call.perform();
          }
      - lambda: id(group_delay);      
      - lambda: |-
          if (id(group_window_4a).state == "Group 3" || id(group_window_4b).state == "Group 3") {
            id(my_stepper_4).set_target(pos * id(closing_time_4));
          }                       
############## AAAA##############                      

  - platform: template              
    name: "$cover_1_name"
    id: my_blind
    device_class: blind
    open_action:
      - lambda: |-
          id(my_stepper).set_target(id(closing_time));
    close_action:
      - lambda: |-
          id(my_stepper).set_target(0);
    stop_action:
      - lambda: |-
          id(my_stepper).set_target(id(my_stepper).current_position);   
    optimistic: true
    assumed_state: true
    has_position: true
    position_action: 
      - lambda: |-
          id(my_stepper).set_target(pos * id(closing_time));


  - platform: template
    name: "$cover_2_name"
    id: my_blind2
    device_class: blind
    open_action:
      - lambda: |-
          id(my_stepper_2).set_target(id(closing_time_2));
    close_action:
      - lambda: |-
          id(my_stepper_2).set_target(0);
    stop_action:
      - lambda: |-
          id(my_stepper_2).set_target(id(my_stepper_2).current_position);   
    optimistic: true
    assumed_state: true
    has_position: true
    position_action: 
      - lambda: |-
          id(my_stepper_2).set_target(pos * id(closing_time_2));        

  - platform: template
    name: "$cover_3_name"
    id: my_blind3
    device_class: blind
    open_action:
      - lambda: |-
          id(my_stepper_3).set_target(id(closing_time_3));
    close_action:
      - lambda: |-
          id(my_stepper_3).set_target(0);
    stop_action:
      - lambda: |-
          id(my_stepper_3).set_target(id(my_stepper_3).current_position);   
    optimistic: true
    assumed_state: true
    has_position: true
    position_action: 
      - lambda: |-
          id(my_stepper_3).set_target(pos * id(closing_time_3));

  - platform: template
    name: "$cover_4_name"
    id: my_blind4
    device_class: blind
    open_action:
      - lambda: |-
          id(my_stepper_4).set_target(id(closing_time_4));
    close_action:
      - lambda: |-
          id(my_stepper_4).set_target(0);
    stop_action:
      - lambda: |-
          id(my_stepper_4).set_target(id(my_stepper_4).current_position);   
    optimistic: true
    assumed_state: true
    has_position: true
    position_action: 
      - lambda: |-
          id(my_stepper_4).set_target(pos * id(closing_time_4));

stepper:
  - platform: a4988
    id: my_stepper
    step_pin: D3
    dir_pin:
      number: D2
      inverted: true
    sleep_pin:
      number: D1
      inverted: true
    max_speed: 700
      #Optional:
    acceleration: inf
    deceleration: inf

  - platform: a4988
    id: my_stepper_2
    step_pin: D7
    dir_pin:
      number: D6
      inverted: true
    sleep_pin:
      number: D5
      inverted: true
    max_speed: 700
      #Optional:
    acceleration: inf
    deceleration: inf       

  - platform: a4988
    id: my_stepper_3
    step_pin: GPIO15
    dir_pin:
      number: GPIO14
      inverted: true
    sleep_pin:
      number: GPIO13
      inverted: true
    max_speed: 700
      #Optional:
    acceleration: inf
    deceleration: inf 

  - platform: a4988
    id: my_stepper_4
    step_pin: GPIO27
    dir_pin:
      number: GPIO32
      inverted: true
    sleep_pin:
      number: GPIO33
      inverted: true
    max_speed: 700
      #Optional:
    acceleration: inf
    deceleration: inf 

sensor:            
  - platform: template
    id: asdfasdf
    update_interval: 1s
    lambda: |-
      return id(driver_helper);

  - platform: template
    id: stepper_save
    update_interval: 1s
    lambda: |-
      return id(my_stepper).current_position;
    on_value: 
              - if:
                  condition:
                     - lambda: return id(stepper_save).state != id(stored_step);
                     - for:
                        time: 1min
                        condition:
                          switch.is_on: ontimeout                             
                  then:      
                    - lambda: id(stored_step) = id(my_stepper).current_position; 

  - platform: template
    id: stepper_save_2
    update_interval: 1s
    lambda: |-
      return id(my_stepper_2).current_position;
    on_value: 
              - if:
                  condition:
                    - lambda: return id(stepper_save_2).state != id(stored_step_2);
                    - for:
                        time: 1min
                        condition:
                          switch.is_on: ontimeout                             
                  then:      
                    - lambda: id(stored_step_2) = id(my_stepper_2).current_position;                     

  - platform: template
    id: stepper_save_3
    update_interval: 1s
    lambda: |-
      return id(my_stepper_3).current_position;
    on_value: 
              - if:
                  condition:
                    - lambda: return id(stepper_save_3).state != id(stored_step_3);
                    - for:
                        time: 1min
                        condition:
                          switch.is_on: ontimeout                             
                  then:      
                    - lambda: id(stored_step_3) = id(my_stepper_3).current_position;       

  - platform: template
    id: stepper_save_4
    update_interval: 1s
    lambda: |-
      return id(my_stepper_4).current_position;
    on_value:            
              - if:
                  condition:
                    - lambda: return id(stepper_save_4).state != id(stored_step_4);
                    - for:
                        time: 1min
                        condition:
                          switch.is_on: ontimeout                             
                  then:      
                    - lambda: id(stored_step_4) = id(my_stepper_4).current_position;     

switch:
  - platform: template
    id: ontimeout 
    optimistic: True


binary_sensor:
- platform: status
  id: keypad_status 
- platform: gpio
  pin:
    number: GPIO26
    mode: INPUT_PULLUP
  name: Button 1
  filters:
   - invert:
  id: remote_trigger_1
  on_press:
      - if:
          condition:
            - lambda: 'return id(remote_window_1).state == "Button 1";' 
          then:
            - cover.toggle: my_blind
      - if:
          condition:
            - lambda: 'return id(remote_window_2).state == "Button 1";' 
          then:
             - cover.toggle: my_blind2
      - if:
          condition:
            - lambda: 'return id(remote_window_3).state == "Button 1";' 
          then:
             - cover.toggle: my_blind3
      - if:
          condition:
            - lambda: 'return id(remote_window_3).state == "Button 1";' 
          then:
            - cover.toggle: my_blind4

- platform: gpio
  pin:
    number: D4
    mode: INPUT_PULLUP
  name: Button 2
  filters:
   - invert:
  id: remote_trigger_2
  on_press:
      - if:
          condition:
            - lambda: 'return id(remote_window_1).state == "Button 2";' 
          then:
            - cover.toggle: my_blind
      - if:
          condition:
            - lambda: 'return id(remote_window_2).state == "Button 2";' 
          then:
            - cover.toggle: my_blind2
      - if:
          condition:
            - lambda: 'return id(remote_window_3).state == "Button 2";' 
          then:
            - cover.toggle: my_blind3
      - if:
          condition:
            - lambda: 'return id(remote_window_3).state == "Button 2";' 
          then:
            - cover.toggle: my_blind4        
                `;
              }    
////////////////////////////////////  Door Closer  ////////////////////////////////////////////////////////
if (selectedOptionValue16 === 'door_closer' ) {
                additionalConfig += `     
  esphome:
  name: ${textEntry1}
  on_boot:          
###### Working ####################################     
          then: 
            - delay: 4s
            - script.execute: safetystartup
            - switch.turn_off: motor_forward 
            - switch.turn_off: motor_reverse     
            - script.stop: door_open_script_auto_offa   
            - script.stop: door_open_script_auto_offb   
            - script.stop: door_open_script_auto_offaa   
            - script.stop: door_open_script_auto_offba                               
            - script.stop: door_open_script_auto_offa_return
            - script.stop: door_open_script_auto_offb_return  
   ###################################################                 
            - if:
                condition:
                  for:
                    time: 10s
                    condition:
                      - switch.is_off: motor_reverse
                      - switch.is_off: motor_forward     
                      - binary_sensor.is_off: visitor                            
                then:      
                      - script.stop: door_open_script_auto_offa   
                      - script.stop: door_open_script_auto_offb 
                      - script.stop: door_open_script_auto_offaa   
                      - script.stop: door_open_script_auto_offba                           
                      - script.stop: safety               
                      - delay: !lambda return id(external_trigger_delay).state * 1000;           
                      - script.execute: door_open_script_auto_offa 
                      - script.execute: door_open_script_auto_offb
                      - script.execute: door_open_script_auto_offaa 
                      - script.execute: door_open_script_auto_offba                
            - script.execute: door_open_script_auto_offa_return
            - script.execute: door_open_script_auto_offb_return  
            - script.execute: safety                    
   ###################################################                                        
            - delay: 2s
            - number.set:
               id: opening_time
               value: !lambda "return id(opening_time_restore);"     
            - number.set:
               id: external_trigger_delay
               value: !lambda "return id(external_trigger_delay_restore);"       
            - number.set:
               id: auto_alight_helper 
               value: !lambda "return id(auto_align_save);" 
            - number.set:
               id: hing_helper 
               value: !lambda "return id(hing_save);" 
            - number.set:
               id: rpm_number 
               value: !lambda "return id(rpm_save);"                                               
            - delay: 5s                                      
            - if:
                condition:
                  number.in_range:
                    id: hing_helper
                    above: 5
                then:
                  - select.set:
                      id: hing_side
                      option: "Hing on Left" 
            - if:
                condition:
                  number.in_range:
                    id: hing_helper
                    below: 4
                then:
                  - select.set:
                      id: hing_side
                      option: "Hing on Right"  
            - if:
                condition:
                  number.in_range:
                    id: rpm_number
                    above: 5
                then:
                  - select.set:
                      id: motor_rpm
                      option: "Motor 5 RPM" 
            - if:
                condition:
                  number.in_range:
                    id: rpm_number
                    below: 4
                then:
                  - select.set:
                      id: motor_rpm
                      option: "Motor 10 RPM"  
            - switch.turn_on: ontimeout                
###################################################                                                   
esp32:
  board: wemos_d1_mini32
  framework:
    type: arduino
substitutions:
  $cover_name: ${textEntry16}

wifi:
  ssid: ${textEntry17}
  password: ${textEntry18}
  reboot_timeout: 0s
  ap:
    ssid: "IHA Door Closure"
    password: password1234
    ap_timeout: 10s
captive_portal:
button:
###### Working ####################################  
  - platform: template
    name: (Calibration) Park Arm
    icon: "mdi:parking"
    on_press:
      - if: 
         condition:
             - lambda: 'return id(saftey_bypass).state == "Calibration";' 
             - binary_sensor.is_off: motor_parked
             - lambda: 'return id(hing_side).state == "Hing on Left";'              
         then:      
          - switch.turn_on: motor_reverse
          - wait_until:
              condition:    
                binary_sensor.is_on: motor_parked
          - switch.turn_off: motor_reverse  
###################################################            
###### Working ####################################           
      - if: 
         condition:
             - lambda: 'return id(saftey_bypass).state == "Calibration";' 
             - binary_sensor.is_off: motor_parked_right
             - lambda: 'return id(hing_side).state == "Hing on Right";'              
         then:      
          - switch.turn_on: motor_forward
          - wait_until:
              condition:    
                binary_sensor.is_on: motor_parked_right
          - switch.turn_off: motor_forward             
###################################################            
###### Working #################################### 
  - platform: template
    name: Motor Forward (Manual)
    icon: "mdi:arrow-right"
    on_press:
      - if: 
         condition:
             - lambda: 'return id(saftey_bypass).state == "Calibration";' 
             - lambda: 'return id(hing_side).state == "Hing on Left";'              
         then:      
             - switch.turn_on: motor_forward 
             - delay: 500ms
             - switch.turn_off: motor_forward                    
###################################################            
###### Working #################################### 
  - platform: template
    name: Motor Reverse (Manual)
    icon: "mdi:arrow-left"
    on_press:
      - if: 
         condition:
             - lambda: 'return id(saftey_bypass).state == "Calibration";' 
             - lambda: 'return id(hing_side).state == "Hing on Left";'                
         then:         
             - switch.turn_on: motor_reverse 
             - delay: 500ms
             - switch.turn_off: motor_reverse           
###################################################            
###### Working #################################### 
  - platform: template
    name: RF Clear Remote
    icon: "mdi:remote-off"
    on_press:
     - script.execute: code_clear
###################################################            
###### Working #################################### 
  - platform: template
    name: RF Learn Remote
    icon: "mdi:remote"
    on_press:
     - switch.turn_on: learn    
###################################################            
###### Working #################################### 
  - platform: template
    name: Stop All
    icon: "mdi:close-octagon"
    on_press:
     - switch.turn_off: motor_forward 
     - switch.turn_off: motor_reverse     
     - script.stop: door_open_script_auto_offa   
     - script.stop: door_open_script_auto_offb  
     - script.stop: door_open_script_auto_offaa   
     - script.stop: door_open_script_auto_offba                        
     - script.stop: door_open_script_auto_offa_return
     - script.stop: door_open_script_auto_offb_return        
###################################################            
###### Working ####################################                                               
script:
  - id: safetystartup
    mode: restart 
    then:
          - delay: 8s
          - switch.turn_off: motor_reverse 
          - switch.turn_off: motor_forward      
          - script.stop: door_open_script_auto_offa   
          - script.stop: door_open_script_auto_offb   
          - script.stop: door_open_script_auto_offaa   
          - script.stop: door_open_script_auto_offba                             
          - script.stop: door_open_script_auto_offa_return
          - script.stop: door_open_script_auto_offb_return 
  - id: safety
    mode: restart 
    then:
          - delay: 15s
          - switch.turn_off: motor_reverse 
          - switch.turn_off: motor_forward      
          - script.stop: door_open_script_auto_offa   
          - script.stop: door_open_script_auto_offb   
          - script.stop: door_open_script_auto_offaa   
          - script.stop: door_open_script_auto_offba                             
          - script.stop: door_open_script_auto_offa_return
          - script.stop: door_open_script_auto_offb_return        
###################################################            
###### Working #################################### 
  - id: code_clear
    mode: restart 
    then:
       - delay: 100ms
       - switch.turn_off: learn   
       - delay: 100ms          
       - switch.turn_on: learn
       - delay: 100ms
       - switch.turn_off: learn
       - delay: 100ms          
       - switch.turn_on: learn
       - delay: 100ms
       - switch.turn_off: learn
       - delay: 100ms          
       - switch.turn_on: learn
       - delay: 100ms
       - switch.turn_off: learn
       - delay: 100ms          
       - switch.turn_on: learn
       - delay: 100ms
       - switch.turn_off: learn
       - delay: 100ms          
       - switch.turn_on: learn
       - delay: 100ms
       - switch.turn_off: learn
       - delay: 100ms          
       - switch.turn_on: learn
       - delay: 100ms
       - switch.turn_off: learn
       - delay: 100ms          
       - switch.turn_on: learn
       - delay: 100ms
       - switch.turn_off: learn
       - delay: 100ms          
       - switch.turn_on: learn
       - delay: 100ms
       - switch.turn_off: learn
       - switch.turn_off: learn
###################################################            
###### Working #################################### 
  - id: restart_park
    mode: restart 
    then:
     - if: 
              condition:
                 - lambda: 'return id(hing_side).state == "Hing on Left";'   
                 - for:
                    time: 1min
                    condition:
                      switch.is_on: ontimeout                  
              then:                       
                - switch.turn_on: motor_reverse
                - wait_until:
                    condition:    
                      binary_sensor.is_on: motor_parked
                - switch.turn_off: motor_reverse 
                - logger.log: "Single-Clicked" 
###################################################            
###### Working ####################################                 
     - if: 
              condition:
                 - lambda: 'return id(hing_side).state == "Hing on Right";'   
                 - for:
                    time: 1min
                    condition:
                      switch.is_on: ontimeout                      
              then:                       
                - switch.turn_on: motor_forward
                - wait_until:
                    condition:    
                      binary_sensor.is_on: motor_parked_right
                - switch.turn_off: motor_forward 
                - logger.log: "Single-Clicked"                 
###################################################            
###### Working #################################### 
  - id: door_open_script_auto_offa_return
    mode: restart   
    then:
     - if: 
         condition:
           and:
             - binary_sensor.is_off: motor_parked  
             - lambda: 'return id(saftey_bypass).state == "Normal";'                 
             - lambda: 'return id(hing_side).state == "Hing on Left";'    
             - for:
                time: 1min
                condition:
                  switch.is_on: ontimeout                            
         then:                        
#          - delay: 5s
          - switch.turn_off: motor_forward 
          - delay: 250ms 
          - switch.turn_on: motor_reverse
          - wait_until:
              condition:    
                binary_sensor.is_on: motor_parked
          - switch.turn_off: motor_reverse     
###################################################            
###### Working ####################################                     
  - id: door_open_script_auto_offa
    mode: restart   
    then:
     - if: 
         condition:
           and:
             - binary_sensor.is_on: motor_parked  
             - lambda: 'return id(saftey_bypass).state == "Normal";'                 
             - lambda: 'return id(hing_side).state == "Hing on Left";'   
             - lambda: 'return id(motor_rpm).state == "Motor 10 RPM";'               
             - for:
                time: 1min
                condition:
                  switch.is_on: ontimeout                            
         then:                  
          - switch.turn_on: motor_forward
          - wait_until:
              condition:    
                binary_sensor.is_on: motor_parked_right          
          - delay: !lambda return id(opening_time).state * 1000/2;
          - switch.turn_off: motor_forward 
          - delay: 250ms 
          - switch.turn_on: motor_reverse        
          - wait_until:
              condition:    
                binary_sensor.is_on: motor_parked
          - switch.turn_off: motor_reverse   
          - script.stop: door_open_script_auto_offa   
          - script.stop: door_open_script_auto_offb    
          - script.stop: door_open_script_auto_offaa   
          - script.stop: door_open_script_auto_offba                             
          - script.stop: door_open_script_auto_offa_return
          - script.stop: door_open_script_auto_offb_return        
  - id: door_open_script_auto_offaa
    mode: restart   
    then:
     - if: 
         condition:
           and:
             - binary_sensor.is_on: motor_parked  
             - lambda: 'return id(saftey_bypass).state == "Normal";'                 
             - lambda: 'return id(hing_side).state == "Hing on Left";'   
             - lambda: 'return id(motor_rpm).state == "Motor 5 RPM";'               
             - for:
                time: 1min
                condition:
                  switch.is_on: ontimeout                            
         then:                  
          - switch.turn_on: motor_forward
          - wait_until:
              condition:    
                binary_sensor.is_on: motor_parked_right          
          - delay: !lambda return id(opening_time).state * 1000;
          - switch.turn_off: motor_forward 
          - delay: 250ms 
          - switch.turn_on: motor_reverse        
          - wait_until:
              condition:    
                binary_sensor.is_on: motor_parked
          - switch.turn_off: motor_reverse   
          - script.stop: door_open_script_auto_offa   
          - script.stop: door_open_script_auto_offb 
          - script.stop: door_open_script_auto_offaa   
          - script.stop: door_open_script_auto_offba                             
          - script.stop: door_open_script_auto_offa_return
          - script.stop: door_open_script_auto_offb_return                   
###################################################            
###### Working #################################### 
  - id: door_open_script_auto_offb_return
    mode: restart   
    then:
     - if: 
         condition:
           and:
             - binary_sensor.is_off: motor_parked_right  
             - lambda: 'return id(saftey_bypass).state == "Normal";'                 
             - lambda: 'return id(hing_side).state == "Hing on Right";'      
             - for:
                time: 1min
                condition:
                  switch.is_on: ontimeout                           
         then:                           
#          - delay: 5s
          - switch.turn_off: motor_reverse 
          - delay: 250ms 
          - switch.turn_on: motor_forward
          - wait_until:
              condition:    
                binary_sensor.is_on: motor_parked_right
          - switch.turn_off: motor_forward   
###################################################            
###### Working #################################### 
  - id: door_open_script_auto_offb
    mode: restart   
    then:
     - if: 
         condition:
           and:
             - binary_sensor.is_on: motor_parked_right  
             - lambda: 'return id(saftey_bypass).state == "Normal";'                 
             - lambda: 'return id(hing_side).state == "Hing on Right";'  
             - lambda: 'return id(motor_rpm).state == "Motor 5 RPM";'                   

             - for:
                time: 2min
                condition:
                  switch.is_on: ontimeout                           
         then:                  
          - switch.turn_on: motor_reverse
          - wait_until:
              condition:    
                binary_sensor.is_on: motor_parked          
          - delay: !lambda return id(opening_time).state * 1000;
          - switch.turn_off: motor_reverse 
          - delay: 250ms 
          - switch.turn_on: motor_forward      
          - wait_until:
              condition:    
                binary_sensor.is_on: motor_parked_right
          - switch.turn_off: motor_forward      
          - script.stop: door_open_script_auto_offa   
          - script.stop: door_open_script_auto_offb   
          - script.stop: door_open_script_auto_offaa   
          - script.stop: door_open_script_auto_offba                             
          - script.stop: door_open_script_auto_offa_return
          - script.stop: door_open_script_auto_offb_return        
  - id: door_open_script_auto_offba
    mode: restart   
    then:
     - if: 
         condition:
           and:
             - binary_sensor.is_on: motor_parked_right  
             - lambda: 'return id(saftey_bypass).state == "Normal";'                 
             - lambda: 'return id(hing_side).state == "Hing on Right";'  
             - lambda: 'return id(motor_rpm).state == "Motor 10 RPM";'                   

             - for:
                time: 2min
                condition:
                  switch.is_on: ontimeout                           
         then:                  
          - switch.turn_on: motor_reverse
          - wait_until:
              condition:    
                binary_sensor.is_on: motor_parked          
          - delay: !lambda return id(opening_time).state * 1000/2;
          - switch.turn_off: motor_reverse 
          - delay: 250ms 
          - switch.turn_on: motor_forward
          - wait_until:
              condition:    
                binary_sensor.is_on: motor_parked_right
          - switch.turn_off: motor_forward      
          - script.stop: door_open_script_auto_offa   
          - script.stop: door_open_script_auto_offb  
          - script.stop: door_open_script_auto_offaa   
          - script.stop: door_open_script_auto_offba                             
          - script.stop: door_open_script_auto_offa_return
          - script.stop: door_open_script_auto_offb_return                                                      
select:
###################################################            
###### Working ####################################   
  - platform: template
    name: "Motor RPM"
    id: motor_rpm
    optimistic: true
    options:
      - Motor 5 RPM
      - Motor 10 RPM
    on_value:      
      - if:
          condition:
            - lambda: 'return id(motor_rpm).state == "Motor 5 RPM";'                           
          then:
            - number.set:
               id: rpm_number
               value: "6"     
      - if:
          condition:
            - lambda: 'return id(motor_rpm).state == "Motor 10 RPM";'                           
          then:
            - number.set:
               id: rpm_number
               value: "3"      
###################################################            
###### Working ####################################   
  - platform: template
    name: "Operating Mode"
    id: saftey_bypass
    optimistic: true
    options:
      - Normal
      - Calibration
    initial_option: Normal   
###################################################            
  - platform: template
    name: "Hing Side"
    id: hing_side
    optimistic: true
    options:
      - Hing on Left
      - Hing on Right
    on_value:      
      - if:
          condition:
            - lambda: 'return id(hing_side).state == "Hing on Left";'                           
          then:
            - number.set:
               id: hing_helper
               value: "6"     
      - if:
          condition:
            - lambda: 'return id(hing_side).state == "Hing on Right";'                           
          then:
            - number.set:
               id: hing_helper
               value: "3"       


###################################################           
###### Working #################################### 
binary_sensor:  
  - platform: homeassistant
    entity_id: input_boolean.visitor
    id: visitor     
###################################################            
###### Working #################################### 
  - platform: gpio
    pin:
      number: D4
      mode: INPUT_PULLUP      
    id: motor_parked
    icon: "mdi:car-brake-parking"         
    filters:
      - invert:
      - delayed_off: 100ms  
    on_press:      
      - if:
          condition:
            - lambda: 'return id(hing_side).state == "Hing on Left";'                           
          then:
            - switch.turn_off: motor_reverse 
            - switch.turn_off: motor_forward   
###################################################            
###### Working #################################### 
  - platform: gpio
    pin:
      number: D5
      mode: INPUT_PULLUP
    id: motor_parked_right
    icon: "mdi:car-brake-parking"         
    filters:
      - invert:
      - delayed_off: 100ms  
    on_press:      
      - if:
          condition:
            - lambda: 'return id(hing_side).state == "Hing on Right";'                 
          then:
            - switch.turn_off: motor_reverse 
            - switch.turn_off: motor_forward             
###################################################            
###### Working #################################### 
  - platform: gpio
    pin:
      number: D8
      mode: INPUT_PULLUP 
    id: remote
    name:  External Switch
    filters:
      - invert:    
    icon: "mdi:remote"  
    on_press:     
      - if:
          condition:
            for:
              time: 10s
              condition:
                - switch.is_off: motor_reverse
                - switch.is_off: motor_forward     
                - binary_sensor.is_off: visitor                            
          then:      
                - script.stop: door_open_script_auto_offa   
                - script.stop: door_open_script_auto_offb 
                - script.stop: door_open_script_auto_offaa   
                - script.stop: door_open_script_auto_offba                           
                - script.stop: safety               
                - delay: !lambda return id(external_trigger_delay).state * 1000;           
                - script.execute: door_open_script_auto_offa 
                - script.execute: door_open_script_auto_offb
                - script.execute: door_open_script_auto_offaa 
                - script.execute: door_open_script_auto_offba                
      - script.execute: door_open_script_auto_offa_return
      - script.execute: door_open_script_auto_offb_return  
      - script.execute: safety                           
###################################################            
###### Working #################################### 
  - platform: gpio
    pin:
      number: D6
      mode: INPUT_PULLUP
    id: remote_switch
    name:  External Trigger
    icon: "mdi:remote"    
    filters:
      - delayed_off: 100ms  
      - invert:         
    on_press:           
      - if:
          condition:
            for:
              time: 10s
              condition:
                - switch.is_off: motor_reverse
                - switch.is_off: motor_forward     
                - binary_sensor.is_off: visitor                            
          then:      
                - script.stop: door_open_script_auto_offa   
                - script.stop: door_open_script_auto_offb 
                - script.stop: door_open_script_auto_offaa   
                - script.stop: door_open_script_auto_offba                           
                - script.stop: safety               
                - delay: !lambda return id(external_trigger_delay).state * 1000;           
                - script.execute: door_open_script_auto_offa 
                - script.execute: door_open_script_auto_offb
                - script.execute: door_open_script_auto_offaa 
                - script.execute: door_open_script_auto_offba                
      - script.execute: door_open_script_auto_offa_return
      - script.execute: door_open_script_auto_offb_return  
      - script.execute: safety             
###################################################                    
###### Working ####################################      
  - platform: gpio
    pin:
      number: D3
      mode: INPUT_PULLUP
    id: restart_unit_button
    filters:
      - invert:
    on_multi_click:
        - timing:
            - ON for at least 10s         
          then:           
                - switch.turn_on: unit_restart  
        - timing:
            - ON for at least 2s              
            - OFF for at least .5s                        
          then:                            
                - script.execute: restart_park 
###################################################            
###### Working #################################### 
switch:
  - platform: template
    id: ontimeout 
    optimistic: True
###################################################            
###### Working #################################### 
  - platform: gpio
    pin: D7
    inverted: no    
    id: learn
    on_turn_on:
       - delay: 100ms
       - switch.turn_off: learn
###################################################            
###### Working #################################### 
  - platform: gpio
    pin: D1
    inverted: no    
    id: motor_forward
    interlock: [motor_reverse]
    interlock_wait_time: 500ms
###################################################            
###### Working #################################### 
  - platform: gpio
    pin: D2
    inverted: no    
    id: motor_reverse   
    interlock: [motor_forward]
    interlock_wait_time: 500ms    
###################################################            
###### Working ####################################     
  - platform: restart
    name: Restart Unit
    id: unit_restart
    icon: "mdi:restart"     
###################################################            
###### Working #################################### 
globals:
  - id: opening_time_restore
    type: float
    restore_value: yes
  - id: manual_time_restore
    type: float
    restore_value: yes
  - id: external_trigger_delay_restore
    type: float
    restore_value: yes    
  - id: auto_align_save
    type: float
    restore_value: yes 
  - id: hing_save
    type: float
    restore_value: yes     
  - id: rpm_save
    type: float
    restore_value: yes              
###################################################            
###### Working #################################### 
text_sensor:
  - platform: template
    name: Parked Status
    id: parking_status
    update_interval: 1s
    lambda: |-
      if (id(motor_parked).state) {
        return std::string("Parked Left");
      } else if (id(motor_parked_right).state) {
        return std::string("Parked Right");
      } else {
        return std::string("Not Parked");
      }

  - platform: wifi_info
    ip_address:
      name: Unit IP
  - platform: template
    name: "Version"
    lambda: |-
      return {"IHA_V4.esp32"};    
###################################################            
###### Working #################################### 
number:
  - platform: template
    icon: "mdi:timer"
    id: auto_alight_helper
    optimistic: true
    min_value: 4
    max_value: 6
    step: 1
    on_value:
      then:
      - if:
          condition:
            - for:
               time: 2min
               condition:
                 switch.is_on: ontimeout                   
          then:      
              - lambda: id(auto_alight_helper).state = id(auto_align_save);                 
###################################################            
###### Working #################################### 
  - platform: template
    icon: "mdi:timer"
    id: hing_helper
    optimistic: true
    min_value: 3
    max_value: 6
    step: 1
    on_value:
      then:
      - if:
          condition:
            - for:
               time: 2min
               condition:
                 switch.is_on: ontimeout                  
          then:
              - lambda: id(hing_helper).state = id(hing_save);                       

  - platform: template
    icon: "mdi:timer"
    id: rpm_number
    optimistic: true
    min_value: 3
    max_value: 6
    step: 1
    on_value:
      then:
      - if:
          condition:
            - for:
               time: 2min
               condition:
                 switch.is_on: ontimeout                 
          then:  
              - lambda: id(rpm_number).state = id(rpm_save);                                      
###################################################            
###### Working #################################### 
  - platform: template
    name: "Closing Time"
    icon: "mdi:timer"
    id: opening_time
    optimistic: true
    min_value: 0
    max_value: 1.4
    step: .05
    on_value:
      then:
      - if:
          condition:
            - for:
               time: 2min
               condition:
                 switch.is_on: ontimeout                 
          then:         
              - lambda: id(opening_time).state = id(opening_time_restore);                
###################################################            
###### Working #################################### 
  - platform: template
    name: "External Trigger Delay Seconds"
    id: external_trigger_delay
    icon: "mdi:timer-cog"    
    optimistic: true
    min_value: 0
    max_value: 120
    step: 1
    on_value:
      then:
      - if:
          condition:
            - for:
               time: 2min
               condition:
                 switch.is_on: ontimeout                 
          then:         
              - lambda: id(external_trigger_delay).state = id(external_trigger_delay_restore);                                          
###################################################            
###### Working #################################### 
cover:
  - platform: template
    name: "$cover_name"
    id: coverdoor
    close_action:
      - script.stop: safety       
      - if:
          condition:
            for:
              time: 10s
              condition:
                - switch.is_off: motor_reverse
                - switch.is_off: motor_forward                
          then:      
                - script.execute: door_open_script_auto_offa 
                - script.execute: door_open_script_auto_offb
                - script.execute: door_open_script_auto_offaa 
                - script.execute: door_open_script_auto_offba                
      - script.execute: door_open_script_auto_offa_return
      - script.execute: door_open_script_auto_offb_return  
      - script.execute: safety          
      - delay: 1s
      - cover.open: coverdoor     
    stop_action:
     - switch.turn_off: motor_forward 
     - switch.turn_off: motor_reverse     
     - script.stop: door_open_script_auto_offa   
     - script.stop: door_open_script_auto_offb  
     - script.stop: door_open_script_auto_offaa   
     - script.stop: door_open_script_auto_offba        
    optimistic: true                
           
  `;
              }                                               
////////////////////////////////////////////////////////////////////////////////////////////       
                        // Combine the two configurations
            const combinedConfig = `${yamlConfig}\n${additionalConfig}`;

            // Create a Blob and download link
            const blob = new Blob([combinedConfig], { type: 'text/plain' });
            const downloadLink = document.createElement('a');         

            // Set attributes for the download link
            downloadLink.href = URL.createObjectURL(blob);
            downloadLink.download = 'iha_code_generator.yaml';

            // Append the link to the body and simulate a click to trigger the download
            document.body.appendChild(downloadLink);
            downloadLink.click();

            // Remove the link from the body
            document.body.removeChild(downloadLink);
        });

        // Initial call to set the initial visibility based on the default values
        updateSubbVisibility();
            document.getElementById('downloadGuideButton').addEventListener('click', function() {
            // YAML content
            const yamlGuideContent = `
        Getting started with ESPhome add-on for Home Assistant guide 
        
                        https://esphome.io/guides/getting_started_hassio.html.

        When ESPhome has been set up, following the steps below.

        Step 1: Click New Device and then click continue.
        Step 2: Give it a name and copy the name into the Display Name box in IHA Rack System web page.
        Step 3: Now Click Next and click on any of the ESP32 options (it will be changed later).
        Step 4: Copy the Encryption key that is provided and paste it into the API Key box in IHA Rack System web page.
        Step 5: Now click skip and find the new device and click edit.
        Step 6: Around the second line you should see (name:) copy the name given and past it into the ESPHome Name box in IHA Rack System web page.
        Step 7: Now go to IHA Rack System web page and select the board address and the device type. Fill out the remaining boxes.
        Step 8: Click Download YAML File. it will now download. Open the new downloaded file and select all the text and copy it.
        Step 9: Now go back to the new device configuration page and replace all the existing text with the copied text.
        Step 10: Now Click Manual download and if and when prompted, click modern format and it should give you a new downloaded Bin file.
        Step 11: You should already have access to your default IHA Rack System Device Page. Go to the update at the bottom, select the bin file that was downloaded and hit update.
        Step 12: Steps 10 & 11 can only be done once as it adds an update password. Once you completed step 11, you can now update with esphome.
        `;
            // Create a Blob and download link
            const blob = new Blob([yamlGuideContent], { type: 'text/plain' });
            const downloadLink = document.createElement('a');

            // Set attributes for the download link
            downloadLink.href = URL.createObjectURL(blob);
            downloadLink.download = 'esphome_guide.yaml';

            // Append the link to the body and simulate a click to trigger the download
            document.body.appendChild(downloadLink);
            downloadLink.click();

            // Remove the link from the body
            document.body.removeChild(downloadLink);
        });

    </script>
                                       
  
</html>